'use strict';var WAVE=function(){function n(a,c,g,t,v,p,d,b){d=e.strDefault(d);b=e.strDefault(b);var f=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");f.open(a,c);WAVE.isFunction(p)&&(f.onerror=p);f.onreadystatechange=function(){4===f.readyState&&(200===f.status?WAVE.isFunction(t)&&t(f.responseText):WAVE.isFunction(v)&&v(f.responseText))};e.strEmpty(d)||f.setRequestHeader("Accept",d);e.strEmpty(b)||f.setRequestHeader("Content-Type",b);null!==g?(e.isObject(g)&&!e.strEmpty(b)&&
-1!==b.indexOf("application/json")&&(g=JSON.stringify(g)),f.send(g)):f.send();return f}function k(a,c){"@!WAVE EVENT FUN LIST"in a||(a["@!WAVE EVENT FUN LIST"]={});var g=a["@!WAVE EVENT FUN LIST"];c in g||(g[c]=[]);return g[c]}function x(a){"@!WAVE EVENT SINK LIST"in a||(a["@!WAVE EVENT SINK LIST"]=[]);return a["@!WAVE EVENT SINK LIST"]}function z(){var a=e.id(f.DIV_SUMMARY);if(a){var c;c='<table style="width: 75%"><tr> <th>Area</th> <th>Total</th><th>Passed</th><th>Failed</th> </tr>';var g=0,t=0,
v;for(v in h){var p=e.id(h[v]);p&&(c+=e.strHTMLTemplate("<tr @STL@> <td>@Area@</td> <td>@Total@</td><td>@Passed@</td><td>@Failed@</td> </tr>",{STL:0<p.STAT_FAILED_TESTS?"class="+f.CSS_CLASS_TABLEERROR:"",Area:p.STAT_NAME,Total:p.STAT_TOTAL_TESTS,Passed:p.STAT_TOTAL_TESTS-p.STAT_FAILED_TESTS,Failed:p.STAT_FAILED_TESTS}),g+=p.STAT_TOTAL_TESTS,t+=p.STAT_FAILED_TESTS)}c+=e.strHTMLTemplate("<tr class=@CLS@> <td>TOTAL</td> <td>@Total@</td><td>@Passed@</td><td>@Failed@</td> </tr>",{CLS:f.CSS_CLASS_TABLETOTAL,
Total:g,Passed:g-t,Failed:t});a.innerHTML=c+"</table>"}}Date.now||(Date.now=function(){return(new Date).getTime()});var e={TUNDEFINED:"undefined",CONTENT_TYPE_JSON:"application/json",CONTENT_TYPE_JSON_UTF8:"application/json;charset=utf-8",CONTENT_TYPE_MULTIPART:"multipart/form-data",falseness:function(){return!1},falsefunc:function(){return!1},arrayDelete:function(a,c){for(var g in a)if(a[g]===c)return a.splice(g,1),!0;return!1},arrayShallowCopy:function(a){var c=[];if(a&&0<a.length)for(var g=0,t=
a.length;g<t;g++)c.push(a[g]);return c},arrayClear:function(a){for(;0<a.length;)a.pop()},mergeArrays:function(a,c,g,t){if(!e.isArray(a)&&!e.isArray(c))return[];g=e.isFunction(g)?g:function(a,c){return a===c};t=e.isFunction(t)?t:function(a){return a};e.isArray(a)||(a=c);e.isArray(c)||(c=a);a=a.concat(c);for(c=0;c<a.length;c++){for(var v=c+1;v<a.length;v++)g(a[c],a[v])&&a.splice(v--,1);a[c]=t(a[c])}return a}};e.inArray=Array.prototype.indexOf?function(a,c){return-1!==a.indexOf(c)}:function(a,c){for(var g=
a.length;g--;)if(a[g]===c)return!0;return!1};e.isString=function(a){return"undefined"===typeof a?!1:"[object String]"===Object.prototype.toString.call(a)};e.isObject=function(a){return"undefined"===typeof a?!1:a===Object(a)&&!e.isArray(a)&&!e.isFunction(a)};e.isArray=function(a){return"undefined"===typeof a?!1:"[object Array]"===Object.prototype.toString.call(a)};e.isFunction=function(a){return"function"===typeof a};e.isMapOrArray=function(a){return a===Object(a)&&!e.isFunction(a)};e.exists=function(a){return"undefined"!==
typeof a&&null!==a};e.overrideFunction=function(a,c){return function(){this.baseFunction=a;return c.apply(this,arguments)}};e.extend=function(a,c,g){var t;if(g)for(t in c)c.hasOwnProperty(t)&&!a.hasOwnProperty(t)&&(a[t]=c[t]);else for(t in c)c.hasOwnProperty(t)&&(a[t]=c[t]);return a};e.clone=function(a){return JSON.parse(JSON.stringify(a))};e.memberClone=function(a,c){var g;if(!e.isObject(a)){if(!e.isArray(a))return a;g=[];for(var t=a.length,v=0;v<t;v++)g.push(e.memberClone(a[v],c));return g}g={};
for(t in a)g[c?t.toLowerCase():t]=e.memberClone(a[t],c);return g};e.isSame=function(a,c){if(2>arguments.length)return!1;if(null===a&&null===c)return!0;if(null===a||null===c||typeof a!==typeof c)return!1;if("function"===typeof a.getTime)return a.getTime()===c.getTime();if(e.isMapOrArray(a)){if(a.length!==c.length||Object.keys(a).length!==Object.keys(c).length)return!1;for(var g in a)if(!e.isSame(a[g],c[g]))return!1;return!0}return a===c};e.propStrAsObject=function(a,c){if(null!==a&&!e.strEmpty(c)&&
a.hasOwnProperty(c)){var g=a[c];if(null!==g&&"string"===typeof g)try{a[c]=JSON.parse(g)}catch(t){throw console.error("WV.propStrAsObject, error parsing property '"+c+"' string as JSON: "+g),t;}}};e.tryParseJSON=function(a,c){if("undefined"!==typeof a&&null!==a){if(e.isMapOrArray(a))return{ok:!0,obj:a};try{return{ok:!0,obj:JSON.parse(a)}}catch(g){}}return{ok:!1,obj:"undefined"!==typeof c?c:{}}};e.checkKeysUnique=function(a){if(!e.isObject(a))return a;a=Object.keys(a);for(var c=0;c<a.length;++c)for(var g=
c+1;g<a.length;++g)if(a[c].toLowerCase()===a[g].toLowerCase())return!0;return!1};e.empty=function(a){if("undefined"===typeof a||null===a)return!0;for(var c in a)return!1;return!0};e.has=function(a,c){return a?hasOwnProperty.call(a,c):!1};e.get=function(a,c,g){return"undefined"!==typeof a&&null!==a&&"undefined"!==typeof c&&null!==c&&e.has(a,c)&&"undefined"!==typeof a[c]?a[c]:"undefined"===typeof g?null:g};e.tryParseInt=function(a,c){var g;g="undefined"===typeof a||null===a||0===a.length?NaN:Number(a);
var t;c?(t=!isNaN(g)&&isFinite(g))&&(g=0>g?-Math.floor(-g):Math.floor(g)):t=e.isFunction(Number.isInteger)?Number.isInteger(g):!isNaN(g)&&isFinite(g)&&Math.floor(g)===g;return{ok:t,value:g}};e.intValid=function(a){return e.tryParseInt(a).ok};e.intValidPositive=function(a){a=e.tryParseInt(a);return a.ok&&0<a.value};e.intValidPositiveOrZero=function(a){a=e.tryParseInt(a);return a.ok&&0<=a.value};e.formatMoney=function(a,c,g){e.tryParseInt(a,!0).ok||(a=0);c="undefined"===typeof c?".":c;g="undefined"===
typeof g?",":g;var t=100*a,v=Math.round(t);a=1E-7>Math.abs(t-v)?v:0>a?-Math.floor(-t):Math.floor(t);a=(a/100).toFixed(2);"."!==c&&(a=a.replace(".",c));return a.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+g)};e.each=function(a,c){if("undefined"===typeof a||null===a)return null;if(!e.isFunction(c))return a;for(var g in a)c(a[g],g,a);return a};e.isScalar=function(a){return/boolean|number|string/.test(typeof a)};e.isObjectType=function(a){return e.strOneOf(a,["object","json","map","array"])};e.isIntType=
function(a){return e.strOneOf(a,["int","integer"])};e.isRealType=function(a){return e.strOneOf(a,["float","real","double","money"])};e.isBoolType=function(a){return e.strOneOf(a,["bool","boolean","logical"])};e.isStringType=function(a){return e.strOneOf(a,"str string char[] char varchar text".split(" "))};e.isDateType=function(a){return e.strOneOf(a,["date","datetime","time","timestamp"])};e.isSimpleKeyStringMap=function(a){if(!e.exists(a)||!e.isObject(a))return!1;var c=Object.keys(a),g;for(g in c){var t=
a[c[g]];if("undefined"===typeof t||null!==t&&!e.isString(t))return!1}return!0};e.convertScalarType=function(a,c,g,t){function v(){if("undefined"!==typeof t&&null!==t)return t;null===c&&(c="<null>");throw"Can not convert '"+c+"' to type '"+g+"'";}if(e.strEmpty(g))return c;var p;if(e.isObjectType(g)){if(null===c)return a?null:{};if(e.isObject(c))return c;p=typeof c;if("boolean"===p)return c?{value:!0}:{value:!1};if(e.isFunction(c.getTime)||"number"===p)return{value:c};if("string"===p)try{return JSON.parse(c)}catch(d){return{value:c}}}else if(e.isIntType(g)){if(null===
c)return a?null:0;p=typeof c;if("boolean"===p)return c?1:0;if(e.isFunction(c.getTime))return c.getTime();if("number"===p||"object"===p)p="string",c=c.toString();if("string"===p){if(e.strEmpty(c))return a?null:0;a=e.tryParseInt(c,!0);if(a.ok)return a.value}}else{if(e.isStringType(g)){if(null===c)return a?null:"";p=typeof c;return"string"===p?c:"boolean"===p?c?"true":"false":e.isFunction(c.getTime)?e.toUSDateTimeString(c):c.toString()}if(e.isRealType(g)){if(null===c)return a?null:0;p=typeof c;if("boolean"===
p)return c?1:0;if(e.isFunction(c.getTime))return c.getTime();if("number"===p||"object"===p)p="string",c=c.toString();if("string"===p){if(e.strEmpty(c))return a?null:0;a=parseFloat(c);if(!isNaN(a))return a}}else{if(e.isBoolType(g))return c?!0:!1;if(e.isDateType(g)){if(null===c)return a?null:v();if("number"===typeof c)return new Date(Math.round(c));if(e.strEmpty(c)&&a)return null;a=Date.parse(c);if(!isNaN(a))return new Date(a)}}}return v()};e.strEmpty=function(a){return!a||0===a.length||/^\s*$/.test(a)};
e.strAsBool=function(a,c){if("undefined"===typeof a||null===a)return"undefined"===typeof c?!1:c;a=a.toString();return e.strOneOf(a,["true","t","yes","1"])};e.strDefault=function(a,c){return"undefined"===typeof a||null===a?"undefined"===typeof c||null===c?"":c:a.toString()};e.strEmptyDefault=function(a,c){return e.strEmpty(a)?"undefined"===typeof c||null===c?"":c:a.toString()};e.nlsNameDefault=function(a,c){return e.strEmptyDefault("undefined"===typeof a||null===a?null:a.n,c)};e.nlsDescrDefault=function(a,
c){return e.strEmptyDefault("undefined"===typeof a||null===a?null:a.d,c)};e.nlsNameOrDescrDefault=function(a,c){var g=null;"undefined"!==typeof a&&null!==a&&(g=a.n,e.strEmpty(g)&&(g=a.d));return e.strEmptyDefault(g,c)};e.nlsDescrOrNameDefault=function(a,c){var g=null;"undefined"!==typeof a&&null!==a&&(g=a.d,e.strEmpty(g)&&(g=a.n));return e.strEmptyDefault(g,c)};e.strTrim=function(a){return a.replace(/^\s+|\s+$/g,"")};e.strLTrim=function(a){return a.replace(/^\s+/,"")};e.strRTrim=function(a){return a.replace(/\s+$/,
"")};e.strTrunc=function(a,c,g){if(!a||a.length<=c)return a;g=g||"...";return a.substr(0,c-g.length)+g};e.strCaps=function(a,c){if(e.strEmpty(a))return a;for(var g,t="",v=!1,p=0;p<a.length;p++)g=a[p]," "===g||"."===g?(v=!0,t+=g):(t=v||0===p?t+g.toUpperCase():t+(c?g.toLowerCase():g),v=!1);return t};e.joinPathSegs=function(){if(0===arguments.length)return"";for(var a="",c=!0,g=0;g<arguments.length;g++){var t=arguments[g];t&&(t=(c?WAVE.strLTrim(t):t.replace(/^[\/\\\s]+/,"")).replace(/[\/\\\s]+$/,""),
WAVE.strEmpty(t)||(c||(a+="/"),a+=t,c=!1))}return a};e.mapCurrencyISOToSymbol=function(a,c){a=e.strDefault(a,"");a=a.toUpperCase();switch(a){case "USD":return"$";case "RUB":return"\u20bd";case "EUR":return"\u20ac";case "GBP":return"\u00a3";default:return e.strDefault("?",c)}};var y="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ");e.siNum=function(a,c){"undefined"===typeof c&&(c=2);if(0===a)return a.toFixed(c);var g=a;0>a&&(g=-g);for(var t=0,v=g.toFixed(c)+y[t+8];1E3<=g;)g/=1E3,t++;for(;1>g;)g*=
1E3,t--;v=Math.pow(10,c);for(g=Math.round(g*v)/v;1E3<=g;)g/=1E3,t++;for(;1>g;)g*=1E3,t--;0>a&&(g=-g);return v=g.toFixed(c)+y[t+8]};e.charIsAZLetterOrDigit=function(a){return null===a?!1:"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"0"<=a&&"9">=a};e.strStartsWith=function(a,c,g){return g?a.slice(0,c.length)===c:a.slice(0,c.length).toLowerCase()===c.toLowerCase()};e.strEndsWith=function(a,c,g){return g?a.slice(-c.length)===c:a.slice(-c.length).toLowerCase()===c.toLowerCase()};e.strEnsureEnding=function(a,c){return a+
(a.slice(-c.length)===c?"":c)};e.strContains=function(a,c,g){return g?-1<a.indexOf(c):-1<a.toLowerCase().indexOf(c.toLowerCase())};e.strSame=function(a,c){return"undefined"===typeof a||"undefined"===typeof c||null===a||null===c?!1:e.strTrim(a).toLowerCase()===e.strTrim(c).toLowerCase()};e.strOneOf=function(a,c,g){if(null===a||null===c||!e.isArray(c))return!1;g||(g="|");a=g+e.strTrim(a).toLowerCase()+g;return 0<=(g+c.join(g)+g).toLowerCase().indexOf(a)};var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;",
"'":"&#39;","/":"&#x2F;"};e.strEscapeHTML=function(a){return String(a).replace(/[&<>"'\/]/g,function(a){return d[a]})};e.strHTMLTemplate=function(a,c){return a.replace(/@([\-\.0-9a-zA-Z]+)@/g,function(a,t){return e.strEscapeHTML(c[t])})};e.strTemplate=function(a,c){return a.replace(/@([\-\.0-9a-zA-Z]+)@/g,function(a,t){return c[t]})};e.strHTMLTemplateFun=function(a,c){return a.replace(/@([\-\.0-9a-zA-Z]+)@/g,function(a,t){return e.strEscapeHTML(c(a,t))})};e.strTemplateFun=function(a,c){return a.replace(/@([\-\.0-9a-zA-Z]+)@/g,
c)};e.strIsEMail=function(a){if(e.strEmpty(a))return!1;var c=a.indexOf("@");if(1>c||c===a.length-1||0<=a.indexOf("@",c+1))return!1;var g=a.lastIndexOf(".");if(!(g>c+2&&g+2<=a.length))return!1;for(g=0;g<a.length;g++)if(c=a[g],"."!==c&&"@"!==c&&"-"!==c&&"_"!==c&&!e.isValidScreenNameLetterOrDigit(c))return!1;return!0};e.isValidScreenNameLetter=function(a){return"A"<=a&&"Z">=a||"a"<=a&&"z">=a||"\u0410"<=a&&"\u042f">=a||"\u0430"<=a&&"\u044f">=a||0<="\u0451\u0401\u00c0\u00c1\u00c2\u00c3\u00c4\u00c5\u00c6\u00c7\u00c8\u00c9\u00ca\u00cb\u00cc\u00cd\u00ce\u00cf\u00d0\u00d1\u00d2\u00d3\u00d4\u00d5\u00d6\u00d8\u00d9\u00da\u00db\u00dc\u00dd\u00de\u00df\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5\u00e6\u00e7\u00e8\u00e9\u00ea\u00eb\u00ec\u00ed\u00ee\u00ef\u00f0\u00f1\u00f2\u00f3\u00f4\u00f5\u00f6\u00f8\u00f9\u00fa\u00fb\u00fc\u00fd\u00fe\u00ff\u0100\u0101\u0102\u0103\u0104\u0105\u0106\u0107\u0108\u0109\u010a\u010b\u010c\u010d\u010e\u010f\u0110\u0111\u0112\u0113\u0114\u0115\u0116\u0117\u0118\u0119\u011a\u011b\u011c\u011d\u011e\u011f\u0120\u0121\u0122\u0123\u0124\u0125".indexOf(a)};
e.isValidScreenNameLetterOrDigit=function(a){return e.isValidScreenNameLetter(a)||"0"<=a&&"9">=a};e.isValidScreenNameSeparator=function(a){return"."===a||"-"===a||"_"===a};e.strIsScreenName=function(a){if(e.strEmpty(a))return!1;a=e.strTrim(a);if(0===a.length)return!1;for(var c=!1,g,t=0;t<a.length;t++)if(g=a[t],0===t){if(!e.isValidScreenNameLetter(g))return!1}else if(e.isValidScreenNameSeparator(g)){if(c)return!1;c=!0}else{if(!e.isValidScreenNameLetterOrDigit(g))return!1;c=!1}return!c};e.strNormalizeUSPhone=
function(a){if(e.strEmpty(a))return"";a=e.strTrim(a);if(0===a.length)return"";if(e.strStartsWith(a,"+",!0))return a;for(var c=!1,g=!1,t="",v="",p="",d,b=0;b<a.length;b++)if(d=a[b],c||"("!==d||0!==t.length)if(c&&")"===d)c=!1;else{c&&3===t.length&&(c=!1);if(0<v.length&&!g){if("x"===d||"X"===d||"."===d&&6<v.length){g=!0;continue}var f=a.substring(b).toUpperCase();if(e.strStartsWith(f,"EXT",!1)&&7<=v.length){g=!0;b+=2;continue}if(e.strStartsWith(f,"EXT.",!1)&&7<=v.length){g=!0;b+=3;continue}}e.charIsAZLetterOrDigit(d)&&
(c?t+=d:g?p+=d:v+=d)}else c=!0;for(;7>v.length;)v+="?";0===t.length&&(10<=v.length?(t=v.substring(0,3),v=v.substring(3)):t="???");7<v.length&&0===p.length&&(p=v.substring(7),v=v.substring(0,7));v=v.substring(0,3)+"-"+v.substring(3);0<p.length&&(p="x"+p);return"("+t+") "+v+p};e.DATE_TIME_FORMATS={LONG_DATE:"LongDate",SHORT_DATE:"ShortDate",LONG_DATE_TIME:"LongDateTime",SHORT_DATE_TIME:"ShortDateTime",TRAN_DATE_TIME:"TranDateTime",SHORT_DAY_MONTH:"ShortDayMonth"};var r="January February March April May June July August September October November December".split(" ");
e.dateTimeToString=function(a,c,g){function t(a){return("0"+a.toString()).slice(-2)}function v(a){return e.strLocalize(g,"date","",r[a])}function p(){return t(b.getMonth()+1)}function d(){return t(b.getDate())}if("undefined"===typeof a||null===a)return"";c=WAVE.strDefault(c,e.DATE_TIME_FORMATS.LONG_DATE);var b=WAVE.isString(a)?new Date(a):a;switch(c){case e.DATE_TIME_FORMATS.LONG_DATE:return v(b.getMonth())+" "+d()+", "+b.getFullYear();case e.DATE_TIME_FORMATS.SHORT_DATE:return p()+"/"+d()+"/"+b.getFullYear();
case e.DATE_TIME_FORMATS.LONG_DATE_TIME:return v(b.getMonth())+" "+d()+", "+b.getFullYear()+" "+t(b.getHours())+":"+t(b.getMinutes())+":"+t(b.getSeconds());case e.DATE_TIME_FORMATS.SHORT_DATE_TIME:return p()+"/"+d()+"/"+b.getFullYear()+" "+t(b.getHours())+":"+t(b.getMinutes());case e.DATE_TIME_FORMATS.TRAN_DATE_TIME:return p()+"/"+d()+"/"+b.getFullYear()+" "+t(b.getHours())+":"+t(b.getMinutes())+":"+t(b.getSeconds());case e.DATE_TIME_FORMATS.SHORT_DAY_MONTH:return p()+"/"+d()}};e.toISODateTimeString=
function(a){function c(a){return 10>a?"0"+a:a}return a.getUTCFullYear()+"-"+c(a.getUTCMonth()+1)+"-"+c(a.getUTCDate())+"T"+c(a.getUTCHours())+":"+c(a.getUTCMinutes())+":"+c(a.getUTCSeconds())+"Z"};e.toUSDateTimeString=function(a){function c(a){return 10>a?"0"+a:a}return c(a.getMonth()+1)+"/"+c(a.getDate())+"/"+c(a.getFullYear())+" "+c(a.getHours())+":"+c(a.getMinutes())+":"+c(a.getSeconds())};e.toUSDateString=function(a){function c(a){return 10>a?"0"+a:a}return c(a.getMonth()+1)+"/"+c(a.getDate())+
"/"+c(a.getFullYear())};e.toSeconds=function(a){var c=0,g=a.match(/(\d+)\s*d/),t=a.match(/(\d+)\s*h/),d=a.match(/(\d+)\s*m/);a=a.match(/(\d+)\s*s/);g&&(c+=86400*parseInt(g[1]));t&&(c+=3600*parseInt(t[1]));d&&(c+=60*parseInt(d[1]));a&&(c+=parseInt(a[1]));return c};e.content=function(a){return e.strStartsWith(a,"###WV")?e.markup(a.slice(5)):e.strStartsWith(a,"###HTML")?a.slice(7):e.strEscapeHTML(a)};e.markup=function(){function a(a){return"_"===a||"A"<=a&&"Z">=a||"a"<=a&&"z">=a}function c(a){a=a.substr(1).split(".");
var c={},g;for(g in a)c[a[g]]=0;a=[];for(var d in c)a.push("wv-markup-"+d.toLowerCase());return a.join(" ")}var g={" ":"&nbsp;","!":"&#33;","#":"&#35;",$:"&#36;","*":"&#42;","<":"&lt;","=":"&#61;",">":"&gt;","{":"&#123;","}":"&#125;"};return function(t){function d(a){for(var c;q>a&&"undefined"!==typeof(c=l.pop());)b+="</li></"+c+">",q--;0!==q&&(b+="</li><li>")}function p(a){b+="</dd>";a||(b+="</dl>")}for(var b="",f=0,e=[],h=[],q=0,r,m,l=[],D,I=0,M=t.length;I<M;I++){var B=t.charAt(I),H=t.charAt(I+
1);switch(B){case "\r":"\n"===H&&(I++,H=t.charAt(I+1));case "\n":B="\n";break;case "<":B="&lt;";break;case ">":B="&gt;";break;case "&":if(";"!==t.charAt(I+2))break;var k=g[H];"undefined"!==typeof k&&(B=k);I+=2}switch(f){case 0:case 2:case 11:case 16:switch(B){case "\n":2===f?b+="</p>":(11===f&&d(0),16===f&&p(!1));f=0;break;case "{":2===f?b+=" ":(11===f&&d(0),16===f&&p(!1),b+="<p>");e.push(1);f=3;h.push(b);b=B;break;case "!":2===f?(f=1,b+=" "+B):(11===f&&d(0),16===f&&p(!1),f=7,h.push(b),b=B);break;
case "#":case "*":2===f?(f=1,b+=" "+B):(16===f&&p(!1),r=B,f=9,h.push(b),b=B);break;case "$":2===f?(f=1,b+=" "+B):(16===f&&p(!0),D=16===f,f=12,h.push(b),b=B);break;default:2===f?b+=" ":(11===f&&d(0),16===f&&p(!1),b+="<p>"),f=1,b+=B}break;case 1:switch(B){case "\n":f=2;break;case "{":e.push(f);f=3;h.push(b);b=B;break;default:b+=B}break;case 3:switch(B){case "\n":b+=" ";break;case "{":e.push(f);f=3;h.push(b);b=B;break;case "}":f=4;b=b.substr(1);break;default:b+=B}break;case 4:switch(B){case ".":if(a(H)){f=
5;h.push(b);b=B;break}default:f=e.pop(),b=h.pop()+b,I--}break;case 5:b+=B;"."===H?f=6:"_"===H||"-"===H||"A"<=H&&"Z">=H||"a"<=H&&"z">=H||"0"<=H&&"9">=H||(f=e.pop(),b='<span class="'+c(b)+'">'+h.pop()+"</span>",b=h.pop()+b);break;case 6:switch(B){case ".":if(a(H)){f=5;b+=B;break}default:f=e.pop(),b='<span class="'+c(b)+'">'+h.pop()+"</span>.",b=h.pop()+b}break;case 7:if("\n"===B){b=h.pop()+"<p>"+b;f=1;I--;break}if("!"===B&&6>b.length)b+=B;else switch(q=b.length,b=h.pop()+"<h"+q+">",f=8,B){case "{":e.push(f);
f=3;h.push(b);b=B;break;default:b+=B}break;case 8:switch(B){case "\n":f=0;b+="</h"+q+">";q=0;break;case "{":e.push(f);f=3;h.push(b);b="{";break;default:b+=B}break;case 9:if("\n"===B){b=h.pop()+"<p>"+b;f=1;I--;break}if(B===r)b+=B;else{f=10;H=b.length;b=h.pop();q===H&&r!==m&&d(0);if(q===H)b+="</li><li>";else if(q<H)for(;q<H;q++)switch(r){case "#":b+="<ol><li>";l.push("ol");break;case "*":b+="<ul><li>",l.push("ul")}else d(H);switch(B){case "{":e.push(f);f=3;h.push(b);b=B;break;default:b+=B}break}break;
case 10:switch(B){case "\n":m=r;f=11;break;case "{":e.push(f);f=3;h.push(b);b="{";break;default:b+=B}break;case 12:if("\n"===B||"="===B){b=h.pop()+(D?"</dl>":"")+"<p>"+b;f=1;I--;break}f=13;switch(B){case "{":e.push(f);f=3;h.push(b);b=B;break;default:b+=B}break;case 13:if("\n"===B){b=h.pop()+(D?"</dl>":"")+"<p>"+b;f=1;I--;break}switch(B){case "{":e.push(f);f=3;h.push(b);b=B;break;case "=":f=14;h.push(b);b=B;break;default:b+=B}break;case 14:if("\n"===B){b="<p>"+h.pop()+b;b=h.pop()+(D?"</dl>":"")+b;
f=1;I--;break}b="<dt>"+h.pop().substr(1)+"</dt><dd>";b=(D?h.pop():h.pop()+"<dl>")+b;f=15;switch(B){case "{":e.push(f);f=3;h.push(b);b=B;break;default:b+=B}break;case 15:switch(B){case "\n":f=16;break;case "{":e.push(f);f=3;h.push(b);b="{";break;default:b+=B}break;default:throw"WAVE.markup(state)";}}for(e.push(f);"undefined"!==typeof(f=e.pop());)switch(f){case 0:break;case 1:case 2:b+="</p>";break;case 14:b=h.pop()+b;case 12:case 13:D&&h.push(h.pop()+"</dl>");case 9:case 7:b="<p>"+b+"</p>";case 3:case 4:b=
h.pop()+b;break;case 8:b+="</h"+q+">";break;case 10:case 11:d(0);break;case 15:case 16:p(!1);break;default:throw"WAVE.markup(last.state)";}return b}}();e.isParentOf=function(a,c){if(e.isFunction(a.contains))try{return a.contains(c)}catch(t){return!1}for(var g=c;;){g=g.parentNode;if(null===g)return!1;if(g===a)return!0}};e.styleOf=function(a,c){return"undefined"===typeof a||null===a||e.strEmpty(c)||!e.isFunction(window.getComputedStyle)?"":window.getComputedStyle(a,null).getPropertyValue(c)};e.removeElem=
function(a){a=e.id(a);return null!==a?(a.parentNode.removeChild(a),!0):!1};e.removeChildren=function(a){for(;;){var c=a.lastChild;if(c)a.removeChild(c);else break}};e.addClass=function(a,c){"undefined"===typeof a||null===a||e.strEmpty(c)||(e.removeClass(a,c),a.className+=" "+c)};e.removeClass=function(a,c){"undefined"===typeof a||null===a||e.strEmpty(c)||"undefined"===typeof a.className||(a.className=a.className.replace(new RegExp("(?:^|\\s)"+c+"(?!\\S)","g"),""))};e.fullHieght=function(a){if("undefined"!==
typeof a&&null!==a)return a.clientHeight+parseFloat(e.styleOf(a,"margin-top"))+parseFloat(e.styleOf(a,"margin-bottom"))+parseFloat(e.styleOf(a,"padding-top"))+parseFloat(e.styleOf(a,"padding-bottom"))+parseFloat(e.styleOf(a,"border-top-width"))+parseFloat(e.styleOf(a,"border-bottom-width"))};e.fullWidth=function(a){if("undefined"!==typeof a&&null!==a)return a.clientWidth+parseFloat(e.styleOf(a,"margin-left"))+parseFloat(e.styleOf(a,"margin-right"))+parseFloat(e.styleOf(a,"padding-left"))+parseFloat(e.styleOf(a,
"padding-right"))+parseFloat(e.styleOf(a,"border-left-width"))+parseFloat(e.styleOf(a,"border-right-width"))};e.addEventHandler=function(a,c,g,t){"undefined"!==typeof a&&null!==a&&(e.isFunction(a.addEventListener)?a.addEventListener(c,g,!0===t):e.isFunction(a.attachEvent)?a.attachEvent("on"+c,g):a["on"+c]=g)};e.removeEventHandler=function(a,c,g,t){"undefined"!==typeof a&&null!==a&&(e.isFunction(a.removeEventListener)?a.removeEventListener(c,g,!0===t):e.isFunction(a.detachEvent)?a.detachEvent("on"+
c,g):a["on"+c]=null)};e.id=function(a){return document.getElementById(a)};e.ce=function(a){return document.createElement(a)};e.getRadioGroupValue=function(a){a=document.getElementsByName(a);for(var c=0;c<a.length;c++)if(a[c].checked)return a[c].value};e.LOCALIZER={eng:{},rus:{},deu:{},fra:{},esp:{},allLanguageISOs:function(){var a=[],c;for(c in e.LOCALIZER)e.has(e.LOCALIZER,c)&&3===c.length&&a.push(c);return a}};e.strLocalize=function(a,c,g,t){if(4>arguments.length||e.strEmpty(a)||e.strEmpty(t))return t;
e.strEmpty(c)&&(c="--ANY-SCHEMA--");e.strEmpty(g)&&(g="--ANY-FIELD--");var b=e.LOCALIZER;if(!b.hasOwnProperty(a))return t;b=b[a];if(b.hasOwnProperty(c))b=b[c];else{if(!b.hasOwnProperty("--ANY-SCHEMA--"))return t;b=b["--ANY-SCHEMA--"]}if(b.hasOwnProperty(g))b=b[g];else{if(!b.hasOwnProperty("--ANY-FIELD--"))return t;b=b["--ANY-FIELD--"]}return b.hasOwnProperty(t)?b[t]:t};e.getCookie=function(a){return(a=document.cookie.match(new RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?
decodeURIComponent(a[1]):!1};e.setCookie=function(a,c){var g=a+"="+escape(c)+"; path=/";document.cookie=g};e.deleteCookie=function(a){e.setCookie(a,null,{expires:-1})};var b={iPhone:navigator.userAgent.match(/iPhone/i),iPod:navigator.userAgent.match(/iPod/i),iPad:navigator.userAgent.match(/iPad/i),Android:navigator.userAgent.match(/Android/i),IE:-1!==navigator.appName.indexOf("Microsoft"),IEMobile:navigator.userAgent.match(/IEMobile/i),WinPhone:/windows phone/i.test(navigator.userAgent),Chrome:!!window.chrome,
Safari:navigator.userAgent.match(/Safari/i)&&!window.chrome,FireFox:-1<navigator.userAgent.indexOf("Firefox"),BlackBerry:navigator.userAgent.match(/BlackBerry/i),WebOS:navigator.userAgent.match(/webOS/i),Opera:window.opera,OperaMini:navigator.userAgent.match(/Opera Mini/i),OperaMobi:navigator.userAgent.match(/Opera Mobi/i),Silk:/silk/i.test(navigator.userAgent)};b.iOS=b.iPhone||b.iPod||b.iPad;b.Mobile=b.iOS||b.Android||b.OperaMini||b.OperaMobi||b.BlackBerry||b.WebOS||b.IEMobile||b.WinPhone||b.Silk;
b.WebKit=b.Chrome||b.Safari;e.Platform=b;e.ajaxCall=function(a,c,g,b,d,p,f,e){n(a,c,g,b,d,p,f,e)};e.ajaxGet=function(a,c,g,b,d){n("GET",a,null,c,g,b,d)};e.ajaxGetJSON=function(a,c,g,b,d){n("GET",a,c,g,b,d,e.CONTENT_TYPE_JSON,e.CONTENT_TYPE_JSON_UTF8)};e.ajaxPost=function(a,c,g,b,d,p,f){n("POST",a,c,g,b,d,p,f)};e.ajaxPostJSON=function(a,c,g,b,d){n("POST",a,c,g,b,d,e.CONTENT_TYPE_JSON,e.CONTENT_TYPE_JSON_UTF8)};e.ajaxPatch=function(a,c,g,b,d){n("PATCH",a,null,c,g,b,d)};e.ajaxPatchJSON=function(a,c,
g,b,d){n("PATCH",a,c,g,b,d,e.CONTENT_TYPE_JSON,e.CONTENT_TYPE_JSON_UTF8)};e.onReady=function(a){e.isFunction(a)&&("loading"!==document.readyState?a():e.isFunction(document.addEventListener)?document.addEventListener("DOMContentLoaded",a):e.isFunction(document.attachEvent)&&document.attachEvent("onreadystatechange",function(){"loading"!==document.readyState&&a()}))};e.copyToClipboard=function(a){if("undefined"!==typeof a&&null!==a){var c,g=!1;if(e.isString(a)){if(e.strEmpty(a))return;g=!0;c=document.createElement("p");
c.style.border="0";c.style.padding="0";c.style.margin="0";c.style.position="absolute";c.style.left="-9999px";c.style.top="-9999px";c.setAttribute("readonly","");c.innerHTML=a;document.body.appendChild(c)}else c=a;var b;try{e.selectElement(c),b=document.execCommand("copy")}catch(d){b=!1}g&&document.body.removeChild(c);return b}};e.selectElement=function(a){var c,g;document.body.createTextRange?(c=document.body.createTextRange(),c.moveToElementText(a),c.select()):window.getSelection&&(g=window.getSelection(),
c=document.createRange(),c.selectNodeContents(a),g.removeAllRanges(),g.addRange(c))};e.getScrollBarWidth=function(){var a=document.createElement("div");a.style.height="100px";a.style.position="absolute";a.style.top="-10000px";a.style.width="100px";a.style.overflow="scroll";document.body.appendChild(a);var c=a.offsetWidth-a.clientWidth;document.body.removeChild(a);return c};e.EventManager={ANY_EVENT:"*",eventBind:function(a,c){if(e.strEmpty(a)||!c)return!1;var g=k(this,a);if(e.inArray(g,c))return!1;
g.push(c);return!0},eventUnbind:function(a,c){if(e.strEmpty(a)||!c)return!1;var g=k(this,a);return e.arrayDelete(g,c)},eventClear:function(a){if(e.strEmpty(a))return this["@!WAVE EVENT FUN LIST"]={},!0;a=k(this,a);e.arrayClear(a);return!0},eventInvocationSuspendCount:0,eventInvoke:function(a){if(e.strEmpty(a)||0!==this.eventInvocationSuspendCount)return!1;var c=Array.prototype.slice.call(arguments,1);c.splice(0,0,this);var g=k(this,a),b;for(b in g)g[b].apply(this,c);c.splice(0,0,a);g=k(this,"*");
for(b in g)g[b].apply(this,c);g=x(this);for(b in g){var d=g[b],p=d.eventNotify;WAVE.isFunction(p)&&p.apply(d,c)}return!0},eventSinkBind:function(a){if(null===a)return!1;var c=x(this);if(e.inArray(c,a))return!1;c.push(a);return!0},eventSinkUnbind:function(a){if(null===a)return!1;var c=x(this);return e.arrayDelete(c,a)},eventSinkClear:function(){this["@!WAVE EVENT SINK LIST"]=[]},eventSinks:function(){return x(this)}};var f={CSS_CLASS_AREA:"wvUTestArea",CSS_CLASS_TESTTITLE:"wvUTestTitle",CSS_CLASS_TESTNUMBER:"wvUTestNumber",
CSS_CLASS_OK:"wvUTestOK",CSS_CLASS_ERROR:"wvUTestError",CSS_CLASS_TABLEERROR:"wvUTestTableError",CSS_CLASS_TABLETOTAL:"wvUTestTableTotal",DIV_SUMMARY:"div_wv_utest_summary",DIV_AREA_PREFIX:"div_wv_utest_area_",DIV_TEST_PREFIX:"div_wv_utest_test_"},q=[],h={},l=!1,u=0;f.run=function(a,c,g){l||(l=!0,setTimeout(z,1E3));e.strEmpty(a)&&(a="Unspecified");var b=null;a in h?b=h[a]:(b=f.DIV_AREA_PREFIX+e.genAutoincKey("UtestingArea"),h[a]=b);var d=e.id(b);d||(d=document.createElement("div"),d.id=b,d.className=
f.CSS_CLASS_AREA,document.body.appendChild(d),d.innerHTML="<h2>"+a+"</h2>",d.STAT_NAME=a,d.STAT_TOTAL_TESTS=0,d.STAT_FAILED_TESTS=0);a="";try{q=[],u++,d.STAT_TOTAL_TESTS+=1,g()}catch(r){d.STAT_FAILED_TESTS+=1,a=r}g=!e.strEmpty(a);var p=f.DIV_TEST_PREFIX+e.genAutoincKey("UtestingCase"),b=document.createElement("div");b.id=p;b.className=g?f.CSS_CLASS_ERROR:f.CSS_CLASS_OK;c="<div class='"+f.CSS_CLASS_TESTTITLE+"'><span class='"+f.CSS_CLASS_TESTNUMBER+"'>"+u+"</span>&nbsp;"+c+"&nbsp;&nbsp;:&nbsp;&nbsp;"+
(g?"FAILED":"PASSED")+"</div>";g&&(c+="&nbsp;&nbsp;Error: "+a);if(0<q.length){c+="<pre>";for(var m in q)c+=" "+q[m];c+="</pre>"}b.innerHTML=c;d.appendChild(b)};f.testingStarted=function(){return l};f.log=function(a){q.push("  &gt; "+a+"\n")};f.logi=function(a){q.push(a)};f.assertTrue=function(a,c){e.strEmpty(c)&&(c="Assertion not true");if(!a)throw c;};f.assertFalse=function(a,c){e.strEmpty(c)&&(c="Assertion not false");if(a)throw c;};e.UTest=f;var m={EARTH_RADIUS_KM:6371,PI:3.14159265,PI2:6.28318531,
MapDirection:{North:{Name:"North"},NorthEast:{Name:"NorthEast"},East:{Name:"East"},SouthEast:{Name:"SouthEast"},South:{Name:"South"},SouthWest:{Name:"SouthWest"},West:{Name:"West"},NorthWest:{Name:"NorthWest"}},distance:function(a,c,g,b){return Math.sqrt(Math.pow(a-g,2)+Math.pow(c-b,2))},distancePoints:function(a,c){return m.distance(a.x(),a.y(),c.x(),c.y())},radToDeg:function(a){return a/3.14159265*180},degToRad:function(a){return a/180*3.14159265},azimuthRad:function(a,c,g,b){a=Math.atan2(b-c,g-
a);0>a&&(a=6.28318531+a);return a},azimuthRadPoints:function(a,c){return m.azimuthRad(a.x(),a.y(),c.x(),c.y())},azimuthDeg:function(a,c,g,b){return m.azimuthRad(a,c,g,b)/6.28318531*360},azimuthDegPoints:function(a,c){return m.azimuthDeg(a.x(),a.y(),c.x(),c.y())},azimuthOfRadix:function(a,c,g,b,d){2>d&&(d=2);a=m.azimuthRad(a,c,g,b);a=m.wrapAngle(a,3.14159265/d);return Math.floor(a/6.28318531*d)},azimuthOfRadixPoints:function(a,c,g){return m.azimuthOfRadix(a.x(),a.y(),c.x(),c.y(),g)},toRectXY:function(a,
c,g,b){return new m.Rectangle(new m.Point(a,c),new m.Point(g,b))},toRectWH:function(a,c,g,b){return new m.Rectangle(new m.Point(a,c),new m.Point(a+g,c+b))},overlapAreaRect:function(a,c){var g=a.topLeft(),b=c.topLeft();return m.overlapAreaWH(g.x(),g.y(),a.width(),a.height(),b.x(),b.y(),c.width(),c.height())},overlapAreaWH:function(a,c,g,b,d,p,f,e){a=f>=g?a<=d?a+g-d:a+g>=d+f?d+f-a:g:d<=a?d+f-a:d+f>=a+g?a+g-d:f;c=e>=b?c<=p?c+b-p:c+b>=p+e?p+e-c:b:p<=c?p+e-c:p+e>=c+b?c+b-p:e;0>a&&(a=0);0>c&&(c=0);return a*
c},overlapAreaXY:function(a,c,g,b,d,p,f,e){return m.overlapAreaWH(a,c,g-a,b-c,d,p,f-d,e-p)},lineIntersectsRect:function(a,c,g,b,d,p,f,e){e=p-e;f-=d;d=-(e*d+f*p);p=e*a+f*c+d;var h=0===p?0:0<p?1:-1;p=e*a+f*b+d;if((0===p?0:0<p?1:-1)!==h)return!0;p=e*g+f*c+d;if((0===p?0:0<p?1:-1)!==h)return!0;p=e*g+f*b+d;return(0===p?0:0<p?1:-1)!==h?!0:!1},intersectionLengthRectLineXY:function(a,c,g,b,d,f,e,h){return m.lineIntersectsRect(a,c,g,b,d,f,e,h)?m.distance(d<a?a:d>g?g:d,f<c?c:f>b?b:f,e<a?a:e>g?g:e,h<c?c:h>b?
b:h):0},wrapAngle:function(a,c){c%=6.28318531;0>c&&(c=6.28318531+c);return(a+c)%6.28318531},mapDirectionToAngle:function(a){switch(a){case m.MapDirection.North:return 1.5707963275;case m.MapDirection.South:return 4.7123889825;case m.MapDirection.East:return 0;case m.MapDirection.West:return 3.141592655;case m.MapDirection.NorthEast:return.78539816375;case m.MapDirection.NorthWest:return 2.35619449125;case m.MapDirection.SouthEast:return 5.49778714625;case m.MapDirection.SouthWest:return.625*6.28318531;
default:return 0}},angleToMapDirection:function(a){a=m.wrapAngle(a,0);return 0<=a&&.392699081875>a?m.MapDirection.East:.392699081875<=a&&1.178097245625>a?m.MapDirection.NorthEast:1.178097245625<=a&&a<6.28318531*5/16?m.MapDirection.North:a>=6.28318531*5/16&&2.748893573125>a?m.MapDirection.NorthWest:2.748893573125<=a&&3.534291736875>a?m.MapDirection.West:3.534291736875<=a&&a<6.28318531*11/16?m.MapDirection.SouthWest:a>=6.28318531*11/16&&5.105088064375>a?m.MapDirection.South:5.105088064375<=a&&a<6.28318531*
15/16?m.MapDirection.SouthEast:m.MapDirection.East},perimeterViolationArea:function(a,c){var g=0,b=0;c.left()<a.left()?g=a.left()-c.left():c.right()>a.right()&&(g=c.right()-a.right());c.top()<a.top()?b=a.top()-c.top():c.bottom()>a.bottom()&&(b=c.bottom()-a.bottom());return g*c.height()+b*c.width()},findRayFromRectangleCenterSideIntersection:function(a,c){var g=new m.Point(a.left()+a.width()/2,a.top()+a.height()/2),b=a.width()>a.height()?a.width():a.height();100>b&&(b=100);var d=new m.PolarPoint(b,
c),b=d.toPoint(),f=0!==b.x()?b.y()/b.x():0,e=0,h=0,b=[],e=g.x()+(0!==f?(a.top()-g.y())/f:0),h=a.top();e>=a.left()&&e<=a.right()&&b.push(new m.Point(e,h));e=g.x()+(0!==f?(a.bottom()-g.y())/f:0);h=a.bottom();e>=a.left()&&e<=a.right()&&b.push(new m.Point(e,h));e=a.right();h=g.y()+f*(a.right()-g.x());h>=a.top()&&h<=a.bottom()&&b.push(new m.Point(e,h));e=a.left();h=g.y()+f*(a.left()-g.x());h>=a.top()&&h<=a.bottom()&&b.push(new m.Point(e,h));f=new m.Point(1E6,1E6);e=1E6;d=d.toPoint();d.offset(g.x(),g.y());
for(var q in b)g=b[q],h=m.distancePoints(g,d),h<e&&(f=g,e=h);return f},rotateRectAroundCircle:function(a,c,g,b,d,f){b/=2;d/=2;a+=Math.cos(f)*(b+g);c+=Math.sin(f)*(d+g);return new m.toRectXY(a-b,c-d,a+b,c+d)},getBBox:function(a){if(!a)return null;var c=a.length;if(0===c)return null;for(var g=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,e=0;e<c;e++){var h=a[e],q=h.x,h=h.y;q<g&&(g=q);q>b&&(b=q);h<d&&(d=h);h>f&&(f=h)}return m.toRectXY(g,d,b,
f)},Point:function(a,c){var g=a;this.x=function(a){"undefined"!==typeof a&&(g=a);return g};var b=c;this.y=function(a){"undefined"!==typeof a&&(b=a);return b};this.offset=function(a,c){g+=a;b+=c}}};m.Point.prototype.toPolarPoint=function(a){var c=m.distancePoints(a,this);a=Math.atan2(this.y()-a.y(),this.x()-a.x());0>a&&(a=6.28318531+a);return new m.PolarPoint(c,a)};m.Point.prototype.isEqual=function(a){return this.x()===a.x()&&this.y()===a.y()};m.Point.prototype.toString=function(){return"("+this.x().toString()+
" , "+this.y().toString()+")"};m.PolarPoint=function(a,c){function g(a){if(0>a||6.28318531<a)throw"Invalid polar coordinates angle";return a}var b=a;this.radius=function(a){"undefined"!==typeof a&&(b=a);return b};var d=g(c);this.theta=function(a){"undefined"!==typeof a&&(d=g(a));return d};this.toPoint=function(){return new m.Point(b*Math.cos(d),b*Math.sin(d))}};m.PolarPoint.prototype.isEqual=function(a){return this.radius()===a.radius()&&this.theta()===a.theta()};m.PolarPoint.prototype.toString=function(){return"("+
this.radius().toString()+" , "+m.radToDeg(this.theta()).toString()+"\u00b0)"};m.Rectangle=function(a,c){var g=this,b=a,d=c;this.corner1=function(a){"undefined"!==typeof a&&(b=a);return b};this.corner2=function(a){"undefined"!==typeof a&&(d=a);return d};this.topLeft=function(){var a=b.x(),c=d.x();c<a&&(a=c);var g=b.y(),c=d.y();c<g&&(g=c);return new m.Point(a,g)};this.bottomRight=function(){var a=b.x(),c=d.x();c>a&&(a=c);var g=b.y(),c=d.y();c>g&&(g=c);return new m.Point(a,g)};this.width=function(){return Math.abs(b.x()-
d.x())};this.height=function(){return Math.abs(b.y()-d.y())};this.left=function(){var a=b.x(),c=d.x();c<a&&(a=c);return a};this.right=function(){var a=b.x(),c=d.x();c>a&&(a=c);return a};this.top=function(){var a=b.y(),c=d.y();c<a&&(a=c);return a};this.bottom=function(){var a=b.y(),c=d.y();c>a&&(a=c);return a};this.centerPoint=function(){return new m.Point(g.left()+g.width()/2,g.top()+g.height()/2)};this.square=function(){return g.width()*g.height()};this.contains=function(a){var c=g.topLeft(),b=g.bottomRight(),
d=a.x();a=a.y();return d>=c.x()&&d<=b.x()&&a>=c.y()&&a<=b.y()}};m.Rectangle.prototype.isEqual=function(a){return this.left()===a.left()&&this.top()===a.top()&&this.width()===a.width()&&this.height()===a.height()};m.Rectangle.prototype.toString=function(){return"("+this.left().toString()+","+this.top().toString()+" ; "+this.width().toString()+"x"+this.height().toString()+")"};m.vectorizeBalloon=function(a,c,g){var b=[],d=new m.Point(a.left()+a.width()/2,a.top()+a.height()/2),f=c.toPolarPoint(d),e=
m.findRayFromRectangleCenterSideIntersection(a,m.wrapAngle(f.theta(),-g/2));g=m.findRayFromRectangleCenterSideIntersection(a,m.wrapAngle(f.theta(),+g/2));b.push(new m.Point(a.left(),a.top()));b.push(new m.Point(a.right(),a.top()));b.push(new m.Point(a.right(),a.bottom()));b.push(new m.Point(a.left(),a.bottom()));b.push(e);b.push(c);b.push(g);b.sort(function(a,c){var g=a.toPolarPoint(d),b=c.toPolarPoint(d);return g.theta()>b.theta()?-1:1});return b};e.Geometry=m;e.Walkable={wSelect:function(a){var c=
this,g={getWalker:function(){var g=c.getWalker(),b;return{reset:function(){g.reset()},moveNext:function(){if(!g.moveNext())return!1;b=a(g.current());return!0},current:function(){return b}}}};WAVE.extend(g,WAVE.Walkable);return g},wSelectMany:function(a){var c=this,g={getWalker:function(){var g=c.getWalker(),b,d;return{reset:function(){for(g.reset();g.moveNext();){var c=g.current();if(null!==c){b=(a?a(c):c).getWalker();break}}},moveNext:function(){if(b&&b.moveNext())return d=b.current(),!0;for(;g.moveNext();){var c=
g.current();if(null!==c&&(b=(a?a(c):c).getWalker(),b.moveNext()))return d=b.current(),!0}return!1},current:function(){return d}}}};WAVE.extend(g,WAVE.Walkable);return g},wWhere:function(a){var c=this,g={getWalker:function(){var g=c.getWalker();return{reset:function(){g.reset()},moveNext:function(){for(;g.moveNext();)if(a(g.current()))return!0;return!1},current:function(){return g.current()}}}};WAVE.extend(g,WAVE.Walkable);return g},wAt:function(a){for(var c=this.getWalker(),g=-1;c.moveNext();)if(g++,
g===a)return c.current();return null},wFirst:function(a){for(var c=this.getWalker();c.moveNext();)if(a){if(a(c.current()))return c.current()}else return c.current();return null},wFirstIdx:function(a){for(var c=this.getWalker(),g=-1;c.moveNext();)if(g++,a(c.current()))return g;return-1},wCount:function(a){for(var c=this.getWalker(),g=0;c.moveNext();)a?a(c.current())&&g++:g++;return g},wDistinct:function(a){var c=this,g={getWalker:function(){var g=c.getWalker();return new function(){function c(b){return a?
a(b,g.current()):b===g.current()}var b=[],d=WAVE.arrayWalkable(b);this.reset=function(){g.reset();b.splice(0,b.length)};this.moveNext=function(){for(;g.moveNext();)if(-1===d.wFirstIdx(c))return b.push(g.current()),!0;return!1};this.current=function(){return g.current()}}}};WAVE.extend(g,WAVE.Walkable);return g},wConcat:function(a){var c=this,g={getWalker:function(){var g=c.getWalker(),b=null;return{reset:function(){g.reset();b=null},moveNext:function(){if(null===b){if(g.moveNext())return!0;b=a.getWalker()}return b.moveNext()},
current:function(){return null===b?g.current():b.current()}}}};WAVE.extend(g,WAVE.Walkable);return g},wExcept:function(a,c){var g=this,b={getWalker:function(){function b(a){return c?c(d.current(),a):a===d.current()}var d=g.getWalker();return{reset:function(){d.reset()},moveNext:function(){for(;d.moveNext();)if(-1===a.wFirstIdx(b))return!0;return!1},current:function(){return d.current()}}}};WAVE.extend(b,WAVE.Walkable);return b},wGroup:function(a,c){var b=this,d={getWalker:function(){return new function(){var d=
b.wDistinct(function(c,b){return a(c)===a(b)}).getWalker();this.reset=function(){d.reset()};this.moveNext=function(){return d.moveNext()};this.current=function(){return{k:a(d.current()),v:b.wWhere(function(c){return a(c)===a(d.current())}).wSelect(function(a){return c(a)})}}}}};WAVE.extend(d,WAVE.Walkable);return d},wGroupIntoObject:function(){var a={};this.wEach(function(c){a[c.k]=c.v.wToArray()});return a},wGroupIntoArray:function(a,c){var b=[];this.wEach(function(a){b.push({k:a.k,v:a.v.wToArray()})});
return b},wGroupAggregate:function(a,c){var b=this,d={getWalker:function(){var c=b.getWalker();return{reset:function(){c.reset()},moveNext:function(){return c.moveNext()},current:function(){var b=c.current();return{k:b.k,v:b.v.wAggregate(function(c,g){return a(b.k,c,g)})}}}}};WAVE.extend(d,WAVE.Walkable);return d},wOrder:function(a){var c=this.wToArray();a||(a=function(a,c){return a<c?-1:a>c?1:0});c.sort(a);return WAVE.arrayWalkable(c)},wTake:function(a){var c=this,b={getWalker:function(){var b=c.getWalker();
return new function(){var c=0;this.reset=function(){b.reset();c=0};this.moveNext=function(){if(!(b.moveNext()&&c<a))return!1;c++;return!0};this.current=function(){return b.current()}}}};WAVE.extend(b,WAVE.Walkable);return b},wTakeWhile:function(a){var c=this,b={getWalker:function(){var b=c.getWalker();return{reset:function(){b.reset()},moveNext:function(){return b.moveNext()&&a(b.current())?!0:!1},current:function(){return b.current()}}}};WAVE.extend(b,WAVE.Walkable);return b},wSkip:function(a){var c=
this,b={getWalker:function(){var b=c.getWalker();return new function(){var c=-1;this.reset=function(){b.reset();c=-1};this.moveNext=function(){for(;b.moveNext();)if(c++,c>=a)return!0;return!1};this.current=function(){return b.current()}}}};WAVE.extend(b,WAVE.Walkable);return b},wAny:function(a){var c=this.getWalker();if(!a)return c.moveNext();for(;c.moveNext();)if(a(c.current()))return!0;return!1},wAll:function(a){var c=this.getWalker();if(!a)return!c.moveNext();for(;c.moveNext();)if(!a(c.current()))return!1;
return!0},wMin:function(a){a||(a=function(a,c){return a<c});var c=this.getWalker();if(!c.moveNext())return null;for(var b=c.current();c.moveNext();)a(c.current(),b)&&(b=c.current());return b},wMax:function(a){a||(a=function(a,c){return a>c});var c=this.getWalker();if(!c.moveNext())return null;for(var b=c.current();c.moveNext();)a(c.current(),b)&&(b=c.current());return b},wAggregate:function(a,c){var b=c;this.wEach(function(c){b=a(b,c)});return b},wSum:function(a){"undefined"===typeof a&&(a=0);return this.wAggregate(function(a,
b){return a+b},a)},wEqual:function(a,c){var b=this.getWalker(),d=a.getWalker();do{var f=b.moveNext(),e=d.moveNext();if(!f&&!e)return!0;if(f!==e)return!1;f=b.current();e=d.current();if(!c){if(f!==e)return!1}else if(!c(f,e))return!1}while(1)},wToArray:function(){for(var a=this.getWalker(),c=[];a.moveNext();)c.push(a.current());return c},wEach:function(a){for(var c=this.getWalker(),b=0;c.moveNext();)a(c.current(),b++);return this},wWMA:function(a){var c=this;"undefined"===typeof a&&(a=.5);var b={getWalker:function(){var b=
c.getWalker(),g=null,d={s:-1,a:0};return{reset:function(){g=null;d={s:-1,a:0};b.reset()},moveNext:function(){if(!b.moveNext())return!1;d.s=b.current().s;var c=b.current().a;d.a=0===d.s?c:(1-a)*c+a*g;g=d.a;return!0},current:function(){return d},samplingRate:function(){return b.samplingRate?b.samplingRate():2}}}};WAVE.extend(b,WAVE.Walkable);return b},wHarmonicFrequencyFilter:function(a,c){var b=this;"undefined"===typeof a&&(a=1);"undefined"===typeof c&&(c=1);1.0001>a&&(a=1.0001);1E-4>c&&(c=1E-4);var d=
{getWalker:function(){var d=b.getWalker(),f=0,e={s:-1,a:0},t=0,h=0;return{reset:function(){h=t=f=0;e={s:-1,a:0};d.reset()},moveNext:function(){if(!d.moveNext())return!1;e.s=d.current().s;var b=d.current().a,g=b-h;h=b;t+=(g-c*f)/a;t*=.98;e.a=f+t;f=e.a;return!0},current:function(){return e},samplingRate:function(){return d.samplingRate?d.samplingRate():2}}}};WAVE.extend(d,WAVE.Walkable);return d},wConstLinearSampling:function(a){var c=this,b={getWalker:function(){a=a||1;var b=c.getWalker(),g=!1,d=null,
f=a/2,e=0,h,q,r,m=[],l={};return new function(){this.reset=function(){m.splice(0,m.length);e=0;g=!1;d=null;b.reset()};this.moveNext=function(){function c(a,b){for(var g=0;g<m.length;g++){var D=m[g].s;if(D>a&&D<=b)return!0}return!1}function D(){if(b.moveNext())return d=b.current().s,!0;g=!0;return!1}function I(a,c){for(var b=0,g=0,D=0;D<m.length;D++){var d=m[D];d.s>a&&d.s<=c&&(b+=d.a,g++)}return b/g}function k(a){for(;D();)if(b.current().s>=a){m.push(b.current());break}else m.push(b.current())}if(!e){if(!D())return!1;
m.push(b.current());h=b.current().s;q=h-f;r=h+f;k(r);l.s=e++;var B=I(-Number.MAX_VALUE,r);l.a=B;return!0}h+=a;q=h-f;r=h+f;if(g&&d<q)return!1;l.s=e++;(function(a,c){for(;1<m.length&&m[0].s<a&&m[1].s<c;)m.shift()})(q,r);if(c(q,r))return l.a=I(q,r),!0;k(r);if(c(q,r))return l.a=I(q,r),!0;var B=m[0],H=m[1],H=(H.a-B.a)/(H.s-B.s);l.a=H*h+(B.a-H*B.s);return!0};this.current=function(){return l}}}};WAVE.extend(b,WAVE.Walkable);return b},wSineGen:function(a){var c=this,b={getWalker:function(){var b=c.getWalker();
a=a||{};var g=a.f||1,d="undefined"===typeof a.a?1:a.a,f=a.d||0,e=a.r||(b.samplingRate?b.samplingRate():2),h=a.p||0;2>e&&(e=2);var q=6.28318531/e*g,r=0,l=h,k={},b=c.getWalker();return new function(){this.reset=function(){r=0;l=h;b.reset()};this.moveNext=function(){if(!b.moveNext())return!1;k.s=r++;k.a=d*Math.sin(l)+f+b.current().a;l=m.wrapAngle(l,q);return!0};this.current=function(){return k};this.samplingRate=function(){return e}}}};WAVE.extend(b,WAVE.Walkable);return b},wSawGen:function(a){var c=
this,b={getWalker:function(){var b=c.getWalker();a=a||{};var g=a.f||1,d="undefined"===typeof a.a?1:a.a,f=a.d||0,e=a.r||(b.samplingRate?b.samplingRate():2),h=a.p||0,q=a.s||.9;2>e&&(e=2);var r=1/3.14159265/q,l=1/3.14159265/(q-1),k=1-2*q/(q-1),u=6.28318531/e*g,D=0,I=h,M={},b=c.getWalker();return new function(){this.reset=function(){D=0;I=h;b.reset()};this.moveNext=function(){if(!b.moveNext())return!1;M.s=D++;M.a=d*(I<6.28318531*q?r*I+-1:l*I+k)+f+b.current().a;I=m.wrapAngle(I,u);return!0};this.current=
function(){return M};this.samplingRate=function(){return e}}}};WAVE.extend(b,WAVE.Walkable);return b},wSquareGen:function(a){var c=this,b={getWalker:function(){var b=c.getWalker();a=a||{};var g=a.f||1,d="undefined"===typeof a.a?1:a.a,f=a.d||0,e=a.r||(b.samplingRate?b.samplingRate():2),h=a.p||0,q=a.s||.9;2>e&&(e=2);var r=-2/3.14159265/(1-q),l=1-3.14159265*r*q,k=2/3.14159265/(1-q),u=-1-3.14159265*k*(1+q),D=6.28318531/e*g,I=0,M=h,B={},b=c.getWalker();return new function(){this.reset=function(){I=0;M=
h;b.reset()};this.moveNext=function(){if(!b.moveNext())return!1;B.s=I++;B.a=d*(3.14159265>M?M<3.14159265*q?1:r*M+l:M<3.14159265+3.14159265*q?-1:k*M+u)+f+b.current().a;M=m.wrapAngle(M,D);return!0};this.current=function(){return B};this.samplingRate=function(){return e}}}};WAVE.extend(b,WAVE.Walkable);return b},wRandomGen:function(a){var c=this,b={getWalker:function(){var b=c.getWalker();a=a||{};var g="undefined"===typeof a.a?1:a.a,d=a.r||(c.samplingRate?c.samplingRate():2);2>d&&(d=2);var f=0,e={},
b=c.getWalker();return new function(){this.reset=function(){b.reset();f=0};this.moveNext=function(){if(!b.moveNext())return!1;e.s=f++;e.a=b.current().a+2*g*(Math.random()-.5);return!0};this.current=function(){return e};this.samplingRate=function(){return d}}}};WAVE.extend(b,WAVE.Walkable);return b}};e.signalConstSrc=function(a){function c(a){var c=a.a||0,b=a.qty,g=a.r||2;2>g&&(g=2);var d=0,f={};this.reset=function(){d=0};this.moveNext=function(){if(b&&d>=b)return!1;f.s=d;f.a=c;d++;return!0};this.current=
function(){return f};this.samplingRate=function(){return g}}a=a||{};var b={getWalker:function(){return new c(a)}};WAVE.extend(b,WAVE.Walkable);return b};e.arrayWalkable=function(a){var c=function(){var c=-1;this.reset=function(){c=-1};this.moveNext=function(){return++c<a.length};this.current=function(){return 0>c||c>=a.length?null:a[c]}},b={getWalker:function(){return new c},OriginalArray:a};WAVE.extend(b,WAVE.Walkable);return b};e.groupWalkable=function(a){var c=function(){var c=-1,b=null;this.reset=
function(){c=-1;b=null};this.moveNext=function(){if(++c<a.length){var g=a[c];b={k:g.k,v:WAVE.arrayWalkable(g.v)};return!0}return!1};this.current=function(){return b}},b={getWalker:function(){return new c},OriginalArray:a};WAVE.extend(b,WAVE.Walkable);return b};e.SVG=function(){var a={createCircle:function(c,b,d,f){f=f||{};f.cx=c;f.cy=b;f.r=d;return a.createShape("circle",f)},createRect:function(c,b,d,f,e){e=e||{};e.x=c;e.y=b;e.width=d;e.height=f;return a.createShape("rect",e)},createLine:function(c,
b,d,f,e){e=e||{};e.x1=c;e.y1=b;e.x2=d;e.y2=f;return a.createShape("line",e)},createPath:function(c){return a.createShape("path",c)},createText:function(c,b,d,f){f=f||{};f.x=b;f.y=d;b=a.createShape("text",f);c=document.createTextNode(c);b.appendChild(c);return b},createGroup:function(c){return a.createShape("g",c)},createMarker:function(a,b){var d=this.createShape("marker",a),f;for(f in b)d.appendChild(b[f]);return d},createDefs:function(a){var b=this.createShape("defs"),d;for(d in a)b.appendChild(a[d]);
return b},createUse:function(c,b,d){b=a.createShape("use",{x:b,y:d});b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+c);return b},createClipPath:function(c,b,d){d=d||{};d.id=c;c=a.createShape("clipPath",d);for(var f in b)c.appendChild(b[f]);return c},createShape:function(a,b){var d=document.createElementNS("http://www.w3.org/2000/svg",a),f;for(f in b)try{d.setAttribute(f,b[f])}catch(e){console.error(e)}return d}};return a}();e.genRndKey=function(a,c){var b="";e.intValidPositive(a)||
(a=8);for(e.strEmpty(c)&&(c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ");b.length<a;)b+=c.charAt(e.rnd(c.length));return b};var w={};e.genAutoincKey=function(a,c){var b=0;e.strEmpty(a)&&(a="Unspecified");e.intValidPositive(c)||(c=1);a in w&&(b=w[a]);var d=b;w[a]=b+c;return d};e.rnd=function(){var a=0,c=100;1===arguments.length?c=arguments[0]:2===arguments.length&&(a=arguments[0],c=arguments[1]);return a+Math.floor(Math.random()*(c-a+1))};return e}();
WAVE.RecordModel=function(){var n={FIELDDEF_DEFAULTS:{Description:"",Placeholder:"",Type:"string",Key:!1,Kind:"text",Case:"asis",Stored:!0,Required:!1,Applicable:!0,Enabled:!0,ReadOnly:!1,Visible:!0,Password:!1,MinValue:null,MaxValue:null,MinSize:0,Size:0,ControlType:"auto",ScriptType:null,DefaultValue:null,Hint:null,Marked:!1,LookupDict:{},Lookup:{},DeferValidation:!1,Config:null},EVT_VALIDATION_DEFINITION_CHANGE:"validation-definition-change",EVT_INTERACTION_CHANGE:"interaction-change",EVT_DATA_CHANGE:"data-change",
EVT_RECORD_LOAD:"record-load",EVT_VALIDATE:"validate",EVT_VALIDATED:"validated",EVT_FIELD_LOAD:"field-load",EVT_FIELD_RESET:"field-reset",EVT_FIELD_DROP:"field-drop",EVT_PHASE_BEFORE:"before",EVT_PHASE_AFTER:"after",CTL_TP_AUTO:"auto",CTL_TP_CHECK:"check",CTL_TP_RADIO:"radio",CTL_TP_COMBO:"combo",CTL_TP_TEXT:"text",CTL_TP_NLS:"nls",CTL_TP_SCRIPT:"script",CTL_TP_TEXTAREA:"textarea",CTL_TP_HIDDEN:"hidden",CTL_TP_PUZZLE:"puzzle",CTL_TP_ERROR_REC:"error-rec",CTL_TP_ERROR_SUMMARY:"error-summary",CTL_TP_CHAIN_SELECTOR:"chain-selector",
KIND_TEXT:"text",KIND_SCREENNAME:"screenname",KIND_COLOR:"color",KIND_DATE:"date",KIND_DATETIME:"datetime",KIND_DATETIMELOCAL:"datetime-local",KIND_EMAIL:"email",KIND_MONTH:"month",KIND_NUMBER:"number",KIND_RANGE:"range",KIND_SEARCH:"search",KIND_TEL:"tel",KIND_TIME:"time",KIND_URL:"url",KIND_WEEK:"week",CASE_ASIS:"asis",CASE_UPPER:"upper",CASE_LOWER:"lower",CASE_CAPS:"caps",CASE_CAPSNORM:"capsnorm",DATA_RECVIEW_ID_ATTR:"data-wv-rid",DATA_FIELD_NAME_ATTR:"data-wv-fname",DATA_CTL_TP_ATTR:"data-wv-ctl"},
k=[];n.records=function(){return WAVE.arrayShallowCopy(k)};n.isDirty=function(){for(var n in k)if(k[n].isGUIModified())return!0;return!1};n.Record=function(x,z){if(!x)throw"Record.ctor(need id+fieldFunc or initObject)";var e=this,y=!1;WAVE.extend(e,WAVE.EventManager);this.eventInvoke(n.EVT_RECORD_LOAD,n.EVT_PHASE_BEFORE);var d=null,r=null,b="unspecified",f="",q="";WAVE.isObject(x)&&x.fields?(d=x.ID,r=x.ISOLang,x.__FormMode&&(b=x.__FormMode),x.__CSRFToken&&(f=x.__CSRFToken),x.__Roundtrip&&(q=x.__Roundtrip)):
(d=x.toString(),x=null);var h=WAVE.strEmpty(d)?WAVE.genRndKey(16):d,l=WAVE.strEmpty(r)?"eng":r,u=[],m=!1,w=null;this.ID=function(){return h};this.ISOLang=function(){return l};this.formMode=function(){return b};this.csrfToken=function(){return f};this.roundtrip=function(){return q};this.loaded=function(){return y};this.fields=function(){return WAVE.arrayShallowCopy(u)};this.data=function(a,g){var d={},e;for(e in u){var h=u[e];a&&!h.isModified()&&!h.isGUIModified()||!g&&!h.stored()||(d[h.name()]=h.value())}WAVE.strEmpty(b)||
"unspecified"===b||(d.__FormMode=b);WAVE.strEmpty(f)||(d.__CSRFToken=f);WAVE.strEmpty(q)||(d.__Roundtrip=q);return d};this.fieldByName=function(a){if(WAVE.strEmpty(a))return null;for(var b in u){var d=u[b];if(WAVE.strSame(d.name(),a))return d}return null};this.allValidationErrors=function(){var a=[];null!==w&&a.push(w);for(var b in u){var d=u[b].validationError();null!==d&&a.push(d)}return a};this.allValidationErrorStrings=function(){var a="",b=this.allValidationErrors(),d;for(d in b)a+=b[d].toString()+
"\n";return a};this.validate=function(){m=!1;w=null;var a=m=!0,b;for(b in u)u[b].validate()||(a=!1);if(a)try{e.eventInvoke(n.EVT_VALIDATE)}catch(d){w=d,a=!1}e.eventInvoke(n.EVT_VALIDATED);return a};this.validated=function(){return m};this.validationError=function(){return w};this.valid=function(){return m&&null===w&&this.fieldsValid()};this.setExternalValidationError=function(a,b){WAVE.strEmpty(b)||(w=b,m=!1)};this.fieldsValidated=function(){for(var a in u)if(!u[a].validated())return!1;return!0};
this.fieldsValid=function(){for(var a in u)if(!u[a].valid())return!1;return!0};this.isModified=function(){for(var a in u)if(u[a].isModified())return!0;return!1};this.isGUIModified=function(){for(var a in u)if(u[a].isGUIModified())return!0;return!1};this.resetModified=function(){for(var a in u){var b=u[a];b.resetModified();b.resetGUIModified()}return!1};this.resetSchema=function(){for(var a in u)u[a].resetSchema()};this.applyDefaultValue=function(a){for(var b in u)u[b].applyDefaultValue(a)};this.latchAllEvents=
function(a){this.eventInvocationSuspendCount+=a;for(var b in u)u[b].eventInvocationSuspendCount+=a};this.resetRecord=function(a){a&&e.latchAllEvents(1);try{m=!1,w=null,this.resetSchema(),this.applyDefaultValue(!0),this.resetModified()}finally{a&&e.latchAllEvents(-1)}for(var b in u)a=u[b],a.eventInvoke(n.EVT_FIELD_RESET,a)};this.Field=function(a){function b(){m=!1;w=null;z=!1;N=null}function d(a,b){e.eventInvoke(n.EVT_VALIDATION_DEFINITION_CHANGE,q,a,b);q.eventInvoke(n.EVT_VALIDATION_DEFINITION_CHANGE,
a,b)}function f(a,b){e.eventInvoke(n.EVT_INTERACTION_CHANGE,q,a,b);q.eventInvoke(n.EVT_INTERACTION_CHANGE,a,b)}var h=!1;if(!WAVE.isObject(a))throw"Field.ctor(fieldDef must be a map)";if(WAVE.strEmpty(a.Name))throw"Field def must have a name";if(WAVE.strEmpty(a.Type))throw"Field def must have a type";a.Key=WAVE.strAsBool(a.Key,n.FIELDDEF_DEFAULTS.Key);a.Stored=WAVE.strAsBool(a.Stored,n.FIELDDEF_DEFAULTS.Stored);a.Required=WAVE.strAsBool(a.Required,n.FIELDDEF_DEFAULTS.Required);a.Applicable=WAVE.strAsBool(a.Applicable,
n.FIELDDEF_DEFAULTS.Applicable);a.Enabled=WAVE.strAsBool(a.Enabled,n.FIELDDEF_DEFAULTS.Enabled);a.ReadOnly=WAVE.strAsBool(a.ReadOnly,n.FIELDDEF_DEFAULTS.ReadOnly);a.Visible=WAVE.strAsBool(a.Visible,n.FIELDDEF_DEFAULTS.Visible);a.Password=WAVE.strAsBool(a.Password,n.FIELDDEF_DEFAULTS.Password);a.Marked=WAVE.strAsBool(a.Marked,n.FIELDDEF_DEFAULTS.Marked);a.DeferValidation=WAVE.strAsBool(a.DeferValidation,n.FIELDDEF_DEFAULTS.DeferValidation);var q=this;WAVE.extend(q,WAVE.EventManager);u.push(q);var r=
"fld"+a.Name;e[r]=q;e.eventInvoke(n.EVT_FIELD_LOAD,q,n.EVT_PHASE_BEFORE);WAVE.propStrAsObject(a,"LookupDict");WAVE.propStrAsObject(a,"Lookup");var l=WAVE.clone(a);WAVE.extend(l,n.FIELDDEF_DEFAULTS,!0);var k=null,x=!1,y=!1,z=!1,N=null;this.record=function(){return e};this.loaded=function(){return h};this.drop=function(){if(!e[r])return!1;this.eventInvoke(n.EVT_FIELD_DROP,n.EVT_PHASE_BEFORE);e.eventInvoke(n.EVT_FIELD_DROP,q,n.EVT_PHASE_BEFORE);WAVE.arrayDelete(u,this);delete e[r];e.eventInvoke(n.EVT_FIELD_DROP,
q,n.EVT_PHASE_AFTER);this.eventInvoke(n.EVT_FIELD_DROP,n.EVT_PHASE_AFTER);return!0};this.schemaDef=function(){return a};this.name=function(){return l.Name};this.type=function(){return l.Type};this.isTypeLogical=function(){return WAVE.strOneOf(l.Type,["bool","boolean","logical"])};this.isLookupDict=function(){return 0<Object.keys(l.LookupDict).length};this.key=function(){return l.Key};this.stored=function(){return l.Stored};this.about=function(){var a=l.Description;WAVE.strEmpty(a)&&(a=l.Name);return a};
this.inferControlType=function(){return this.isTypeLogical()?n.CTL_TP_CHECK:this.isLookupDict()?4<Object.keys(l.LookupDict).length?n.CTL_TP_COMBO:n.CTL_TP_RADIO:64<l.Size?n.CTL_TP_TEXTAREA:n.CTL_TP_TEXT};this.getOrInferControlType=function(){var a=l.ControlType;if(WAVE.strEmpty(a)||WAVE.strOneOf(a,[n.CTL_TP_AUTO,"automatic","infer"]))a=this.inferControlType();return a};this.resetSchema=function(){l=WAVE.clone(a);WAVE.extend(l,n.FIELDDEF_DEFAULTS,!0);b();d(null,null);f(null,null)};this.validate=function(){function a(b,
c){return WAVE.strTemplate(WAVE.strLocalize(e.ISOLang(),"RMField","error",b),c)}z=!0;N=null;try{if(l.Required&&(null===k||WAVE.strEmpty(k.toString())))throw a("Field '@f@' must have a value",{f:this.about()});if(null!==k&&!WAVE.strEmpty(k.toString())){var b=l.MinValue;if(null!==b)try{if(k<b)throw 1;}catch(c){throw a("Field '@f@' value can not be less than '@b@'",{f:this.about(),b:b});}var d=l.MaxValue;if(null!==d)try{if(k>d)throw 1;}catch(c){throw a("Field '@f@' value can not be greater than '@b@'",
{f:this.about(),b:d});}var g=l.Size;if(null!==g&&0<g&&k.toString().length>g)throw a("Field '@f@' value can not be longer than @b@ characters",{f:this.about(),b:g});g=l.MinSize;if(null!==g&&0<g&&k.toString().length<g)throw a("Field '@f@' value can not be shorter than @b@ characters",{f:this.about(),b:g});var f=Object.keys(l.LookupDict),h=WAVE.isSimpleKeyStringMap(l.LookupDict);if(0<f.length&&h){var p=WAVE.convertScalarType(!1,k,"string","<unconvertible>");if(!WAVE.strOneOf(p,f))throw a("Field '@f@' value '@v@' is not allowed",
{f:this.about(),v:p});}if(l.Kind===n.KIND_EMAIL&&!WAVE.strIsEMail(k))throw a("Field '@f@' must be a valid e-mail address",{f:this.about()});if(l.Kind===n.KIND_SCREENNAME&&!WAVE.strIsScreenName(k))throw a("Field '@f@' must start from letter and contain only letters or digits separated by single '.' or '-' or '_'",{f:this.about()});}q.eventInvoke(n.EVT_VALIDATE)}catch(c){N=c}q.eventInvoke(n.EVT_VALIDATED);return null===N};this.validationError=function(){return N};this.setExternalValidationError=function(a,
b){WAVE.strEmpty(b)||(N=b,z=!1)};this.required=function(a){if("undefined"===typeof a||a===l.Required)return l.Required;l.Required=a;b();d("required",a)};this.value=function(a,c){if("undefined"===typeof a)return k;var d=k,f=WAVE.convertScalarType(!0,a,l.Type,l.DefaultValue),h=WAVE.isSame(d,f);if(c)var p=f,f=this.preProcessValueFromGUI(f),h=h&&WAVE.isSame(p,f);if(h)return k;e.eventInvoke(n.EVT_DATA_CHANGE,n.EVT_PHASE_BEFORE,q,d,f);this.eventInvoke(n.EVT_DATA_CHANGE,n.EVT_PHASE_BEFORE,d,f);k=f;x=!0;
c&&(y=!0);l.DeferValidation?b():this.validate();this.eventInvoke(n.EVT_DATA_CHANGE,n.EVT_PHASE_AFTER,d,f);e.eventInvoke(n.EVT_DATA_CHANGE,n.EVT_PHASE_AFTER,q,d,f);return k};this.preProcessValueFromGUI=function(a){if(null===a)return null;"string"===typeof a&&(a=WAVE.strTrim(a),l.Kind===n.KIND_TEL&&(a=WAVE.strNormalizeUSPhone(a)),l.Case===n.CASE_UPPER?a=a.toUpperCase():l.Case===n.CASE_LOWER?a=a.toLowerCase():l.Case===n.CASE_CAPS?a=WAVE.strCaps(a,!1):l.Case===n.CASE_CAPSNORM&&(a=WAVE.strCaps(a,!0)));
return a};this.isNull=function(){return null===k};this.displayValue=function(){return null===k?"":WAVE.isDateType(l.Type)?l.Kind===n.KIND_DATE?WAVE.toUSDateString(k):WAVE.toUSDateTimeString(k):k.toString()};this.setGUIValue=function(a){this.value(a,!0)};this.applyDefaultValue=function(a){(a||this.isNull())&&this.value(l.DefaultValue);return k};this.valid=function(){return null===N};this.validated=function(){return z};this.validationError=function(){return N};this.isModified=function(){return x};this.resetModified=
function(){var a=x;x=!1;f("modified",!1);return a};this.isGUIModified=function(){return y};this.resetGUIModified=function(){var a=y;y=!1;f("guimodified",!1);return a};this.isEnabled=function(){return this.enabled()&&this.applicable()};this.kind=function(a){if("undefined"===typeof a||a===l.Kind)return l.Kind;l.Kind=a;f("kind",a)};this.case=function(a){if("undefined"===typeof a||a===l.Case)return l.Case;l.Case=a;WAVE.isStringType(l.Type)&&this.value(k,!1)};this.applicable=function(a){if("undefined"===
typeof a||a===l.Applicable)return l.Applicable;l.Applicable=a;f("applicable",a)};this.enabled=function(a){if("undefined"===typeof a||a===l.Enabled)return l.Enabled;l.Enabled=a;f("enabled",a)};this.readonly=function(a){if("undefined"===typeof a||a===l.ReadOnly)return l.ReadOnly;l.ReadOnly=a;f("readonly",a)};this.visible=function(a){if("undefined"===typeof a||a===l.Visible)return l.Visible;l.Visible=a;f("visible",a)};this.password=function(a){if("undefined"===typeof a||a===l.Password)return l.Password;
l.Password=a;f("password",a)};this.deferValidation=function(a){if("undefined"===typeof a||a===l.DeferValidation)return l.DeferValidation;l.DeferValidation=a;b();d("defervalidation",a)};this.minValue=function(a){if("undefined"===typeof a||a===l.MinValue)return l.MinValue;l.MinValue=a;b();d("minvalue",a)};this.maxValue=function(a){if("undefined"===typeof a||a===l.MaxValue)return l.MaxValue;l.MaxValue=a;b();d("maxvalue",a)};this.minSize=function(a){if("undefined"===typeof a||a===l.MinSize)return l.MinSize;
l.MinSize=a;b();d("minsize",a)};this.size=function(a){if("undefined"===typeof a||a===l.Size)return l.Size;l.Size=a;b();d("size",a)};this.controlType=function(a){if("undefined"===typeof a||a===l.ControlType)return l.ControlType;l.ControlType=a;f("controltype",a)};this.scriptType=function(a){if("undefined"===typeof a||a===l.ScriptType)return l.ScriptType;l.ScriptType=a;f("scripttype",a)};this.defaultValue=function(a){if("undefined"===typeof a||a===l.DefaultValue)return l.DefaultValue;l.DefaultValue=
a;b();d("defaultvalue",a)};this.lookupDict=function(a){if("undefined"===typeof a)return l.LookupDict;null===a&&(a={});if(WAVE.isSame(l.DefaultValue,a))return l.LookupDict;l.LookupDict=a;b();d("lookupDict",a)};this.hint=function(a){if("undefined"===typeof a||a===l.Hint)return l.Hint;l.Hint=a;f("hint",a)};this.marked=function(a){if("undefined"===typeof a||a===l.Marked)return l.Marked;l.Marked=a;f("marked",a)};this.description=function(a){if("undefined"===typeof a||a===l.Description)return l.Description;
l.Description=a;f("description",a)};this.placeholder=function(a){if("undefined"===typeof a||a===l.Placeholder)return l.Placeholder;l.Placeholder=a;f("placeholder",a)};this.config=function(a){if("undefined"===typeof a||a===l.Config)return l.Config;if(!WAVE.isObject(a))throw"RecordView.config(val: must be object)";l.Config=a;b();d("config",null);f("config",null)};this.toString=function(){return"["+this.type()+"]Field("+this.name()+" = '"+this.value()+"')"};h=!0;e.eventInvoke(n.EVT_FIELD_LOAD,q,n.EVT_PHASE_AFTER)};
if(x){for(var a in x.fields)d=x.fields[a],r=new this.Field(d.def),d.hasOwnProperty("val")&&r.value(d.val),d.hasOwnProperty("errorText")&&r.setExternalValidationError(WAVE.strDefault(d.error),d.errorText),r.resetModified();x.hasOwnProperty("errorText")&&this.setExternalValidationError(WAVE.strDefault(x.error),x.errorText)}else WAVE.isFunction(z)&&z.apply(e);y=!0;k.push(this);this.eventInvoke(n.EVT_RECORD_LOAD,n.EVT_PHASE_AFTER)};n.Record.prototype.toString=function(){return"Record["+this.ID()+"]"};
n.RecordView=function(k,z,e,y){if(WAVE.strEmpty(k))throw"RecordView.ctor(id: must specify)";if(!WAVE.isObject(z))throw"RecordView.ctor(rec: must be Record)";WAVE.isObject(e)||(e=WAVE.RecordModel.GUI);var d=e,r=this,b=[],f=null;this.ID=function(){return k};this.record=function(){return z};this.gui=function(){return d};this.rootElement=function(){return f};this.destroyViews=function(){for(;0<b.length;)b[0].destroy()};var q=null;this.buildViews=function(){f=null;this.destroyViews();for(var b=document.getElementsByTagName("form"),
d=0,e=b.length;d<e;d++){var r=b[d],w=r.getAttribute(n.DATA_RECVIEW_ID_ATTR);if(WAVE.strSame(k,w)){f=r;break}}if(null===f)for(b=document.getElementsByTagName("div"),d=0,e=b.length;d<e;d++)if(r=b[d],w=r.getAttribute(n.DATA_RECVIEW_ID_ATTR),WAVE.strSame(k,w)){f=r;break}if(null===f)throw"No 'form' or 'div' element could be found with record binding '"+n.DATA_RECVIEW_ID_ATTR+"' annotation";b=WAVE.arrayShallowCopy(f.getElementsByTagName("div"));d=0;for(e=b.length;d<e;d++)r=b[d],w=r.getAttribute(n.DATA_FIELD_NAME_ATTR),
WAVE.strEmpty(w)||("#"===w?new this.FieldView(r,null):(w=z.fieldByName(w),null!==w&&new this.FieldView(r,w)));WAVE.strEmpty(z.formMode())&&WAVE.strEmpty(z.csrfToken())&&WAVE.strEmpty(z.roundtrip())||(null===q&&(q=document.createElement("div"),q.style.display="none",f.appendChild(q)),b="",WAVE.strEmpty(z.formMode())||(b+="<input type='hidden' name='__FormMode' value='"+z.formMode()+"'>"),WAVE.strEmpty(z.csrfToken())||(b+="<input type='hidden' name='__CSRFToken' value='"+z.csrfToken()+"'>"),WAVE.strEmpty(z.roundtrip())||
(b+="<input type='hidden' name='__Roundtrip' value='"+z.roundtrip()+"'>"),q.innerHTML=b)};this.views=function(){return WAVE.arrayShallowCopy(b)};this.FieldView=function(f,e){if(!f)throw"FieldView.ctor(div: element must be passed)";if(null!==e&&!WAVE.isObject(e))throw"FieldView.ctor(fld: must be Record.Field)";var q=this;b.push(q);null!==e?e.eventSinkBind(this):z.eventSinkBind(this);var k="";null!==e&&(k="fld"+e.name(),r[k]=q);this.eventNotify=function(b,a,c){WAVE.strOneOf(b,[WAVE.RecordModel.EVT_DATA_CHANGE,
WAVE.RecordModel.EVT_INTERACTION_CHANGE,WAVE.RecordModel.EVT_VALIDATION_DEFINITION_CHANGE,WAVE.RecordModel.EVT_VALIDATED])&&("undefined"===typeof c&&(c=""),c!==WAVE.RecordModel.EVT_PHASE_BEFORE&&(null!==e&&(f.style.visibility=e.visible()?"visible":"hidden"),d.eventNotifyFieldView(q,b,a,c)))};this.destroy=function(){f.innerHTML="";null!==e?e.eventSinkUnbind(this):z.eventSinkUnbind(this);WAVE.arrayDelete(b,this);null!==e&&delete r[k]};this.record=function(){return z};this.recView=function(){return r};
this.field=function(){return e};this.DIV=function(){return f};this.getOrInferControlType=function(){var b=f.getAttribute(n.DATA_CTL_TP_ATTR);return WAVE.strEmpty(b)?null===e?WAVE.RecordModel.CTL_TP_ERROR_REC:e.getOrInferControlType():b};(null===e||e.visible())&&d.buildFieldViewAnew(this)};y||this.buildViews()};return n}();
WAVE.Pay=function(){var n={Providers:{},Brands:{VISA:"Visa",MASTER_CARD:"MasterCard",AMERICAN_EXPRESS:"AmEx",DISCOVER:"Discover",JCB:"JCB",DINERS_CLUB:"Diners Club",UNKNOWN:"Card"},ErrorTypes:{OK:0,API_CONNECTION_ERROR:1,API_ERROR:2,AUTHENTICATION_ERROR:3,CARD_ERROR:4,INVALID_REQUEST_ERROR:5,RATE_LIMIT_ERROR:6,GENERAL_ERROR:100},CardErrors:{OK:0,INVALID_NUMBER:1,INVALID_EXPIRY_MONTH:2,INVALID_EXPIRY_YEAR:3,INVALID_CVC:4,INCORRECT_NUMBER:5,EXPIRED_CARD:6,INCORRECT_CVC:7,INCORRECT_ZIP:8,CARD_DECLINED:9,
MISSING:10,PROCESSING_ERROR:11,GENERAL_ERROR:100},Facade:function(k,n,z){if(WAVE.strEmpty(k))throw new WAVE.Pay.RequiredArgumentError("Facade.ctor()","providerName");if(WAVE.strEmpty(n))throw new WAVE.Pay.RequiredArgumentError("Facade.ctor()","provider");if(WAVE.strEmpty(z))throw new WAVE.Pay.RequiredArgumentError("Facade.ctor()","init");var e=this;this.providerName=function(){return k};WAVE.extend(e,WAVE.EventManager);try{n.initialize(z)}catch(y){throw new WAVE.Pay.ProviderInitError(y);}this.tokenize=
function(k,d){if(WAVE.strEmpty(k))throw new WAVE.Pay.RequiredArgumentError("tokenize()","paymentData");if(WAVE.strEmpty(d))throw new WAVE.Pay.RequiredArgumentError("tokenize()","callback");try{n.tokenize(e,k,d)}catch(r){throw new WAVE.Pay.TokenizeError(r);}}},RequiredArgumentError:function(k,n,z){this.name="RequiredArgumentError";this.message=k+" requires argument '"+n+"'";this.inner=z}};n.RequiredArgumentError.prototype=Error.prototype;n.ProviderInitError=function(k){this.name="ProviderInitError";
var n="Critical error during provider setup";"undefined"===typeof k||WAVE.strEmpty(k.message)||(n+=": "+k.message);this.message=n;this.inner=k};n.ProviderInitError.prototype=Error.prototype;n.TokenizeError=function(k){this.name="TokenizeError";var n="Critical error during tokenization";"undefined"===typeof k||WAVE.strEmpty(k.message)||(n+=": "+k.message);this.message=n;this.inner=k};n.TokenizeError.prototype=Error.prototype;n.CardValidationError=function(k){this.name="CardValidationError";var n="Card is invalid";
"undefined"===typeof k||WAVE.strEmpty(k.message)||(n+=": "+k.message);this.message=n;this.inner=k};n.CardValidationError.prototype=Error.prototype;n.validateCardNumber=function(k){if(WAVE.strEmpty(k))return!1;k=k.replace(/\s+|-/g,"");return 10<=k.length&&16>=k.length&&n.checkLuhn(k)};n.checkLuhn=function(k){if(WAVE.strEmpty(k))return!1;var n=0,z=0,e=!1;k=k.replace(/\D/g,"");for(var y=k.length-1;0<=y;y--)z=k.charAt(y),z=parseInt(z,10),e&&9<(z*=2)&&(z-=9),n+=z,e=!e;return 0===n%10};n.validateCVC=function(k){return WAVE.strEmpty(k)?
!1:3<=k.length&&4>=k.length&&/^\d+$/.test(k)};n.validateExpirationDate=function(k,n){if(WAVE.strEmpty(k)||WAVE.strEmpty(n))return!1;2===n.length&&(n="20"+n);return/^\d+$/.test(k)&&/^\d+$/.test(n)&&1<=k&&12>=k&&4===n.length&&2015<n};n.getCardBrand=function(k){return WAVE.strEmpty(k)||!/^\d{2}/.test(k)?n.Brands.UNKNOWN:/^4/.test(k)?n.Brands.VISA:/^5[1-5]/.test(k)?n.Brands.MASTER_CARD:/^3[47]/.test(k)?n.Brands.AMERICAN_EXPRESS:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/.test(k)?
n.Brands.DISCOVER:/^35(2[89]|[3-8][0-9])/.test(k)?n.Brands.JCB:/^3[0689]/.test(k)?n.Brands.DINERS_CLUB:n.Brands.UNKNOWN};return n}();WAVE.GUI=function(){function n(a){if(0<r.length){var b=r[r.length-1];a=a.target;"undefined"===typeof a||null===a||WAVE.isParentOf(b,a)||(b.tabIndex=0,b.focus())}}function k(){m||WAVE.Platform.Mobile||(window.addEventListener("focus",n,!0),f=window.pageYOffset||document.documentElement.scrollTop,l=document.body.style.top,q=document.body.style.position,h=document.body.style.overflowY,u=document.body.style.paddingRight,document.body.parentElement.offsetHeight>window.innerHeight&&(m=!0,document.body.style.position=
"fixed",document.body.style.paddingRight=u+WAVE.getScrollBarWidth()+"px",document.body.style.overflow="hidden",document.body.style.top=-f+"px"))}function x(){m&&!WAVE.Platform.Mobile&&(window.removeEventListener("focus",n,!0),document.body.style.top=l,document.body.style.position=q,document.body.style.overflowY=h,document.body.style.paddingRight=u,document.documentElement.scrollTop=document.body.scrollTop=f,m=!1)}function z(a,b){if(a===b)return!0;if("undefined"===typeof a||"undefined"===typeof b)return!1;
WAVE.isObject(a)||(a={url:a});WAVE.isObject(b)||(b={url:b});if(a.url===b.url)if(WAVE.has(a,"clip")){if(WAVE.has(b,"clip"))return a.left|0===b.left|0&&a.right|0===b.right|0&&a.bottom|0===b.bottom|0&&a.top|0===b.top|0}else if(!WAVE.has(b,"clip"))return!0;return!1}function e(a,b,c,d){WAVE.isObject(a)||(a={url:a});a.url=WAVE.strDefault(function(a){return 0===a.indexOf("$")&&WAVE.isObject(d)?d[a.substr(1)]:a}(WAVE.strDefault(a.url)));var g=new Image;g.onerror=function(){a.error=!0;"undefined"!==typeof c&&
c.apply(g,arguments)};if(WAVE.has(a,"clip")){var f=a.clip,e=f.left|0,h=f.top|0,q=(f.right|0)-e,l=(f.bottom|0)-h,p=document.createElement("canvas");p.width=q;p.height=l;g.onload=function(){a.load=!0;a.width=q;a.height=l;p.getContext("2d").drawImage(this,e,h,q,l,0,0,q,l);"undefined"!==typeof b&&b.apply(p,arguments);delete a.img};a.element=p}else g.onload=function(){a.load=!0;a.width=this.width;a.height=this.height;"undefined"!==typeof b&&b.apply(g,arguments)},a.element=g;g.src=a.url;a.free=function(){a.element.parentNode&&
a.element.parentNode.removeChild(a.element);delete a.element;delete a.error;delete a.load;delete a.img;delete a.width;delete a.height;delete a.free};return a}function y(a,b,c,d,g){function f(g,e){function h(b){b.preventDefault();var d=b.pageX;b=b.pageY;var f=g-d,q=e-b;"undefined"!==typeof c&&c.call(a,g,e);a.scrollLeft+=f;a.scrollTop+=q;g=d;e=b}function q(b){b.preventDefault();var d=b.touches;b=d[0].pageX;var d=d[0].pageY,f=g-b,h=e-d;"undefined"!==typeof c&&c.call(a,g,e);a.scrollLeft+=f;a.scrollTop+=
h;g=b;e=d}function l(b){"undefined"!==typeof d&&d.call(a,b.pageX,b.pageY);r()}function p(b){"undefined"!==typeof d&&d.call(a,g,e);r()}function r(){document.removeEventListener("mousemove",h,!1);document.removeEventListener("touchmove",q,!1);document.removeEventListener("mouseup",l,!1);document.removeEventListener("touchend",p,!1)}"undefined"!==typeof b&&b.call(a,g,e);document.addEventListener("mousemove",h,!1);document.addEventListener("touchmove",q,!1);document.addEventListener("mouseup",l,!1);document.addEventListener("touchend",
p,!1)}a.addEventListener("mousedown",function(a){0===a.button&&(g&&a.preventDefault(),f(a.pageX,a.pageY))},!1);a.addEventListener("touchstart",function(a){var b=a.touches;1===b.length&&(g&&a.preventDefault(),f(b[0].pageX,b[0].pageY))},!1)}var d={TUNDEFINED:"undefined",CLS_TOAST:"wvToast",CLS_CURTAIN:"wvCurtain",CLS_DIALOG_BASE:"wvDialogBase",CLS_DIALOG_CONTENT:"wvDialogContent",CLS_DIALOG_HEADER:"wvDialogHeader",CLS_DIALOG_BODY:"wvDialogBody",CLS_DIALOG_FOOTER:"wvDialogFooter",CLS_DIALOG_CONFIRM_FOOTER:"wvConfirmDialogFooter",
CLS_DIALOG_CONFIRM_BUTTON:"wvConfirmDialogButton",DLG_UNDEFINED:"",DLG_CANCEL:"cancel",DLG_OK:"ok",DLG_YES:"yes",DLG_NO:"no",EVT_DIALOG_CLOSE:"dlg-close",EVT_PUZZLE_KEYPAD_CHANGE:"puzzle-change",CLS_TREE_NODE:"wvTreeNode",CLS_TREE_NODE_OWN_SELECTED:"wvTreeNodeOwnSelected",CLS_TREE_NODE_BUTTON_EXPANDED:"wvTreeNodeButtonExpanded",CLS_TREE_NODE_BUTTON_COLLAPSED:"wvTreeNodeButtonCollapsed",CLS_TREE_NODE_CONTENT:"wvTreeNodeContent",CLS_TREE_NODE_OWN:"wvTreeNodeOwn",CLS_TREE_NODE_CHILDREN:"wvTreeNodeChildren",
EVT_PHASE_BEFORE:"before",EVT_PHASE_AFTER:"after",EVT_TREE_NODE_ADD:"tree-node-add",EVT_TREE_NODE_REMOVE:"tree-node-remove",EVT_TREE_NODE_CONTENT:"tree-node-content",EVT_TREE_NODE_DATA:"tree-node-data",EVT_TREE_NODE_EXPANSION:"tree-node-expansion",EVT_TREE_NODE_SELECTION:"tree-node-selection",EVT_RULER_MOUSE_MOVE:"ruler-mouse-move",EVT_RULER_MOUSE_ENTER:"ruler-mouse-enter",EVT_RULER_MOUSE_LEAVE:"ruler-mouse-leave",TREE_SELECTION_NONE:0,TREE_SELECTION_SINGLE:1,TREE_SELECTION_MULTI:2,CLS_OBJECTINSPECTOR_EDITOR:"wvObjectInspectorEditor",
EVT_PS_EDITOR_UPDATED:"editor-updated",CLS_PS_DIV_LANGS_CONTAINER:"wvPSLangsContainer",CLS_PS_BTN_ADD:"wvPSBtnAdd",CLS_PS_BTN_DEL:"wvPSBtnDel",CLS_PS_BTN_RAW:"wvPSBtnRaw",CLS_PS_BTN_CLEAR:"wvPSBtnClear",CLS_PS_DIV_LANG_NAME:"wvPSLangLabel",CLS_PS_LANG_SELECTOR:"wvPSLangSelector",CLS_PS_TEXTAREA_RAW_EDITOR:"wvPSTextareaRawEditor",CLS_PS_LABEL_CONTAINER:"wvPSLabelContainer",CLS_PS_INPUT_CONTAINER:"wvPSInputContainer",CLS_TABS_ACTIVE_TAB:"wvTabsActive",CLS_TABS_UL:"wvTabsUl",CLS_TABS_CONTENT_DIV:"wvTabsContentDiv",
CLS_TABS_CONTENT_DIV_HIDDEN:"wvTabsContentDivHidden",CLS_TABS_CONTENT_DIV_SHOWN:"wvTabsContentDivShown",CLS_TABS_CONTENT_CONTAINER:"wvTabsContentContainer",CLS_TABS_UL_CONTAINER:"wvTabsUlContainer",CLS_TABS_LI_DISABLED:"wvTabDisabled",EVT_TABS_TAB_CHANGED:"wv-active-tab-changed",EVT_TABS_TAB_ADD:"wv-tab-add",EVT_TABS_TAB_REMOVE:"wv-tab-remove",EVT_MULTI_LINE_TEXT_UPDATED:"wv-multiline-updated",CLS_OBJECT_EDITOR_NODE_CONTAIER:"wvObjEditNode",CLS_OBJECT_EDITOR_ARRAY_ITEM:"wvObjEditItem",CLS_OBJECT_EDITOR_ARRAY_ITEM_SEPARATOR:"wvObjEditItemSeparator",
CLS_OBJECT_EDITOR_ARRAY_CONTAIER:"wvObjEditArrDiv",CLS_OBJECT_EDITOR_OBJECT_CONTAIER:"wvObjEditObjDiv",CLS_OBJECT_EDITOR_INPUT_CONTAIER:"wvObjEditInputDiv",EVT_OBJECT_EDITOR_UPDATED:"wv-objectEditor-updated",EVT_OBJECT_EDITOR_VALIDATION_ERROR:"wv-objectEditor-validation-error",EVT_OBJECT_EDITOR_VALIDATION_SUCCESS:"wv-objectEditor-validation-success",CLS_IMAGE_BOX_LOADING:"wvImageBox_loading",CLS_IMAGE_BOX_ERROR:"wvImageBox_error",CLS_IMAGE_BOX_WIDER:"wvImageBox_wider",CLS_IMAGE_BOX_HIGHER:"wvImageBox_higher",
CLS_IMAGE_VIEW:"wvImageView",CLS_IMAGE_VIEW_ZOOM:"wvImageView_zoom",CLS_IMAGE_VIEW_IMAGE:"wvImageView_image",CLS_GALLERY:"wvGallery",CLS_GALLERY_PREV:"wvGallery_prev",CLS_GALLERY_NEXT:"wvGallery_next",CLS_GALLERY_DISABLED:"wvGallery_disabled",CLS_GALLERY_LIST:"wvGallery_list",CLS_GALLERY_ITEM:"wvGallery_item",CLS_GALLERY_THUMBNAIL:"wvGallery_thumbnail",CLS_GALLERY_CONTENT:"wvGallery_content",CLS_GALLERY_IMAGE:"wvGallery_image",CLS_GALLERY_SELECTED:"wvGallery_selected",CLS_GALLERY_SIMPLE_THUMBNAILS:"wvGallerySimple_thumbnails",
CLS_GALLERY_SIMPLE_PREVIEW:"wvGallerySimple_preview",EVT_GALLERY_ADD:"wv-gallery-add",EVT_GALLERY_REMOVE:"wv-gallery-remove",EVT_GALLERY_CHANGE:"wv-gallery-change",CLS_DETAILS:"wvDetails",CLS_DETAILS_TITLE:"wvDetailsTitle",CLS_DETAILS_TITLE_SHOWN:"wvDetailsTitleShown",CLS_DETAILS_TITLE_HIDDEN:"wvDetailsTitleHidden",CLS_DETAILS_CONTENT:"wvDetailsContent",CLS_DETAILS_CONTENT_VISIBLE:"wvDetailsContentVisible",CLS_DETAILS_CONTENT_HIDDEN:"wvDetailsContentHidden",CLS_DETAILS_MODAL:"wvDetailsModal",CLS_CHAIN_SELECTOR:"wvChainSelector",
CLS_CS_DIV_INFO:"wvChainSelectorInfo",CLS_CS_DIV_NAME:"wvChainSelectorName",CLS_CS_DIV_DESCR:"wvChainSelectorDescription",CLS_CS_DIV_COMBO_WRAP:"wvChainSelectorComboWrap",CLS_CS_DIV_ARROW:"wvChainSelectorComboArrow",EVT_CHAIN_SELECTOR_UPDATED:"chain-selector-updated",EVT_DETAILS_SHOW:"wv-details-show",EVT_DETAILS_HIDE:"wv-details-hide",CLS_SELECT_MODE_MULTI:"wvMulti",CLS_SELECT_MODE_SINGLE:"wvSingle",CLS_SELECT_CONTAINER:"wvSelectContainer",CLS_SELECT_COMBOBOX:"wvSelectCombobox",CLS_SELECT_DROPDOWN:"wvSelectDropdown",
CLS_SELECT_DROPDOWN_SHOWN:"wvShown",CLS_SELECT_DROPDOWN_HIDDEN:"wvHidden",CLS_SELECT_DISPLAY:"wvSelectDisplay",CLS_SELECT_ARROW:"wvSelectArrow",CLS_SELECT_AUTOCOMPETE:"wvSelectAutocomplete",CLS_SELECT_AUTO_CONTAINER:"wvSelectAutoContainer",CLS_SELECT_CHOICES_CONTAINER:"wvSelectChoicesContainer",EVT_SELECT_CHANGE:"wv-select-change",EVT_SELECT_OPEN:"wv-select-opan",EVT_SELECT_CLOSE:"wv-select-close",EVT_SELECT_SELECT:"wv-select-select",EVT_SELECT_UNSELECT:"wv-select-unselect",SELECT_MODES:{Single:0,
Multi:1}},r=[],b=!1;d.dirty=function(a){if("undefined"===typeof a)return b;b=a};d.isDirty=function(){return b||null!==d.currentDialog()};d.SUPPRESS_UNLOAD_CHECK=!1;window.onbeforeunload=function(a){d.SUPPRESS_UNLOAD_CHECK||!d.isDirty()&&!WAVE.RecordModel.isDirty()||((a||window.event).returnValue="The page is in the middle of the data entry. If you navigate away/close the page now some changes will be lost. Are you sure?")};var f=0,q=null,h=null,l=null,u=null,m=!1,w=0;d.toast=function(a,b,c){var g=
{};WAVE.intValidPositive(c)||(c=2500);var f=document.createElement("div");b=WAVE.strEmpty(b)?"":"_"+b;f.className=d.CLS_TOAST+b;f.style.zIndex=1E6;f.innerHTML=a;f.style.left=0;document.body.appendChild(f);a=Math.round(f.offsetWidth/2);f.style.left="50%";f.style.marginLeft=-a+"px";w++;1<w&&(f.style.marginLeft=-(a+4*w)+"px",f.style.marginTop=-(4*w)+"px");var e=!1;g.close=function(){if(e)return!1;document.body.removeChild(f);w--;return e=!0};g.closed=function(){return e};setTimeout(function(){g.close()},
c);return g};d.curtainOn=function(a,b,c){if(!c)try{document.activeElement.blur()}catch(g){}c=document.createElement("div");b=WAVE.strAsBool(b,!0);c.style.backgroundColor="rgba(127,127,127,0.45)";c.className=d.CLS_CURTAIN;WAVE.strEmpty(a)||(c.className+=" "+a);c.style.position="fixed";c.style.left="0";c.style.top="0";c.style.width="100%";c.style.height="100%";c.style.zIndex=5E5+r.length;c.mbu=b;document.body.appendChild(c);r.push(c);b&&k();return c};d.curtainOff=function(){if(0!==r.length){var a=r[r.length-
1];"undefined"!==typeof a.__DIALOG?a.__DIALOG.cancel():(document.body.removeChild(a),WAVE.arrayDelete(r,a),!0===a.mbu&&x())}};d.isCurtain=function(){return 0<r.length};d.Dialog=function(a){function b(a,c,d){WAVE.isObject(c)?a.appendChild(c):a.innerHTML=WAVE.strDefault(c,d)}function c(){if(0!==t||0!==m){var a=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,b=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,d=0===t?n.offsetWidth:
Math.round(t/100*a),g=0===m?n.offsetHeight:Math.round(m/100*b);n.style.width=0===t?"auto":d+"px";n.style.left=Math.round(a/2-n.offsetWidth/2)+"px";a=Math.round(b/2-n.offsetHeight/2);0>a&&(a=0);n.style.top=a+"px";n.style.width=0===t?"auto":d-2*n.offsetLeft+"px";n.style.height=0===t?"auto":g-(n.offsetTop+n.offsetLeft)+"px"}}function g(a){WAVE.isParentOf(n,a.target)||h.close()}function f(a){27===a.keyCode&&h.close()}function e(){E&&clearTimeout(E);E=setTimeout(function(){c();E=null},500)}WAVE.isObject(a)||
(a={});var h=this,q=WAVE.isFunction(a.onShow)?a.onShow:function(){},l=WAVE.isFunction(a.onClose)?a.onClose:function(){return!0},p=WAVE.strAsBool(a.closeOnClickOutside,!1),fa=WAVE.strAsBool(a.closeOnEscape,!0),t=WAVE.intValidPositive(a.widthpct)?a.widthpct:0,m=WAVE.intValidPositive(a.heightpct)?a.heightpct:0,X=WAVE.strAsBool(a.preventScroll,!0),oa=a.header,pa=a.body,va=a.footer,u=null,n=null,L=null,v=null,w=null;WAVE.extend(h,WAVE.EventManager);100<t&&(t=100);100<m&&(m=100);u=document.createElement("div");
u.__DIALOG=this;u.className=d.CLS_DIALOG_BASE+" "+WAVE.strDefault(a.cls);u.style.position="fixed";u.style.zIndex=5E5+r.length;document.body.appendChild(u);r.push(u);n=document.createElement("div");n.className=d.CLS_DIALOG_CONTENT;u.appendChild(n);L=document.createElement("div");L.className=d.CLS_DIALOG_HEADER;b(L,oa,"Dialog");n.appendChild(L);v=document.createElement("div");v.className=d.CLS_DIALOG_BODY;b(v,pa,"&nbsp;");n.appendChild(v);w=document.createElement("div");w.className=d.CLS_DIALOG_FOOTER;
b(w,va,"");n.appendChild(w);var E=null,C=d.DLG_UNDEFINED;this.result=function(){return C};this.close=function(a){"undefined"===typeof a&&(a=d.DLG_CANCEL);if(C!==d.DLG_UNDEFINED)return C;if(!l(this,a))return d.DLG_UNDEFINED;C=a;document.body.removeChild(u);WAVE.arrayDelete(r,u);WAVE.removeEventHandler(window,"resize",e);X&&x();p&&WAVE.removeEventHandler(window,"click",g);fa&&WAVE.removeEventHandler(window,"keyup",f);h=q=l=w=v=L=n=u=u.__DIALOG=null;this.eventInvoke(d.EVT_DIALOG_CLOSE,a);return a};this.ok=
function(){this.close(d.DLG_OK)};this.cancel=function(){this.close(d.DLG_CANCEL)};this.title=function(a){if("undefined"===typeof a||null===a)return L.innerHTML;L.innerHTML=a;c()};this.content=function(a){if("undefined"===typeof a||null===a)return v.innerHTML;$(v).html(a);c()};this.baseDIV=function(){return u};this.headerDIV=function(){return L};this.bodyDIV=function(){return v};this.footerDIV=function(){return w};this.widthpct=function(a){if("undefined"===typeof a||a===t)return t;t=a;c()};this.widthpct=
function(a){if("undefined"===typeof a||a===m)return m;m=a;c()};this.adjustBounds=function(){c()};WAVE.addEventHandler(window,"resize",e);(function(){p&&setTimeout(function(){WAVE.addEventHandler(window,"click",g)},1);fa&&WAVE.addEventHandler(window,"keyup",f);q(h)})();c();X&&k();return h};d.showConfirmationDialog=function(a,b,c,g,f){function e(a,b){return WAVE.strHTMLTemplate('<button class="@btnClass@" onclick="WAVE.GUI.currentDialog().close(\'@result@\');">@label@</button>',{btnClass:d.CLS_DIALOG_CONFIRM_BUTTON+
" "+h,result:b,label:a})}WAVE.isObject(f)||(f={});WAVE.isArray(c)||(c=[]);b=WAVE.strDefault(b,"Please confirm");var h=WAVE.strDefault(f.btnCls),q=WAVE.strDefault(f.footerCls),l="",p="",r="",t="";WAVE.inArray(c,d.DLG_YES)&&(l=e("Yes",d.DLG_YES));WAVE.inArray(c,d.DLG_NO)&&(p=e("No",d.DLG_NO));WAVE.inArray(c,d.DLG_OK)&&(r=e("OK",d.DLG_OK));WAVE.inArray(c,d.DLG_CANCEL)&&(t=e("Cancel",d.DLG_CANCEL));b="<div>"+b+"<div>";q='<div class="'+d.CLS_DIALOG_CONFIRM_FOOTER+" "+q+'">'+l+p+r+t+"</div>";new d.Dialog({header:WAVE.strDefault(a,
"Confirmation"),body:b,footer:q,cls:WAVE.strDefault(f.cls),onShow:function(a){},onClose:g})};d.currentDialog=function(){for(var a=r.length-1;0<=a;a--)if("undefined"!==typeof r[a].__DIALOG)return r[a].__DIALOG;return null};d.PuzzleKeypad=function(a){if("undefined"===typeof a||null===a||"undefined"===typeof a.DIV||WAVE.strEmpty(a.Image))throw"PuzzleKeypad.ctor(init.DIV, init.Image)";var b=this;WAVE.extend(b,WAVE.EventManager);var c=WAVE.genRndKey(4),g=a.DIV,f=WAVE.strEmpty(a.Help)?"Please enter the following security information by touching the symbols below":
a.Help,e=WAVE.strEmpty(a.Question)?"":a.Question,h=[],q=a.Image,l=null,p=null,r=null,t=null;this.destroy=function(){g.innerHTML=""};this.value=function(){return h};this.jsonValue=function(){return JSON.stringify(h)};this.help=function(a){if("undefined"===typeof a)return f;f=WAVE.strEmpty(a)?"Please enter the following security information by touching the symbols below":a;l.innerHTML=f};this.question=function(a){if("undefined"===typeof a)return e;e=WAVE.strEmpty(a)?"":a;p.innerHTML=e};this.image=function(a){if("undefined"===
typeof a)return q;q=WAVE.strEmpty(a)?"":a;t.src=q+"&req="+WAVE.genRndKey()};(function(){var a="pzl_"+c+"_"+WAVE.genAutoincKey("_puzzle#-?Keypad@Elements"),a={hid:"divHelp_"+a,qid:"divQuestion_"+a,tid:"tbValue_"+a,bid:"btnClear_"+a,iid:"img_"+a,help:f,question:e,img:q+"&req="+WAVE.genRndKey(),clear:"Clear"},D=WAVE.strTemplate("<div class='wvPuzzleHelp'     id='@hid@'>@help@</div><div class='wvPuzzleQuestion' id='@qid@'>@question@</div><div class='wvPuzzleInputs'> <input id='@tid@' placeholder='\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7' type='text' disabled /><button id='@bid@'>@clear@</button> </div><div class='wvPuzzleImg'> <img id='@iid@' src='@img@'/></div>",
a);g.innerHTML=D;$("#"+a.bid).click(function(a){a.preventDefault();r.value="";h=[];b.eventInvoke(d.EVT_PUZZLE_KEYPAD_CHANGE,h)});$("#"+a.iid).click(function(a){var c=$(this).offset();h.push({x:Math.round(a.pageX-c.left),y:Math.round(a.pageY-c.top)});r.value+="*";b.eventInvoke(d.EVT_PUZZLE_KEYPAD_CHANGE,h)});l=WAVE.id(a.hid);p=WAVE.id(a.qid);r=WAVE.id(a.tid);WAVE.id(a.bid);t=WAVE.id(a.iid)})()};var a=function(a){function b(a){return oa.wFirst(function(b){return b.element===a})}function g(a){return m.wFirst(function(b){return b.name===
a})}function f(a,b){var c=g(a);null===c?(c={name:a,cfg:b||{},elementInfos:[]},k.push(c)):b&&(c.cfg=b);return c}function e(a){var c=a.currentTarget,g=b(c);null!==g&&(a=g.ruler.onMouseMove(a),l(c,g.scopeInfos,a),c=WAVE.arrayWalkable(g.scopeInfos).wSelect(function(a){return a.name}).wToArray(),t.eventInvoke(d.EVT_RULER_MOUSE_MOVE,a,c))}function h(a){a=a.currentTarget;var c=b(a);null!==c&&(c.ruler.onMouseEnter(),p(a,c.scopeInfos),a=WAVE.arrayWalkable(c.scopeInfos).wSelect(function(a){return a.name}).wToArray(),
t.eventInvoke(d.EVT_RULER_MOUSE_ENTER,a))}function q(a){var c=a.currentTarget,g=b(c);null!==g&&(g.ruler.onMouseLeave(a),r(c,g.scopeInfos),a=WAVE.arrayWalkable(g.scopeInfos).wSelect(function(a){return a.name}).wToArray(),t.eventInvoke(d.EVT_RULER_MOUSE_LEAVE,a))}function l(a,b,c){c={scope:null,masterRes:c};for(var d in b){var g=b[d];c.scope=g;for(var f in g.elementInfos){var e=g.elementInfos[f];if(a!==e.element)e.ruler.onScopeMouseMove(c)}}}function p(a,b){for(var c in b){var d=b[c],g;for(g in d.elementInfos){var f=
d.elementInfos[g];if(a!==f.element)f.ruler.onScopeMouseEnter(d)}}}function r(a,b){for(var c in b){var d=b[c],g;for(g in d.elementInfos){var f=d.elementInfos[g];if(a!==f.element)f.ruler.onScopeMouseLeave(d)}}}var t=this;WAVE.extend(this,WAVE.EventManager);var k=[],m=WAVE.arrayWalkable(k),u=[],oa=WAVE.arrayWalkable(u);this.set=function(a){var d=a.element,g=a.elementCfg;a=f(a.scopeName||"",a.scopeCfg);var D=b(d);if(null===D){var D={element:d,cfg:g||{},scopeInfos:[]},l=$(d);l.bind("mouseenter",h);l.bind("mouseleave",
q);l.bind("mousemove",e);d=new c(d,g);D.ruler=d;u.push(D)}else g&&(D.cfg=g,D.ruler.cfg(g));d=D;-1===a.elementInfos.indexOf(d)&&a.elementInfos.push(d);-1===d.scopeInfos.indexOf(a)&&d.scopeInfos.push(a)};this.unset=function(a){var c=a.element,d=a.scopeName,f=b(a.element);null!==f&&(d?(a=g(d),null!==a&&WAVE.arrayDelete(a.elements,f),WAVE.arrayDelete(f.scopes,a)):(WAVE.arrayWalkable(f.scopeInfos).wEach(function(a){WAVE.arrayDelete(a.elementInfos,f)}),f.scopeInfos.splice(0,f.scopeInfos.length)),0===f.scopeInfos.length&&
(c=$(c),c.unbind("mouseenter",h),c.unbind("mouseleave",q),c.unbind("mousemove",e),WAVE.arrayDelete(u,f)))};this.setScope=function(a,b){f(a,b)};this.mouseMove=function(a,b){var c=m.wWhere(function(a){return-1!==b.indexOf(a.name)}).wToArray();l(null,c,a)};this.mouseEnter=function(a){var b=m.wWhere(function(b){return-1!==a.indexOf(b.name)}).wToArray();p(null,b)};this.mouseLeave=function(a){var b=m.wWhere(function(b){return-1!==a.indexOf(b.name)}).wToArray();r(null,b)}},c=function(a,b){function c(a,b,
d){a=new WAVE.arrayWalkable([u,n,v,w,L,null,x,la,E,C,null,F]);d?a.wEach(function(a){null!==a&&"hidden"===a.style.visibility&&(a.style.visibility="visible")}):a.wEach(function(a){null!==a&&"hidden"!==a.style.visibility&&(a.style.visibility="hidden")})}function d(){k||(u=document.createElement("div"),u.id="WAVE_GUI_Ruler",u.innerHTML="Hint DIV",u.className=p,u.style.position="absolute",document.body.appendChild(u),w=e(!0),n=e(!0),E=e(!1),x=e(!1),v=e(!1),L=e(!1),la=e(!0),C=e(!0),k=!0)}function g(){k&&
(h(u),u=null,h(w),w=null,h(n),n=null,h(E),E=null,h(x),x=null,h(v),v=null,h(L),L=null,h(la),la=null,h(C),C=null,k=!1)}function f(){m&&(h(F),F=null,m=!1)}function e(a){var b=document.createElement("div");a?b.style.height="1px":b.style.width="1px";b.style.position="absolute";b.className=r;document.body.appendChild(b);return b}function h(a){null!==a&&document.body.removeChild(a)}var q=this,l=b||{};this.cfg=function(a){"undefined"!==typeof a&&a!==b&&(l=a);return l};var p=l.hintCls||"wvRulerHint",r=l.sightCls||
"wvRulerSight",t=l.sightSize||8,k=!1,m=!1,u=null,n=null,v=null,w=null,L=null,x=null,la=null,E=null,C=null,F=null;this.onMouseEnter=function(a){d()};this.onMouseLeave=function(a){g()};this.onMouseMove=function(b){f();d();var g;if(l.parentRc)g=l.parentRc;else{var e=a.getBoundingClientRect();g=WAVE.Geometry.toRectWH(e.left,e.top,e.width,e.height)}var e=b.clientX-g.left(),h=b.clientY-g.top();u.style.left=b.clientX+"px";u.style.top=b.clientY+"px";var q=null,q=l.getTxt?l.getTxt({clientPoint:new WAVE.Geometry.Point(b.clientX,
b.clientY),divHint:u}):e+", "+h;u.innerHTML=q;for(var q=u.getBoundingClientRect(),q=WAVE.Geometry.toRectWH(q.left,q.top,q.width,q.height),p=b.clientX,r=b.clientY,k=g,m=null,fa=q.square(),oa=Number.MAX_VALUE,X=0;X<2*Math.PI;X+=Math.PI/4){var H=WAVE.Geometry.rotateRectAroundCircle(p,r,20,q.width(),q.height(),X),Q=WAVE.Geometry.overlapAreaRect(k,H),Q=fa-Q;if(0===Q){m=H;break}Q<oa&&(oa=Q,m=H)}q=m.topLeft();u.style.left=q.x()+"px";u.style.top=q.y()+"px";q=b.clientX;p=b.clientY;r=q-t;r<g.left()&&(r=g.left());
k=q+t;k>g.right()&&(k=g.right());m=p-t;m<g.top()&&(m=g.top());fa=p+t;fa>g.bottom()&&(fa=g.bottom());n.style.left=g.left()+"px";n.style.width=r-g.left()+"px";n.style.top=p+"px";w.style.left=k+"px";w.style.width=g.right()-k+"px";w.style.top=p+"px";v.style.top=g.top()+"px";v.style.height=m-g.top()+"px";v.style.left=q+"px";L.style.top=fa+"px";L.style.height=g.bottom()-fa+"px";L.style.left=q+"px";x.style.top=m+"px";x.style.height=fa-m+"px";x.style.left=r+"px";E.style.top=m+"px";E.style.height=fa-m+"px";
E.style.left=k+"px";la.style.left=r+"px";la.style.width=k-r+"px";la.style.top=m+"px";C.style.left=r+"px";C.style.width=k-r+"px";C.style.top=fa+"px";e=l.getMasterInfo?l.getMasterInfo({clientPoint:new WAVE.Geometry.Point(b.clientX,b.clientY)}):{elementRcPoint:new WAVE.Geometry.Point(e,h),isInParentRc:!0};c(b.clientX,b.clientY,e.isInParentRc);return e};this.onScopeMouseEnter=function(a){m||(F=e(!1),m=!0)};this.onScopeMouseLeave=function(a){f()};this.onScopeMouseMove=function(a){g();m||(F=e(!1),m=!0);
var b=q.getParentRc(),d,f,h;l.getSlaveInfo?(f=l.getSlaveInfo({masterRes:a.masterRes}),h=f.isInParentRc,d=f.clientPoint.x(),f=f.clientPoint.y()):(f=a.masterRes.elementRcPoint,h=!0,d=b.left()+f.x(),f=b.top()+f.y());c(d,f,a.masterRes.isInParentRc&&h);F.style.top=b.top()+"px";F.style.height=b.height()+"px";F.style.left=d+"px"};this.getParentRc=function(){var b;l.parentRc?b=l.parentRc:(b=a.getBoundingClientRect(),b=WAVE.Geometry.toRectWH(b.left,b.top,b.width,b.height));return b}},g=null;d.rulerSet=function(b){null===
g&&(g=new a);g.set(b)};d.rulerUnset=function(a){null!==g&&g.unset(a)};d.rulerSetScope=function(b,c){null===g&&(g=new a);g.setScope(b,c)};d.rulerMouseMove=function(a,b){null!==g&&g.mouseMove(a,b)};d.rulerMouseEnter=function(a){null!==g&&g.mouseEnter(a)};d.rulerMouseLeave=function(a){null!==g&&g.mouseLeave(a)};d.rulerEventBind=function(b,c){null===g&&(g=new a);g.eventBind(b,c)};d.WindowConnector=function(a){a=a||{};var b=this,c=a.wnd||window,d=[],g=WAVE.arrayWalkable(d);this.connectedWindows=function(){return WAVE.arrayShallowCopy(d)};
this.openWindow=function(a){var c=window.open(a||window.location.href);g.wEach(function(a){a.Connector.addWindow(c)});b.addWindow(c)};this.closeCurrentWindow=function(){g.wEach(function(a){a.Connector.removeWindow(c)})};this.addWindow=function(a){d.push(a.window)};this.removeWindow=function(a){WAVE.arrayDelete(d,a)};this.callWindowFunc=function(a){var c;g.wEach(function(b){b.closed?(c||(c=[]),c.push(b)):a(b)});if(c){var d=WAVE.arrayWalkable(c);d.wEach(function(a){b.removeWindow(a)});d.wEach(function(a){g.wEach(function(b){b.Connector.removeWindow(a)})})}};
this.logMsg=function(a){console.log(a)};if(c.opener&&c.opener.Connector){b.addWindow(c.opener);a=c.opener.Connector.connectedWindows();for(var f in a){var e=a[f];e!==c&&(e.closed||b.addWindow({window:e}))}}};d.connectorEnsure=function(a){a=a||window;a.Connector||(a.Connector=new d.WindowConnector({wnd:a}))};var t=0;d.Tree=function(a){function b(a,g){var f;l===d.TREE_SELECTION_SINGLE?(!0===g&&r.getDescendants().wEach(function(b){if(b.node!==a&&!0===b.node.selected()){var g={phase:d.EVT_PHASE_BEFORE,
node:b.node,value:b.node.selected()};c(d.EVT_TREE_NODE_SELECTION,g);b.node.selected(!1,!0);b={phase:d.EVT_PHASE_AFTER,node:b.node,value:b.node.selected()};c(d.EVT_TREE_NODE_SELECTION,b)}}),f={phase:d.EVT_PHASE_AFTER,node:a,value:g},c(d.EVT_TREE_NODE_SELECTION,f)):l===d.TREE_SELECTION_MULTI&&(f={phase:d.EVT_PHASE_AFTER,node:a,value:g},c(d.EVT_TREE_NODE_SELECTION,f))}function c(a,b){p||f.eventInvoke(a,b)}var g=function(a){a=a||{};var p=this;t++;var D="tvn_"+t,m=a.parent||null;if(null!==m&&m.tree()!==
f)throw"Tree.Node.ctor(wrong parent tree)";this.parent=function(){return m};var k,u,n,v,w;this.__divChildren=function(){return null!==m?w:e};var S="undefined"!==typeof a.id?a.id.toString():t.toString();this.id=function(){return S};var x="undefined"===typeof a.expandedContent?f.DEFAULT_NODE_EXPANDED_CONTENT:a.expandedContent;this.expandedContent=function(a){if("undefined"===typeof a)return x;x=a;u&&(u.innerHTML=y?x:E)};var E="undefined"===typeof a.collapsedContent?f.DEFAULT_NODE_COLLAPSED_CONTENT:
a.collapsedContent;this.collapsedContent=function(a){if("undefined"===typeof a)return E;E=a;u&&(u.innerHTML=y?x:E)};this.path=function(){return null===m?"":m===r?S:m.path()+"/"+S};this.level=function(){return null===m?-1:m===r?0:m.level()+1};this.html=function(a){if(null===m)return null;if("undefined"===typeof a)return v.innerHTML;var b={phase:d.EVT_PHASE_BEFORE,node:p,oldContent:v.innerHTML,newContent:a,abort:!1};c(d.EVT_TREE_NODE_CONTENT,b);!0!==b.abort&&(v.innerHTML=a,c(d.EVT_TREE_NODE_CONTENT,
{phase:d.EVT_PHASE_AFTER,node:p,oldContent:v.innerHTML,newContent:a}))};var C=!1!==a.selectable;this.selectable=function(a){if("undefined"===typeof a)return C;C=a;F&&!a&&p.selected(!1)};var F=!0===a.selected;this.selected=function(a,g){if(l===d.TREE_SELECTION_NONE)return!1;if("undefined"===typeof a)return F;if(a!==F&&(C||!C&&!a)){if(!0!==g){var f={phase:d.EVT_PHASE_BEFORE,node:p,value:a,abort:!1};c(d.EVT_TREE_NODE_SELECTION,f);if(!0===f.abort)return}F=a;v.className=F?p.wvTreeNodeOwnSelected():p.wvTreeNodeOwn();
!0!==g&&b(p,a)}};this.wvTreeNode=function(a){if("undefined"===typeof a)return k.className;k.className=a};this.wvTreeNodeButton=function(a){if("undefined"===typeof a)return u.className;u.className=a};this.wvTreeNodeContent=function(a){if("undefined"===typeof a)return n.className;n.className=a};var A=a.wvTreeNodeButtonExpanded||h.wvTreeNodeButtonExpanded;this.wvTreeNodeButtonExpanded=function(a){if("undefined"===typeof a)return A||h.wvTreeNodeButtonExpanded;a!==A&&(A=a,u.className=y?p.wvTreeNodeButtonExpanded():
p.wvTreeNodeButtonCollapsed())};var T=a.wvTreeNodeButtonCollapsed||h.wvTreeNodeButtonCollapsed;this.wvTreeNodeButtonCollapsed=function(a){if("undefined"===typeof a)return T||h.wvTreeNodeButtonCollapsed;a!==T&&(T=a,u.className=y?p.wvTreeNodeButtonExpanded():p.wvTreeNodeButtonCollapsed())};var wa=a.wvTreeNodeOwn||h.wvTreeNodeOwn;this.wvTreeNodeOwn=function(a){if("undefined"===typeof a)return wa||h.wvTreeNodeOwn;a!==wa&&(wa=a,v.className=F?p.wvTreeNodeOwnSelected():p.wvTreeNodeOwn())};var G=a.wvTreeNodeOwnSelected||
h.wvTreeNodeOwnSelected;this.wvTreeNodeOwnSelected=function(a){if("undefined"===typeof a)return G||h.wvTreeNodeOwnSelected;a!==G&&(G=a,v.className=F?p.wvTreeNodeOwnSelected():p.wvTreeNodeOwn())};this.wvTreeNodeChildren=function(a){if("undefined"===typeof a)return w.className;w.className=a};var ra=a.childrenDisplayVisible||q;this.childrenDisplayVisible=function(a){if("undefined"===typeof a)return ra;a!==ra&&(ra=a,y&&(w.style.display=ra))};var na=a.data;this.data=function(a){if("undefined"===typeof a)return na;
if(na!==a){var b={phase:d.EVT_PHASE_BEFORE,node:p,oldData:na,newData:a,abort:!1};c(d.EVT_TREE_NODE_DATA,b);!0!==b.abort&&(na=a,c(d.EVT_TREE_NODE_DATA,{phase:d.EVT_PHASE_AFTER,node:p,oldData:na,newData:a}))}};var y=!0===a.expanded;this.expanded=function(a){if("undefined"===typeof a)return y;if(null!==m&&y!==a){var b={phase:d.EVT_PHASE_BEFORE,node:p,value:a,abort:!1};c(d.EVT_TREE_NODE_EXPANSION,b);!0!==b.abort&&(y=a,u.className=y?p.wvTreeNodeButtonExpanded():p.wvTreeNodeButtonCollapsed(),u.innerHTML=
a?x:E,w.style.display=a?ra:"none",c(d.EVT_TREE_NODE_EXPANSION,{phase:d.EVT_PHASE_AFTER,node:p,value:a}))}};var J=[];this.children=function(){return WAVE.arrayShallowCopy(J)};this.__children=function(){return J};this.tree=function(){return f};this.getDescendants=function(){return p.__getDescendants(0)};this.__getDescendants=function(a){var b=function(){var b=WAVE.arrayWalkable(J).getWalker(),c=null,d=0,g=-1;this.reset=function(){b=WAVE.arrayWalkable(J).getWalker();d=0;g=-1};this.moveNext=function(){function f(){if(b.moveNext())return g++,
d=1,!0;d=0;return!1}if(0===d)return f();if(1===d)if(c=b.current().__getDescendants(a+1).getWalker(),c.moveNext())d=2;else return f();else if(2===d&&!c.moveNext())return f();return!0};this.current=function(){if(1===d)return{level:a,nodeNum:g,node:b.current()};if(2===d)return c.current()}},c={getWalker:function(){return new b},tree:f};WAVE.extend(c,WAVE.Walkable);return c};this.getChildIdx=function(a,b){return b?p.getDescendants(0).wFirstIdx(function(b){return WAVE.strSame(b.node.id(),a)}):WAVE.arrayWalkable(J).wFirstIdx(function(b){return WAVE.strSame(b.id(),
a)})};this.getChild=function(a,b){if(b){var c=p.getDescendants(0).wFirst(function(b){return WAVE.strSame(b.node.id(),a)});return c?c.node:null}return WAVE.arrayWalkable(J).wFirst(function(b){return WAVE.strSame(b.id(),a)})};this.navigate=function(a){function b(a){return function(b){return b.id()===a}}if("undefined"===typeof a||null===a)return null;if(!WAVE.isArray(a)){if(WAVE.strEmpty(a))return null;a=a.split(/[\\/]+/)}var c=null,d=WAVE.arrayWalkable(J),g;for(g in a){c=d.wFirst(b(a[g]));if(null===
c)return null;d=WAVE.arrayWalkable(c.__children())}return c};this.unveil=function(){var a=m;if(null!==a)for(;null!==a;){var b=a.parent();null!==b&&a.expanded(!0);a=b}};this.addChild=function(a){"undefined"===typeof a&&(a={});var b={phase:d.EVT_PHASE_BEFORE,parentNode:p,childNodeInit:a,abort:!1};c(d.EVT_TREE_NODE_ADD,b);if(!0!==b.abort)return a.parent=p,a=new g(a),J.push(a),null!==m&&(u.style.visibility="visible"),c(d.EVT_TREE_NODE_ADD,{phase:d.EVT_PHASE_AFTER,parentNode:p,childNode:a}),a};this.__removeChild=
function(a){WAVE.arrayDelete(J,a);0===J.length&&null!==m&&(u.style.visibility="hidden")};this.remove=function(){if(null===m)console.error("Root node couldn't be removed");else{var a={phase:d.EVT_PHASE_BEFORE,parentNode:m,childNode:p,abort:!1};c(d.EVT_TREE_NODE_REMOVE,a);!0!==a.abort&&(k.parentNode.removeChild(k),m.__removeChild(p),c(d.EVT_TREE_NODE_REMOVE,{phase:d.EVT_PHASE_AFTER,parentNode:m,childNode:p}))}};this.removeAllChildren=function(){var a=WAVE.arrayShallowCopy(J),b;for(b in a)a[b].remove()};
if(null!==m){var z={id:D,wvTreeNode:a.wvTreeNode||h.wvTreeNode,wvTreeNodeContent:a.wvTreeNodeContent||h.wvTreeNodeContent,wvTreeNodeOwn:a.wvTreeNodeOwn||h.wvTreeNodeOwn,wvTreeNodeOwnSelected:a.wvTreeNodeOwnSelected||h.wvTreeNodeOwnSelected,wvTreeNodeChildren:a.wvTreeNodeChildren||h.wvTreeNodeChildren};z.wvTreeNodeButton=y?p.wvTreeNodeButtonExpanded():p.wvTreeNodeButtonCollapsed();var ca=WAVE.strTemplate("<div id='exp_@id@' class='@wvTreeNodeButton@'></div><div id='content_@id@' class='@wvTreeNodeContent@'>  <div id='own_@id@' class='@wvTreeNodeOwn@'></div>  <div id='children_@id@' class='@wvTreeNodeChildren@'>  </div></div>",
z),K=m.__divChildren();k=document.createElement("div");k.id="root_"+D;k.className=z.wvTreeNode;k.innerHTML=ca;K.appendChild(k);n=WAVE.id("content_"+D);v=WAVE.id("own_"+D);w=WAVE.id("children_"+D);v.innerHTML=a.html;v.className=F?p.wvTreeNodeOwnSelected():p.wvTreeNodeOwn();$(v).click(function(){p.selected(!F)});a=!0===a.expanded;u=WAVE.id("exp_"+D);u.innerHTML=y?x:E;u.style.visibility="hidden";$(u).click(function(){p.expanded(!y)});w.style.display=a?ra:"none"}};if("undefined"===typeof a||null===a||
"undefined"===typeof a.DIV||null===a.DIV)throw"Tree.ctor(init.DIV)";var f=this;WAVE.extend(f,WAVE.EventManager);this.DEFAULT_NODE_EXPANDED_CONTENT="-";this.DEFAULT_NODE_COLLAPSED_CONTENT="+";var e=a.DIV,h={wvTreeNode:a.wvTreeNode||d.CLS_TREE_NODE,wvTreeNodeButtonExpanded:a.wvTreeNodeButtonExpanded||d.CLS_TREE_NODE_BUTTON_EXPANDED,wvTreeNodeButtonCollapsed:a.wvTreeNodeButtonCollapsed||d.CLS_TREE_NODE_BUTTON_COLLAPSED,wvTreeNodeContent:a.wvTreeNodeContent||d.CLS_TREE_NODE_CONTENT,wvTreeNodeOwn:a.wvTreeNodeOwn||
d.CLS_TREE_NODE_OWN,wvTreeNodeOwnSelected:a.wvTreeNodeOwnSelected||d.CLS_TREE_NODE_OWN_SELECTED,wvTreeNodeChildren:a.wvTreeNodeChildren||d.CLS_TREE_NODE_CHILDREN},q=a.childrenDisplayVisible||"block",l=a.treeSelectionType||d.TREE_SELECTION_NONE;this.treeSelectionType=function(a){if("undefined"===typeof l)return l;l=a};this.selectedNodes=function(a){if("undefined"===typeof a)return r.getDescendants().wWhere(function(a){return!0===a.node.selected()});if(null===a)throw"val couldn't be null";var b;if(WAVE.isFunction(a.wAny))b=
a;else if(WAVE.isArray(a))b=WAVE.arrayWalkable(a);else throw"val type is invalid";r.getDescendants().wEach(function(a){a.node.selected(b.wAny(function(b){return b===a.node.id()}),!0)})};var p=!0===a.supressEvents;this.supressEvents=function(a){if("undefined"===typeof a)return p;p=a};var r=new g;this.root=function(){return r}};var v=0;d.ObjectInspector=function(a,b){function c(b){for(var d=b.target.getAttribute("objpath").split(/\//),g=a,f=0;f<d.length-1;f++)g=g[d[f]];g[d[d.length-1]]=b.target.value}
function g(a,b,d){var f=Object.keys(b),h,q;for(q in f){var p=f[q],l=b[p];if(null!==l&&"object"!==typeof l){var r="objinsp_edit_"+v++;h=WAVE.strTemplate('<div class="@cls@">  <label for="@id@">@key@</label>  <input type="textbox" id="@id@" value="@val@" objpath="@objpath@"></div>',{id:r,key:p,val:l,objpath:d?d+"/"+p:p,cls:e});h=a.addChild({html:h});r=WAVE.id(r);r.objpath=h.path();r.addEventListener("input",c)}else h=a.addChild({html:p}),g(h,l,d?d+"/"+p:p)}}WAVE.extend(this,WAVE.EventManager);var f=
new d.Tree({DIV:b.div});b=b||{};var e=b.wvObjectInspectorEditor||d.CLS_OBJECTINSPECTOR_EDITOR;this.wvObjectInspectorEditor=function(a){if("undefined"===typeof a)return e;e=a};g(f.root(),a,"")};d.MultiLineTextBox=function(a){if("undefined"===typeof a||null===a||"undefined"===typeof a.DIV||null===a.DIV)throw"MultiLineTextBox.ctor(init.DIV)";if(WAVE.strEmpty(a.id))throw"MultiLineTextBox.ctor(init.id)";var b=this;WAVE.extend(b,WAVE.EventManager);var c=a.DIV,g=a.id,f=WAVE.strAsBool(a.addLabel,!0),e="shdw_div_"+
g,h=WAVE.strDefault(a.placeholder),q=WAVE.strAsBool(a.readonly,!1),p=WAVE.strAsBool(a.disabled,!1),l=WAVE.strDefault(a.value);a=WAVE.tryParseJSON(a.attrs).obj;c.innerHTML=WAVE.strHTMLTemplate("<div id='@shdwDivId@' style='position: fixed;visibility: hidden;height: auto;width: auto;'></div>"+(f?"<label for='@id@'>@placeholder@</label>":"")+"<textarea id='@id@' @disabled@ @readonly@ style='resize: none' placeholder='@placeholder@' title='@placeholder@'></textarea>",{shdwDivId:e,id:g,disabled:p?"disabled":
"",readonly:q?"readonly":"",placeholder:h});var r=WAVE.id(g),m=WAVE.id(e);r.onresize=function(){m.style.maxWidth=WAVE.styleOf(r,"width")};r.style.overflow="hidden";for(var k in a)r.setAttribute(k,a[k]);m.innerText=r.value=l;m.style.maxWidth=WAVE.styleOf(r,"width");m.style.font=WAVE.styleOf(r,"font");m.style.minHeight=WAVE.styleOf(r,"height");m.style.paddingTop=WAVE.styleOf(r,"padding-top");m.style.paddingRight=WAVE.styleOf(r,"padding-right");m.style.paddingBottom=WAVE.styleOf(r,"padding-bottom");
m.style.paddingLeft=WAVE.styleOf(r,"padding-left");m.style.wordWrap=WAVE.styleOf(r,"word-wrap");m.style.wordSpacing=WAVE.styleOf(r,"word-spacing");m.style.whiteSpace=WAVE.styleOf(r,"white-space");m.style.borderSpacing=WAVE.styleOf(r,"border-spacing");m.style.letterSpacing=WAVE.styleOf(r,"letter-spacing");m.style.lineHeight=WAVE.styleOf(r,"line-height");m.style.boxSizing=WAVE.styleOf(r,"box-sizing");m.style.border=WAVE.styleOf(r,"border");m.style.borderWidth=WAVE.styleOf(r,"border-width");m.style.borderRadius=
WAVE.styleOf(r,"border-radius");m.style.textIndent=WAVE.styleOf(r,"text-indent");var t=function(a){m.innerText=WAVE.strEmpty(a.value)?"W":a.value.replace(/\r\n|\r|\n/g,"\n ");a.style.height=m.clientHeight+"px"};r.onchange=function(a){t(this);m.style.maxWidth=WAVE.styleOf(r,"width");b.eventInvoke(d.EVT_MULTI_LINE_TEXT_UPDATED,{phase:d.EVT_PHASE_AFTER,target:a.target,value:this.value})};r.onkeydown=r.onkeyup=function(a){t(this)};t(r);return b};var p=0;d.PropSetEditor=function(a){function b(a,c){return WAVE.strLocalize(L,
"PSEditor","ps",WAVE.strDefault(A[a],c))}function c(){var a=[],b;for(b in G)WAVE.has(k,G[b])||a.push(G[b]);return a}function g(){m.innerHTML=WAVE.strHTMLTemplate("<input id='@outerId@' type='hidden' name='@outerName@'/><div id='@divEditorsContainerId@' class='@divEditorsContainerClass@'></div>"+(u||n?"":(w?"<input type='button' id='@btnAddId@' class='@btnAddClass@' value='@add@' />":"")+(v?"<input type='button' id='@btnRawId@' class='@btnRawClass@' value='@raw@' />":"")+(x?"<input type='button' id='@btnClearId@' class='@btnClearClass@' value='@clear@' />":
"")),{outerId:F.outputHiddenId,outerName:WAVE.strDefault(t,""),divEditorsContainerId:F.divEditorsContainerId,divEditorsContainerClass:d.CLS_PS_DIV_LANGS_CONTAINER,btnAddId:F.btnAddId,btnAddClass:E.addBtnCls,btnRawId:F.btnRawId,btnRawClass:E.rawBtnCls,btnClearId:F.btnClearId,btnClearClass:E.clearBtnCls,add:A.btnAdd,raw:A.btnRaw,clear:A.btnClear});u||n||!w||0!==c().length||(WAVE.id(F.btnAddId).disabled=!0);u||n||(w&&0<c().length&&(WAVE.id(F.btnAddId).onclick=function(){var a=this,b=c(),g="",f;for(f in b)g+=
"<option>"+b[f]+"</option>";var e="newIso_"+C;d.showConfirmationDialog(l()+A.addTitle,"<div>"+A.addBody+"</div><div><select class='"+d.CLS_PS_LANG_SELECTOR+"' id='"+e+"'>"+g+"</select></div>",[d.DLG_OK,d.DLG_CANCEL],function(c,g){if(g===d.DLG_OK){var f=WAVE.id(e).value;r.addLang(f);1===b.length&&(a.disabled=!0)}return!0},{btnCls:E.modalBtnCls});WAVE.id(e).focus()}),v&&(WAVE.id(F.btnRawId).onclick=function(){var a="raw"+C;d.showConfirmationDialog(l()+A.rawTitle,"<div>"+A.rawBody+"</div><div><textarea style='width: 70vw; height: 70vh;' class='"+
d.CLS_PS_TEXTAREA_RAW_EDITOR+"' type='text' id='"+a+"'></textarea></div>",[d.DLG_OK,d.DLG_CANCEL],function(b,c){if(c===d.DLG_OK){var g=WAVE.id(a).value,f=WAVE.tryParseJSON(g);if(f.ok){if(WAVE.checkKeysUnique(f.obj))return d.toast(WAVE.strLocalize(L,"PSEditor","ps","JSON is valid, but some keys are duplicated"),"error"),!1;r.content(g)}else return d.toast(WAVE.strLocalize(L,"PSEditor","ps","Invalid JSON"),"error"),!1}return!0},{btnCls:E.modalBtnCls});WAVE.id(a).value=r.content();WAVE.id(a).focus()}),
x&&(WAVE.id(F.btnClearId).onclick=function(){d.showConfirmationDialog(l()+A.clearConfirmTitle,"<div>"+A.clearConfirmBody+"</div>",[d.DLG_OK,d.DLG_CANCEL],function(a,b){b===d.DLG_OK&&r.clear();return!0},{btnCls:E.modalBtnCls})}))}function f(a){var b=C+"_"+a,c=WAVE.id(F.divEditorsContainerId),g=F.divDeleteButtonId+"_"+a,e=F.divLangNameId+"_"+a,h=F.divTextTemplateId+"_"+a;c.insertAdjacentHTML("beforeend",WAVE.strHTMLTemplate("<fieldset id='@langId@'><legend id='@isoLabelId@' class='@langClass@'></legend><div class='@textEditorsContainerClass@' id='@controlContainerId@'></div>"+
(!x||u||n?"":"<input type='button' id='@deleteButtonId@' class='@delCls@' value='@delText@'/>")+"</fieldset>",{langId:b,controlContainerId:h,deleteButtonId:g,isoLabelId:e,langClass:d.CLS_PS_DIV_LANG_NAME,labelContainerClass:d.CLS_PS_LABEL_CONTAINER,textEditorsContainerClass:d.CLS_PS_INPUT_CONTAINER,delCls:E.delBtnCls,disabled:n?"disabled":"",readonly:u?"readonly":"",delText:A.btnDel}));WAVE.id(e).innerText=a;(new d.ObjectEditor({DIV:WAVE.id(h),meta:{type:"object",schema:la},content:k[a],disabled:n,
readonly:u})).eventBind(d.EVT_OBJECT_EDITOR_UPDATED,function(b,c){k[a]=c;r.content(JSON.stringify(k),!1)});!x||u||n||(WAVE.id(g).onclick=function(){d.showConfirmationDialog(l()+A.delConfirmTitle+" : "+a.toUpperCase(),"<div>"+A.delConfirmBody+"</div>",[d.DLG_OK,d.DLG_CANCEL],function(b,c){c===d.DLG_OK&&r.deleteLang(a);return!0},{btnCls:E.modalBtnCls})})}function e(){if(WAVE.isObject(k))for(var a in k)f(a)}function h(){for(;m.hasChildNodes();)m.removeChild(m.lastChild);g();e();q()}function q(){null!==
t&&(WAVE.id(F.outputHiddenId).value=r.content())}function l(){return WAVE.strEmpty(y)?"":y+": "}if("undefined"===typeof a||null===a||"undefined"===typeof a.DIV||null===a.DIV)throw"PropSetEditor.ctor(init.DIV)";var r=this;WAVE.extend(r,WAVE.EventManager);p++;var m=a.DIV,k=WAVE.memberClone(WAVE.tryParseJSON(a.content).obj),t=WAVE.strDefault(a.outputFormFieldName,null),u=WAVE.strAsBool(a.readonly,!1),n=WAVE.strAsBool(a.disabled,!1),v=WAVE.strAsBool(a.canRaw,!0),w=WAVE.strAsBool(a.canAdd,!0),x=WAVE.strAsBool(a.canDel,
!0),G=WAVE.mergeArrays(["eng"],a.sets,function(a,b){return a.toLowerCase()===b.toLowerCase()},function(a){return a.toLowerCase()}),L=WAVE.strDefault(a.local,"eng"),y=WAVE.strDefault(a.title),la=WAVE.get(a,"schema",{n:{type:"text",plh:"Name"},d:{type:"textarea",plh:"Description"}}),E=WAVE.get(a,"btnClasses",{});E.addBtnCls=WAVE.strDefault(E.addBtnCls,d.CLS_PS_BTN_ADD);E.delBtnCls=WAVE.strDefault(E.delBtnCls,d.CLS_PS_BTN_DEL);E.rawBtnCls=WAVE.strDefault(E.rawBtnCls,d.CLS_PS_BTN_RAW);E.clearBtnCls=WAVE.strDefault(E.clearBtnCls,
d.CLS_PS_BTN_CLEAR);E.modalBtnCls=WAVE.strDefault(E.modalBtnCls,"");var C="ps_"+p,F={btnAddId:"addLang_"+C,btnRawId:"rawEdit_"+C,btnClearId:"clearBtn_"+C,divTextTemplateId:"textTemplate_"+C,divEditorsContainerId:"divEditorsContainer_"+C,divDeleteButtonId:"deleteButtonId_"+C,inputId:"_inputId_"+C,divLangNameId:"islLabel_"+C,outputHiddenId:"hidden_"+C},A=WAVE.get(a,"texts",{});A.addTitle=b("add-title","Add New Language");A.addBody=b("add-body","");A.rawTitle=b("raw-title","Raw Edit");A.rawBody=b("raw-body");
A.clearConfirmTitle=b("clear-confirm-title","Confirm Clear");A.clearConfirmBody=b("clear-confirm-body","Clear all language data?");A.delConfirmTitle=b("del-confirm-title","Confirm Delete");A.delConfirmBody=b("del-confirm-body");A.btnDel=b("btn-del","Delete");A.btnAdd=b("btn-add","Add");A.btnRaw=b("btn-raw","Edit Raw");A.btnClear=b("btn-clear","Clear");g();this.DIV=function(){return m};this.jsonContent=function(){return k};this.content=function(a,b){if("undefined"===typeof a)return WAVE.empty(k)?"":
JSON.stringify(k,null,2);var c=WAVE.tryParseJSON(a);if(c.ok){if(b=WAVE.strAsBool(b,!0))for(var g in k)WAVE.removeElem(C+"_"+g);k=WAVE.memberClone(c.obj);b&&e();q();r.eventInvoke(d.EVT_PS_EDITOR_UPDATED,k)}return a};this.title=function(a){if("undefined"===typeof a)return y;y=WAVE.strDefault(a)};this.enable=function(a){if("undefined"===typeof a)return!n;n=!0!==a;h();return a};this.readOnly=function(a){if("undefined"===typeof a)return u;u=!0===a;h();return a};this.canAdd=function(a){if("undefined"===
typeof a)return w;w=!0===a;h();return a};this.canDel=function(a){if("undefined"===typeof a)return x;x=!0===a;h();return a};this.canRaw=function(a){if("undefined"===typeof a)return v;v=!0===a;h();return a};this.addLang=function(a){if(WAVE.strEmpty(a))return!1;a=a.toLowerCase();if(WAVE.has(k,a))return!1;k[a]={};f(a);r.content(JSON.stringify(k));return!0};this.deleteLang=function(a){if(WAVE.strEmpty(a))return!1;a=a.toLowerCase();if(!WAVE.has(k,a))return!1;delete k[a];WAVE.removeElem(C+"_"+a);u||n||(WAVE.id(F.btnAddId).disabled=
!1);r.content(JSON.stringify(k));return!0};this.clear=function(){u||n||(WAVE.id(F.btnAddId).disabled=!1);r.content("{}")};h();return r};var U=0;d.ObjectEditor=function(a){function b(a,c){return WAVE.strLocalize(G,"ObjectEditor","objEd",WAVE.strDefault(C[a],c))}function c(a,b,g,f,h,q,p,r){a=a(e,g,f);a.ok?(r(),e.eventInvoke(d.EVT_OBJECT_EDITOR_VALIDATION_SUCCESS,{phase:d.EVT_PHASE_AFTER,target:b})):(p(),e.eventInvoke(d.EVT_OBJECT_EDITOR_VALIDATION_ERROR,{phase:d.EVT_PHASE_AFTER,target:b}));return a}
function g(){y=[];q.innerHTML=WAVE.strHTMLTemplate("<div id='@contId@'></div><div id='@buttonsId@'></div>",{contId:E.editorContainerId,buttonsId:E.buttonsContainerId});var a=WAVE.id(E.editorContainerId),b=WAVE.id(E.buttonsContainerId);if("array"===r){if(WAVE.isArray(k))for(var c=0;c<k.length;c++)f(c,a)}else for(c in l)new F(c,a);"array"!==r||!w||t||u||WAVE.isArray(k)&&!(k.length<x)||(a="add_"+h,b.insertAdjacentHTML("beforeend","<input type='button' value='"+C.btnAdd+"' id='"+a+"' class='"+A.addBtnCls+
"'/>"),WAVE.id(a).onclick=function(){WAVE.isArray(k)||(k=[]);k.push({});e.content(k,!0);e.validate()});n&&(b.insertAdjacentHTML("beforeend","<input type='button' value='"+C.btnRaw+"' id='"+E.btnRawId+"' class='"+A.addBtnCls+"'/>"),WAVE.id(E.btnRawId).onclick=function(){var a="raw"+h;d.showConfirmationDialog(C.rawTitle,"<div>"+C.rawBody+"</div><div><textarea style='width: 70vw; height: 70vh;' class='"+d.CLS_PS_TEXTAREA_RAW_EDITOR+"' type='text' id='"+a+"'></textarea></div>",[d.DLG_OK,d.DLG_CANCEL],
function(b,c){if(c===d.DLG_OK){var g=WAVE.id(a).value,f=WAVE.tryParseJSON(g);if(f.ok){if("array"!==r&&WAVE.checkKeysUnique(f.obj))return d.toast(WAVE.strLocalize(G,"ObjectEditor","objEd","JSON is valid, but some keys are duplicated"),"error"),!1;e.content(g,!0)}else return d.toast(WAVE.strLocalize(G,"ObjectEditor","objEd","Invalid JSON"),"error"),!1}return!0},{btnCls:A.modalBtnCls});WAVE.id(a).value=e.content();WAVE.id(a).focus()})}function f(a,b){var c=WAVE.memberClone(p);c.type="object";for(var g in c.schema)c.schema[g].index=
a;var h=E.editorContainerId+"_"+a;g="del"+h;b.insertAdjacentHTML("beforeend",WAVE.strHTMLTemplate(T,{divCLS:d.CLS_OBJECT_EDITOR_ARRAY_ITEM,divId:h,BtnId:g,BtnCls:A.delBtnCls,delText:C.btnDel,arrSep:d.CLS_OBJECT_EDITOR_ARRAY_ITEM_SEPARATOR}));c=new d.ObjectEditor({DIV:WAVE.id(h),content:k[a],meta:c,disabled:u,readonly:t});c.eventBind(d.EVT_OBJECT_EDITOR_UPDATED,function(b,c){k[a]=c;e.content(k)});c.eventBind(d.EVT_OBJECT_EDITOR_VALIDATION_ERROR,function(a,b){e.eventInvoke(d.EVT_OBJECT_EDITOR_VALIDATION_ERROR,
{phase:d.EVT_PHASE_AFTER,target:b.target})});c.eventBind(d.EVT_OBJECT_EDITOR_VALIDATION_SUCCESS,function(a,b){e.eventInvoke(d.EVT_OBJECT_EDITOR_VALIDATION_SUCCESS,{phase:d.EVT_PHASE_AFTER,target:b.target})});var c=c.validators(),q;for(q in c)y.push(c[q]);!v||t||u||(WAVE.id(g).onclick=function(){d.showConfirmationDialog(C.delConfirmTitle,"<div>"+C.delConfirmBody+"</div>",[d.DLG_OK,d.DLG_CANCEL],function(b,c){c===d.DLG_OK&&(k.splice(a,1),e.content(k,!0));return!0},{btnCls:A.modalBtnCls})})}if("undefined"===
typeof a||null===a||"undefined"===typeof a.DIV||null===a.DIV)throw"ObjectEditor.ctor(init.DIV)";var e=this;WAVE.extend(e,WAVE.EventManager);U++;var h="wvObjEditor_"+U,q=a.DIV,p=WAVE.get(a,"meta",{}),r=WAVE.strDefault(p.type,"text"),l=WAVE.get(p,"schema",{});WAVE.strDefault(p.plh);WAVE.mergeArrays([],p.sets,function(a,b){return a.toLowerCase()===b.toLowerCase()},function(a){return a.toLowerCase()});var m=p.dflt,k=WAVE.get(a,"content","undefined"!==typeof m?m:{}),t=WAVE.strAsBool(a.readonly,!1),u=WAVE.strAsBool(a.disabled,
!1),n=WAVE.strAsBool(a.canRaw,!1)&&!t&&!u,v=WAVE.strAsBool(a.canDel,!0)&&!t&&!u,w=WAVE.strAsBool(a.canAdd,!0)&&!t&&!u,x=WAVE.intValidPositive(p.maxLength)?p.maxLength:2,L=WAVE.strDefault(a.outputFormFieldName,""),G=WAVE.strDefault(a.local,"eng"),y=[],E={editorContainerId:"edit_cont_"+h,buttonsContainerId:"edit_buttons_"+h,inputId:"edit_input_"+h,outputHiddenId:"edit_conf_out_"+h,btnRawId:"edit_raw_"+h,btnDelId:"edit_del_"+h},C=WAVE.get(a,"texts",{});C.addTitle=b("add-title","Add New Language");C.addBody=
b("add-body","");C.rawTitle=b("raw-title","Raw Edit");C.rawBody=b("raw-body");C.clearConfirmTitle=b("clear-confirm-title","Confirm Clear");C.clearConfirmBody=b("clear-confirm-body","Clear all language data?");C.delConfirmTitle=b("del-confirm-title","Confirm Delete");C.resetConfirmTitle=b("reset-confirm-title","Confirm Reset");C.delConfirmBody=b("del-confirm-body");C.resetConfirmBody=b("reset-confirm-body");C.btnDel=b("btn-del","Delete");C.btnAdd=b("btn-add","Add");C.btnRaw=b("btn-raw","Edit Raw");
C.btnClear=b("btn-clear","Clear");C.btnReset=b("btn-reset","Reset");C.required=b("err-meg","Required");var F=function(a,b){function g(){var b=qa();b.ok&&(k=WAVE.isObject(k)?k:{},k[a]=b.value,e.content(k))}var f=l[a],h=WAVE.get(f,"DIV",b),q=f.dflt,p=WAVE.get(k,a,q),r=WAVE.strDefault(f.type,"text");WAVE.get(f,"schema",{});var m=WAVE.strDefault(f.plh,""),D=WAVE.intValidPositiveOrZero(f.index)?f.index:-1,n=WAVE.mergeArrays([],f.sets,function(a,b){return a.toLowerCase()===b.toLowerCase()},function(a){return a.toLowerCase()}),
v=WAVE.isObject(f.items)?f.items:{},w=WAVE.strAsBool(f.disabled,u),H=WAVE.strAsBool(f.readonly,t),va=WAVE.strAsBool(f.canRaw,!1),L=WAVE.strAsBool(f.canDel,!0),B=WAVE.strAsBool(f.canAdd,!0),A=WAVE.strAsBool(f.required,!1),x=WAVE.strDefault(f.cls),I=WAVE.strDefault(f.errMsg,A?C.required:""),pa=WAVE.isFunction(f.showError)?f.showError:function(){WAVE.id(Q).innerText=I},F=WAVE.isFunction(f.hideError)?f.hideError:function(){WAVE.id(Q).innerText=""},G=WAVE.isFunction(f.validate)?f.validate:function(a,b,
c){a=!0;if(A){if("text"===r||"textarea"===r||"radio"===r||"combo"===r)a=!WAVE.strEmpty(b);if("array"===r||"multiple"===r)a=WAVE.isArray(b)&&0<b.length;if("object"===r||"ps"===r)a=WAVE.isObject(b)&&!WAVE.empty(b)}return{ok:a,value:b,index:c}},za=a+E.editorContainerId,S=a+E.inputId,Q=za+"_err",ka=null,T,z,Z,aa,qa,Y;if("text"===r||"textarea"===r||"combo"===r||"check"===r)qa=function(){var a=WAVE.id(S);return c(G,a,"check"===r?a.checked:a.value,D,Q,I,pa,F)};if("array"===r||"object"===r||"ps"===r)qa=function(){return c(G,
ka,ka.jsonContent(),D,Q,I,pa,F)};if("radio"===r||"multiple"===r)qa=function(){Z=document.getElementsByName(S);z=Z.length;Y=[];for(T=0;T<z;T++)Z[T].checked&&Y.push(Z[T].value);return c(G,Z,"multiple"===r?Y:0<Y.length?Y[0]:null,D,Q,I,pa,F)};y.push(qa);var U="<div class='@nodeCont@'>"+(WAVE.strEmpty(m)?"":"<label class='@lblCls@' for='@labelFor@'>@plh@</label>")+"<div class='@errorDivCls@' id='@errorDivId@'></div><div id='@divId@' class='@ccCls@'></div></div>",ga=w?"disabled":"",O=H?"readonly":"";h.insertAdjacentHTML("beforeend",
WAVE.strHTMLTemplate(U,{nodeCont:d.CLS_OBJECT_EDITOR_NODE_CONTAIER+" "+x,labelFor:S,lblCls:A?"wvRequired":"",plh:m,errorDivCls:"wvError",errorDivId:Q,divId:za,ccCls:"array"===r?d.CLS_OBJECT_EDITOR_ARRAY_CONTAIER:"object"===r||"ps"===r?d.CLS_OBJECT_EDITOR_OBJECT_CONTAIER:d.CLS_OBJECT_EDITOR_INPUT_CONTAIER}));h=WAVE.id(za);WAVE.id(Q);f={DIV:h,id:S,value:WAVE.strDefault(p),meta:f,content:p,disabled:w,readonly:H,addLabel:!1,placeholder:m,sets:n,canRaw:va,canAdd:B,canDel:L};if("textarea"===r)ka=new d.MultiLineTextBox(f),
ka.eventBind(d.EVT_MULTI_LINE_TEXT_UPDATED,function(a,b){g()});else if("object"===r||"array"===r)ka=new d.ObjectEditor(f),ka.eventBind(d.EVT_OBJECT_EDITOR_UPDATED,function(a,b){g()});else if("ps"===r)ka=new d.PropSetEditor(f),ka.eventBind(d.EVT_PS_EDITOR_UPDATED,function(a,b){g()});else if("check"===r)h.innerHTML=WAVE.strHTMLTemplate("<input id='@id@' @disabled@ @readonly@ type='checkbox' placeholder='@plh@' title='@plh@' />",{id:S,disabled:ga,readonly:O,plh:m,value:WAVE.strDefault(p)}),q=WAVE.id(S),
q.checked=WAVE.strAsBool(p,!1),q.onclick=function(a){g()};else if("multiple"===r){f="";for(aa in v)q=S+"_+ "+aa,f+=WAVE.strHTMLTemplate("<label for='@id@'>@name@</label>",{id:q,name:WAVE.strDefault(v[aa],aa)}),f+=WAVE.strHTMLTemplate("<input type='checkbox' @checked@ name='@name@' value='@value@' id='@id@' @disabled@ @readonly@/>",{checked:WAVE.isArray(p)&&WAVE.inArray(p,aa)?"checked='checked'":"",name:S,value:aa,id:q,disabled:ga,readonly:O});h.innerHTML=f;Z=document.getElementsByName(S);z=Z.length;
for(T=0;T<z;T++)Z[T].onclick=g}else if("radio"===r){f="";for(aa in v)q=S+"_+ "+aa,f+=WAVE.strHTMLTemplate("<label for='@id@'>@name@</label>",{id:q,name:WAVE.strDefault(v[aa],aa)}),f+=WAVE.strHTMLTemplate("<input type='radio' @checked@ name='@name@' value='@value@' id='@id@' @disabled@ @readonly@/>",{checked:p===aa?"checked='checked'":"",name:S,value:aa,id:q,disabled:ga,readonly:O});h.innerHTML=f;Z=document.getElementsByName(S);z=Z.length;for(T=0;T<z;T++)Z[T].onclick=g}else if("combo"===r){f="<select id='@id@' @disabled@ @readonly@>";
WAVE.strEmpty(q)&&(f+="<option value=''></option>");for(aa in v)f+=WAVE.strHTMLTemplate("<option @selected@ value='@value@'>@text@</option>",{selected:p===aa?"selected":"",value:aa,text:WAVE.strDefault(v[aa],aa)});h.innerHTML=WAVE.strHTMLTemplate(f+"</select>",{id:S,name:WAVE.strDefault(m,aa),disabled:ga,readonly:H?"disabled":""});!WAVE.strEmpty(q)&&WAVE.strEmpty(k[a])&&(k[a]=q);WAVE.id(S).onchange=function(a){g()}}else"text"===r&&(h.innerHTML=WAVE.strHTMLTemplate("<input id='@id@' @disabled@ @readonly@ type='text' placeholder='@plh@' title='@plh@' value='@value@'/>",
{id:S,disabled:ga,readonly:O,plh:m,value:WAVE.strDefault(p)}),WAVE.id(S).onchange=function(a){g()});qa()},A=WAVE.get(a,"btnClasses",{});A.addBtnCls=WAVE.strDefault(A.addBtnCls,d.CLS_PS_BTN_ADD);A.delBtnCls=WAVE.strDefault(A.delBtnCls,d.CLS_PS_BTN_DEL);A.rawBtnCls=WAVE.strDefault(A.rawBtnCls,d.CLS_PS_BTN_RAW);A.clearBtnCls=WAVE.strDefault(A.clearBtnCls,d.CLS_PS_BTN_CLEAR);A.modalBtnCls=WAVE.strDefault(A.modalBtnCls,"");this.content=function(a,b){if("undefined"===typeof a)return WAVE.empty(k)?"":JSON.stringify(k,
null,2);var c=WAVE.tryParseJSON(a);c.ok&&(k=c.obj,""!==L&&(WAVE.id(E.outputHiddenId).value=e.content()),e.eventInvoke(d.EVT_OBJECT_EDITOR_UPDATED,k),!0===b&&g());return a};this.jsonContent=function(){return k};this.maxLength=function(){return x};this.DIV=function(){return q};this.validate=function(){var a=[],b=!0,c;for(c in y){var g=y[c](),b=b&&g.ok;a.push(g)}return{ok:b,result:a}};this.validators=function(){return y};var T="<div class='@divCLS@' id='@divId@'></div>"+(!v||t||u?"":"<input type='button' id='@BtnId@' class='@BtnCls@' value='@delText@'/>")+
"<div class='@arrSep@'></div>";g()};var O=0;d.Tabs=function(a){function b(a){for(var c=null,g=0;g<p.length;g++){var d=p[g];d.name()===a?(c=a,d.activate()):d.deactivate()}return c}function c(a){for(var b=0;b<p.length;b++)if(p[b].name()===a)return p[b];return null}if("undefined"===typeof a||null===a||"undefined"===typeof a.DIV||null===a.DIV)throw"Tabs.ctor(init.DIV)";var g=this;WAVE.extend(g,WAVE.EventManager);O++;var f="wvTabs_"+O,e=a.DIV,h=WAVE.styleOf(e,"display"),q=WAVE.strAsBool(a.unswitchable,
!1),r=WAVE.strAsBool(a.parse,!1),p=WAVE.isArray(a.tabs)?a.tabs:[],l=0,m=function(a){l++;a=WAVE.isObject(a)?a:{};var b=this,c=WAVE.strDefault(a.title,l.toString()),q=WAVE.strDefault(a.content),r=WAVE.strAsBool(a.isHtml,!0),m=WAVE.strAsBool(a.isActive,!1),t=WAVE.strDefault(a.id,f+"_"+l),u=WAVE.strDefault(a.name,l.toString()),D=WAVE.strAsBool(a.visible,!0),n=WAVE.strDefault(a.cls),v=WAVE.get(a,"cont",null),w=WAVE.get(a,"li",null),A;this.build=function(a,b){a&&(null===w&&(WAVE.id(k.ulTabsId).insertAdjacentHTML("beforeend",
"<li id='"+t+"'></li>"),w=WAVE.id(t)),w.innerText=c,w.onclick=function(){g.tabActive(u)},b&&(A=WAVE.styleOf(w,"display")));if(null===v){var f="content_"+t;WAVE.id(k.divContentContId).insertAdjacentHTML("beforeend","<div id='"+f+"' class='"+d.CLS_TABS_CONTENT_DIV+" "+n+"'></div>");v=WAVE.id(f);r?v.innerHTML=q:v.innerText=q}w.style.display=D?A:"none";WAVE.addClass(v,D&&m?d.CLS_TABS_CONTENT_DIV_SHOWN:d.CLS_TABS_CONTENT_DIV_HIDDEN);WAVE.removeClass(v,D&&m?d.CLS_TABS_CONTENT_DIV_HIDDEN:d.CLS_TABS_CONTENT_DIV_SHOWN)};
this.activate=function(){m=!0;WAVE.addClass(v,d.CLS_TABS_CONTENT_DIV_SHOWN);WAVE.removeClass(v,d.CLS_TABS_CONTENT_DIV_HIDDEN);WAVE.addClass(w,d.CLS_TABS_ACTIVE_TAB)};this.deactivate=function(){m=!1;WAVE.addClass(v,d.CLS_TABS_CONTENT_DIV_HIDDEN);WAVE.removeClass(v,d.CLS_TABS_CONTENT_DIV_SHOWN);WAVE.removeClass(w,d.CLS_TABS_ACTIVE_TAB)};this.destroy=function(){return WAVE.removeElem(v.id)&&WAVE.removeElem(w.id)};this.name=function(){return u};this.tab=function(){return w};this.cont=function(){return v};
this.isActive=function(a){if("undefined"===typeof a||null===a)return m;m=a};this.content=function(a){if("undefined"===typeof a||null===a)return q;q=a;r?v.innerHTML=q:v.innerText=q};this.title=function(a){if("undefined"===typeof a||null===a)return c;c=a;w.innerText=c};this.visible=function(a){if("undefined"===typeof a||null===a)return D;D=!0===a;b.build(!1,!0);a=!0;for(var c=0,d=p.length;c<d;c++){var f=p[c];f.visible()&&p[c].name()!==u&&(m&&!D&&g.tabActive(f.name()),a=!1)}a?(h=WAVE.styleOf(e,"display"),
e.style.display="none"):e.style.display=h};this.titleCtrl=function(){return w};this.contentCtrl=function(){return v};return b};for(a=0;a<p.length;a++)p[a]=new m(p[a]);var k={divTabsContId:"tabs_cont_"+f,divContentContId:"content_cont_"+f,ulTabsId:"ul_tabs_ "+f};this.DIV=function(){return e};this.tabs=function(){return p};this.unswitchable=function(a){if("undefined"===typeof a)return q;q=!0===a;for(var b=0;b<p.length;b++){var c=p[b];q?p[b].isActive()||(c.tab().className+=" "+d.CLS_TABS_LI_DISABLED):
WAVE.removeClass(c.tab(),d.CLS_TABS_LI_DISABLED)}return a};this.tabByName=function(a){return"undefined"===typeof a||null===a?null:c(a)};this.tabAdd=function(a){var b={phase:d.EVT_PHASE_BEFORE,tabControl:g,tabInit:a,abort:!1};g.eventInvoke(d.EVT_TABS_TAB_ADD,b);if(!0!==b.abort)return a=new m(a),b=c(a.name()),null!==b&&(b.destroy(),p.splice(p.indexOf(b),1)),p.push(a),a.build(!0,!1),(a.isActive()||null===g.tabActive())&&g.tabActive(a.name()),g.eventInvoke(d.EVT_TABS_TAB_ADD,{phase:d.EVT_PHASE_AFTER,
tabControl:g,tab:a}),a};this.tabDelete=function(a){if("undefined"===typeof a||null===a)return!1;for(var c=!1,f=0;f<p.length;f++)if(p[f].name()===a){var e=p[f],h={phase:d.EVT_PHASE_BEFORE,tabControl:g,tab:e,abort:!1};g.eventInvoke(d.EVT_TABS_TAB_REMOVE,h);if(!0===h.abort)return c;c=e.destroy();p.splice(f,1);e.isActive()&&0<p.length&&b(p[0].name());break}g.eventInvoke(d.EVT_TABS_TAB_REMOVE,{phase:d.EVT_PHASE_AFTER,tabControl:g,name:a,ok:c});return c};this.tabActive=function(a){var c=null;if("undefined"===
typeof a||null===a)for(a=0;a<p.length;a++){if(p[a].isActive()){c=p[a].name();break}}else q||g.tabActive()===a||(c=b(a),g.eventInvoke(d.EVT_TABS_TAB_CHANGED,a));return c};this.tabContent=function(a,b){if("undefined"===typeof a||null===a||WAVE.strEmpty(a))return null;var g=c(a);if(null===g)return null;if("undefined"===typeof b)return g.content();g.content(b);return b};this.tabTitle=function(a,b){if("undefined"===typeof a||null===a||WAVE.strEmpty(a))return null;var g=c(a);if(null===g)return null;if("undefined"===
typeof b)return g.title();g.title(b);return b};this.tabVisible=function(a,b){if("undefined"===typeof a||null===a||WAVE.strEmpty(a))return null;var g=c(a);if(null===g)return null;if("undefined"===typeof b)return g.visible();b=!0===b;g.visible(b);return b};(function(){var a,c,g;if(r){p=[];var f=e.getElementsByTagName("li");a=0;for(c=f.length;a<c;a++){var h=f[a];g={};g.title=h.innerText;g.name=WAVE.strDefault(h.getAttribute("data-tabs-name"));WAVE.strEmpty(g.name)&&(g.name=null);g.isHtml=WAVE.strAsBool(h.getAttribute("data-tabs-isHtml"),
!0);g.isActive=WAVE.strAsBool(h.getAttribute("data-tabs-isActive"),!1);g.visible=WAVE.strAsBool(h.getAttribute("data-tabs-visible"),!0);g.cont=WAVE.id(WAVE.strDefault(h.getAttribute("data-tabs-contId")));g.li=h;p.push(new m(g))}}else e.innerHTML=WAVE.strHTMLTemplate("<div id='@divTabsId@' class='@ulContainer@'><ul id='@ulId@' class='@ulClass@'></ul></div><div id='@divContId@' class='@divClass@'></div>",{divTabsId:k.divTabsContId,divContId:k.divContentContId,ulId:k.ulTabsId,ulClass:d.CLS_TABS_UL,divClass:d.CLS_TABS_CONTENT_CONTAINER,
ulContainer:d.CLS_TABS_UL_CONTAINER});if(0!==p.length){c=null;f=!1;for(a=0;a<p.length;a++)g=p[a],g.isActive()&&g.visible()&&(f?g.isActive(!1):(c=g.name(),f=!0)),g.build(!0,!1);if(!f)for(a=0;a<p.length;){if(p[a].visible()){c=p[a].name();p[a].isActive(!0);break}a++}null!==c&&b(c)}})();return g};var G=0;d.Details=function(a){function b(){Y&&setTimeout(function(){e()},J);T&&(WAVE.addEventHandler(window,"focus",c),setTimeout(function(){WAVE.addEventHandler(window,"mousemove",g)},1));A&&setTimeout(function(){WAVE.addEventHandler(window,
"click",c,!0)},1);U&&setTimeout(function(){WAVE.addEventHandler(window,"scroll",e)},1);O&&setTimeout(function(){WAVE.addEventHandler(window,"resize",e)},1)}function c(a){var b=a.target,g="modal"===P&&null!==K?K.baseDIV():m;if(null!==K&&a.target===K.baseDIV()||!WAVE.isParentOf(g,b))a.preventDefault(),e()}function g(a){a=a.target;WAVE.isParentOf(m,a)||WAVE.isParentOf(l,a)||e()}function f(a){WAVE.strEmpty(k)||(x?l.innerHTML=a:l.innerText=a)}function e(){if(!V){var a={phase:d.EVT_PHASE_BEFORE,abort:!1};
p.eventInvoke(d.EVT_DETAILS_HIDE,a);!0!==a.abort&&(f(k),E&&WAVE.addEventHandler(l,"click",h),F&&WAVE.removeEventHandler(l,"click",e),"modal"===P&&null!==K?K.close():(WAVE.addClass(m,d.CLS_DETAILS_CONTENT_HIDDEN),WAVE.removeClass(m,d.CLS_DETAILS_CONTENT_VISIBLE)),WAVE.removeEventHandler(window,"focus",c),WAVE.removeEventHandler(window,"click",c,!0),WAVE.removeEventHandler(window,"mousemove",g),WAVE.addClass(l,d.CLS_DETAILS_TITLE_HIDDEN),WAVE.removeClass(l,d.CLS_DETAILS_TITLE_SHOWN),setTimeout(function(){V=
!0;p.eventInvoke(d.EVT_DETAILS_HIDE,{phase:d.EVT_PHASE_AFTER})},1))}}function h(){if(V){var a={phase:d.EVT_PHASE_BEFORE,abort:!1};p.eventInvoke(d.EVT_DETAILS_SHOW,a);!0!==a.abort&&(f(t),E&&WAVE.removeEventHandler(l,"click",h),F&&WAVE.addEventHandler(l,"click",e),"modal"===P?(K=new d.Dialog({cls:d.CLS_DETAILS_CONTENT+" "+y,body:u,onShow:function(a){b();WAVE.strEmpty(v)||WAVE.ajaxCall("GET",v,null,function(b){null!==w?(b=w(b),WAVE.strEmpty(b)||a.content(b)):a.content(b)},console.error,console.error,
n,n)},header:z}),m=K.bodyDIV(),WAVE.id(q+"close").onclick=e):(WAVE.removeClass(m,d.CLS_DETAILS_CONTENT_HIDDEN),WAVE.addClass(m,d.CLS_DETAILS_CONTENT_VISIBLE),b()),V=!1,WAVE.addClass(l,d.CLS_DETAILS_TITLE_SHOWN),WAVE.removeClass(l,d.CLS_DETAILS_TITLE_HIDDEN),p.eventInvoke(d.EVT_DETAILS_SHOW,{phase:d.EVT_PHASE_AFTER}))}}if("undefined"===typeof a||null===a)throw"Details.ctor(init)";var p=this;WAVE.extend(p,WAVE.EventManager);var q="wvDetails_"+G++,r,l,m,k=WAVE.strDefault(a.title),t=WAVE.strDefault(a.altTitle,
k),u=WAVE.strDefault(a.content),v=WAVE.strDefault(a.contentUrl),n=WAVE.strDefault(a.contentType),w=WAVE.isFunction(a.loadCallback)?a.loadCallback:null,x=WAVE.strAsBool(a.isTitleHtml,!0),L=WAVE.strAsBool(a.isContentHtml,!0),y=WAVE.strDefault(a.modalCls,d.CLS_DETAILS_MODAL),z="<div class='wvDetailsHeader'>"+WAVE.strDefault(a.modalTitle)+"</div><div class='wvCloseDetails' id='"+q+"close'></div>",E=WAVE.strAsBool(a.showOnClick,!0),C=WAVE.strAsBool(a.showOnFocus,!1),F=WAVE.strAsBool(a.hideOnTitle,!0),
A=WAVE.strAsBool(a.hideOnClick,!0),T=WAVE.strAsBool(a.hideOnFocus,!1),Y=WAVE.strAsBool(a.hideOnTimer,!1),U=WAVE.strAsBool(a.hideOnScroll,!1),O=WAVE.strAsBool(a.hideOnResize,!1),P=WAVE.strDefault(a.mode,"swap"),N=WAVE.tryParseInt(a.timeout),J=N.ok?N.value:0,ba=q+"_title",ca=q+"_content",K=null,V=!1;WAVE.has(a,"DIV")&&(r=WAVE.isString(a.DIV)?WAVE.id(a.DIV):a.DIV);WAVE.has(a,"titleCtrl")&&(l=WAVE.isString(a.titleCtrl)?WAVE.id(a.titleCtrl):a.titleCtrl);WAVE.has(a,"contentCtrl")&&(m=WAVE.isString(a.contentCtrl)?
WAVE.id(a.contentCtrl):a.contentCtrl);this.hide=function(){e()};this.show=function(){h()};this.toggle=function(){V?h():e()};this.content=function(a){if("undefined"===typeof a||null===a)return u;a=u=a;L?m.innerHTML=a:m.innerText=a};(function(){if("undefined"!==typeof r&&null!==r)if(WAVE.addClass(r,d.CLS_DETAILS),"modal"===P)r.innerHTML=WAVE.strHTMLTemplate("<span id='@titleId@' class='@titleClass@' tabindex='0'></span>",{titleId:ba,titleClass:d.CLS_DETAILS_TITLE}),l=WAVE.id(ba),f(k);else{r.innerHTML=
WAVE.strHTMLTemplate("<span id='@titleId@' class='@titleClass@' tabindex='0'></span><div id='@contId@' class='@contClass@'></div>",{titleId:ba,titleClass:d.CLS_DETAILS_TITLE,contId:ca,contClass:d.CLS_DETAILS_CONTENT});l=WAVE.id(ba);m=WAVE.id(ca);var a=u;L?m.innerHTML=a:m.innerText=a}else if(null!==l&&null!==m)WAVE.addClass(l,d.CLS_DETAILS_TITLE),WAVE.addClass(m,d.CLS_DETAILS_CONTENT);else throw"Details.build(unacceptable init)";f(k);E&&WAVE.addEventHandler(l,"click",h);C&&(WAVE.addEventHandler(l,
"mouseover",h),WAVE.addEventHandler(l,"focus",h));e()})();return p};var Y=0;d.ImageView=function(a,b){function c(a){if("undefined"!==typeof a&&(h.clear(!0),null!==a))return WAVE.isObject(a)&&WAVE.has(a,"element")?(a.error||p.appendChild(a.element),g(a)):a=e(a,function(){this.className=d.CLS_IMAGE_VIEW_IMAGE;h.clear()&&p.appendChild(this);g(a)},function(){g(a)},b),a}function g(a){if("undefined"!==typeof p)if(p.className=d.CLS_IMAGE_VIEW,a.error)p.className+=" "+d.CLS_IMAGE_BOX_ERROR;else if(a.load){var b=
f(p),b=b.x/b.y;a=(a.width|0)/(a.height|0);isNaN(a)||(p.className+=" "+(a>=b?d.CLS_IMAGE_BOX_WIDER:d.CLS_IMAGE_BOX_HIGHER))}else p.className+=" "+d.CLS_IMAGE_BOX_LOADING}function f(a){return{x:a.offsetWidth,y:a.offsetHeight}}if("undefined"===typeof a||null===a)a={};WAVE.isString(a)&&(a={DIV:a});if(!WAVE.has(a,"DIV"))throw"ImageView.ctor(init.thumbnails)";Y++;var h=this;WAVE.extend(h,WAVE.EventManager);var p=function(a){var b=document.createElement("div");b.className=d.CLS_IMAGE_VIEW;a.appendChild(b);
y(b,function(a,c){var g,e;h.image();g=b;var p=0;for(e=0;null!==g;)p+=g.offsetLeft,e+=g.offsetTop,g=g.offsetParent;g=p;var p=f(b),r=a-g-p.x/2,l=c-e-p.y/2,p=f(q.element),r=r*q.width/p.x,l=l*q.height/p.y;if(q.width>p.x||q.height>p.y)b.className+=" "+d.CLS_IMAGE_VIEW_ZOOM,p=b.scrollHeight,b.scrollLeft=r+b.scrollWidth/2-(a-g),b.scrollTop=l+p/2-(c-e)},void 0,g,!0);return b}(WAVE.isString(a.DIV)?WAVE.id(a.DIV):a.DIV),q;h.image=function(a){"undefined"!==typeof a&&(q=c(a));return q};h.clear=function(a){a&&
(p.innerHTML="");return""===p.innerHTML};h.image(a.image);window.addEventListener("resize",function(){g(h.image()||{})},!1);return h};var W=0;d.Gallery=function(a){function b(a){var d;if(c(a.id))d=n[a.id],d.update(a);else{d=new l.Item(a,l,t);d.order=a.order|0;a:{a=v;for(var f=d,e=g,h=0,p=a.length,q=-1,r=0;h<p;)if(q=(h+p)/2|0,r=e(a[q],f),0>r)h=q+1;else if(0<r)p=q;else{for(;q<p&&0===e(a[q],f);)q++;a=q;break a}a=h}k.insertBefore(d.element(),WAVE.has(v,a)?v[a].element():null);v.splice(a,0,d);n[d.id()]=
d}return d}function c(a){return"undefined"===typeof a?!1:WAVE.has(n,a)}function g(a,b){return a.order-b.order}function f(a){return{x:a.offsetWidth,y:a.offsetHeight}}function h(a){function b(a){return a}var c=Date.now(),g=setInterval(function(){var d=(Date.now()-c)/(+a.duration||1E3);1<d&&(d=1);var f=a.step((a.delta||b)(d))||!0;1!==d&&f||clearInterval(g)},+a.delay||10)}function p(a,b,c,g,d){var f=a.scrollLeft,e=a.scrollTop;h({duration:c,delta:g,step:function(c){a.scrollLeft=f+b.x*c;a.scrollTop=e+b.y*
c;d&&d.call(a,c)}})}function q(a,b,c){return function(){var g={evt:b,phase:d.EVT_PHASE_BEFORE,args:arguments,abort:!1};a.eventInvoke(b,g);if(!0!==g.abort){var f=c.apply(a,arguments);g.result=f;g.phase=d.EVT_PHASE_AFTER;delete g.abort;a.eventInvoke(b,g);return f}}}if("undefined"===typeof a||null===a)a={};WAVE.isString(a)&&(a={thumbnails:a});if(!WAVE.has(a,"thumbnails"))throw"Gallery.ctor(init.thumbnails)";var r=WAVE.has(a,"urls");if(r&&!WAVE.isObject(a.urls))throw"Gallery.ctor(init.urls)";W++;var l=
this;WAVE.extend(l,WAVE.EventManager);l.urls=r?a.urls:{};var m,k=function(a){function b(){g.className=d.CLS_GALLERY_PREV+(0===k.scrollLeft&&0===k.scrollTop?" "+d.CLS_GALLERY_DISABLED:"");e.className=d.CLS_GALLERY_NEXT+(k.scrollLeft+k.clientWidth===k.scrollWidth&&k.scrollTop+k.clientHeight===k.scrollHeight?" "+d.CLS_GALLERY_DISABLED:"")}var c=document.createElement("ul"),g=document.createElement("div"),e=document.createElement("div");c.className=d.CLS_GALLERY_LIST;g.className=d.CLS_GALLERY_PREV;e.className=
d.CLS_GALLERY_NEXT;g.onclick=function(a){a.preventDefault();a=f(c.firstChild);p(c,{x:-a.x,y:-a.y},400,void 0,b)};e.onclick=function(a){a.preventDefault();a=f(c.firstChild);p(c,a,400,void 0,b)};y(c,void 0,b,b);a.appendChild(g);a.appendChild(c);a.appendChild(e);window.addEventListener("resize",b,!1);m=b;return c}(WAVE.isString(a.thumbnails)?WAVE.id(a.thumbnails):a.thumbnails),t=WAVE.isString(a.preview)?new d.ImageView(a.preview,l.urls):a.preview,u,v=[],n={},w=0;l.Item=function(a,b,c){function g(a){t.innerHTML=
"";t.className=d.CLS_GALLERY_THUMBNAIL+" "+d.CLS_IMAGE_BOX_LOADING;l=e(a,function(){this.className=d.CLS_GALLERY_IMAGE;this.id=d.CLS_GALLERY_IMAGE+q.id();t.appendChild(this);t.className=d.CLS_GALLERY_THUMBNAIL+" "+(this.width>=this.height?d.CLS_IMAGE_BOX_WIDER:d.CLS_IMAGE_BOX_HIGHER)},function(){t.className=d.CLS_GALLERY_THUMBNAIL+" "+d.CLS_IMAGE_BOX_ERROR},b.urls);m()}var f=w++,h=WAVE.isObject(a)&&WAVE.has(a,"id")?a.id:f;a.id=h;var p={},q=this;WAVE.extend(q,WAVE.EventManager);var r,l,k=document.createElement("li"),
t=document.createElement("div"),u=document.createElement("div");k.className=d.CLS_GALLERY_ITEM;u.className=d.CLS_GALLERY_CONTENT;t.className=d.CLS_GALLERY_THUMBNAIL;k.appendChild(t);k.appendChild(u);k.onclick=function(){b.current(h)};q.id=function(){return h};q.title=function(a){"undefined"!==typeof a&&p.title!==a&&(a=p.title=a,t.title=a);return WAVE.strDefault(p.title,h)};q.content=function(a,b){if("undefined"!==typeof a&&(p.content!==a||!!p.isText!==!!b)){var c=p.content=a;(p.isText=!!b)?u.innerText=
c:u.innerHTML=c}return WAVE.strDefault(p.content)};q.isText=function(){return!!p.isText};q.image=function(a){if("undefined"!==typeof a&&!z(p.image,a)){a=p.image=a;var b=!1;"undefined"!==typeof r&&(b=r===c.image(),WAVE.has(r,"free")&&r.free());r=a;b&&q.show()}return r};q.thumb=function(a){"undefined"===typeof a||z(p.thumb,a)||g(p.thumb=a);return l};q.data=function(a){"undefined"!==typeof a&&(p.data=a);return p.data};q.show=function(){r=c.image(r)};q.update=function(a){if(!WAVE.isObject(a)||WAVE.has(a,
"url"))a={image:a};if(!WAVE.has(a,"image"))throw"Gallery.Item.update(init.image)";if(a.id!==h)throw"Gallery.Item.update(init.id)";q.image(a.image);q.thumb(a.thumb||a.image);q.title(a.title);q.content(a.content,a.isText);q.data(a.data)};q.free=function(){k.parentNode&&k.parentNode.removeChild(k);c.image()===r&&r.element.parentNode&&r.element.parentNode.removeChild(r.element)};q.element=function(){return k};q.update(a);return q};var x=q(l,d.EVT_GALLERY_CHANGE,function(a){if(c(a))return a=n[a],"undefined"!==
typeof u&&(u.element().className=d.CLS_GALLERY_ITEM),a.element().className=d.CLS_GALLERY_ITEM+" "+d.CLS_GALLERY_SELECTED,a.show(),a});l.current=function(a){"undefined"!==typeof a&&(a=x(a),"undefined"!==typeof a&&(u=a));if("undefined"!==typeof u)return u.id()};l.has=c;l.get=function(a){return n[a]};var G=q(l,d.EVT_GALLERY_REMOVE,function(a){if(!c(a))return!0;n[a].free();v=v.filter(function(b){return b.id()!==a});delete n[a];return!0});l.remove=function(a){return c(a)?!!G(a):!0};l.images=function(){return v};
l.update=q(l,d.EVT_GALLERY_ADD,b);WAVE.each(a.images,b);m();return l};d.GallerySimple=function(a){if("undefined"===typeof a||null===a||"undefined"===typeof a.DIV||null===a.DIV)throw"GallerySimple.ctor(init.DIV)";var b=WAVE.isString(a.DIV)?WAVE.id(a.DIV):a.DIV,c=document.createElement("div");c.className=d.CLS_GALLERY_SIMPLE_PREVIEW;a.preview=new d.ImageView({DIV:c},a.urls);a.thumbnails=document.createElement("div");a.thumbnails.className=d.CLS_GALLERY_SIMPLE_THUMBNAILS;b.appendChild(a.thumbnails);
b.appendChild(c);return d.Gallery.call(this,a)};var P=0;d.ChainSelector=function(a){function b(a){a=u.indexOf(a.target.parentNode);a=e().slice(0,a+1);f(a)}function c(a,g){if(t||k)return!1;var d=u.length,f=n.selectBodyId+d.toString(),e=WAVE.strHTMLTemplate("<div id='@divComboWrapId@' class='@divComboWrapCls@' @disabled@ @readonly@><select id='@selectBodyId@'><option value=''></option>",{divComboWrapId:n.divComboWrapId+d.toString(),divComboWrapCls:v.divComboWrapCls,selectBodyId:f,disabled:t?"":"disabled",
readonly:k?"readonly":""});a.wEach(function(a){e+=WAVE.strHTMLTemplate("<option value='@value@' @selected@>@descr@</option>",{value:a.id,selected:WAVE.strSame(a.id,g)?"selected":"",descr:a.val})});var e=e+WAVE.strHTMLTemplate("</select><div id='@divArrowId@' class='@divArrowCls@'></div></div>",{divArrowId:n.divArrowId+d.toString(),divArrowCls:v.divArrowCls}),h=WAVE.id(n.divInfoId),p=document.createElement("div");p.innerHTML=e;p=p.firstChild;q.insertBefore(p,h);u[d]=p;WAVE.addEventHandler(WAVE.id(f),
"change",b);return p}function g(a){if(t||k)return!1;for(var c=0;c<a;c++){var d=u.pop();if(!WAVE.exists(d))break;WAVE.removeEventHandler(WAVE.id(n.selectBodyId+u.length.toString()),"change",b);q.removeChild(d)}}function f(a){if(t||k)return!1;WAVE.exists(a)||(a=[""]);WAVE.isString(a)&&(a=a.split("."));if(!WAVE.isArray(a))return!1;var b=WAVE.arrayWalkable(l),e=null,q,m,v=!0;g(u.length-a.length);0>=u.length&&c(b,"");for(var w in a){q=a[w];if(WAVE.strSame(q,"")){g(u.length-w);e=b;break}if(null===b){v=
!1;g(u.length-w);break}e=b.wFirst(function(a){return WAVE.strSame(a.id,q)});if(null===e){v=!1;g(u.length-w);e=b;break}m=e;e=WAVE.exists(m.children)?WAVE.arrayWalkable(m.children):null;WAVE.exists(u[w])?(b=WAVE.id(n.selectBodyId+w.toString()),WAVE.strSame(b.value,q)||(g(u.length-w-1),b.value=q)):(g(u.length-w),c(b,q));b=e}WAVE.exists(e)&&c(e,"");a=WAVE.id(n.divNameId);w=WAVE.exists(m)?WAVE.strDefault(m.name,""):"";a.innerText=WAVE.strSame(w,"")?"":"Name: "+w;m=WAVE.exists(m)?WAVE.strDefault(m.descr,
""):"";WAVE.id(n.divDescrId).innerText=WAVE.strSame(m,"")?"":"Description: "+m;null!==r&&(WAVE.id(n.outputHiddenId).value=p.value());p.eventInvoke(d.EVT_CHAIN_SELECTOR_UPDATED,h());return v}function e(){var a=[],b;for(b in u){var c=WAVE.id(n.selectBodyId+b.toString());a.push(c.value)}return a}function h(){var a=e().join(".");0<a.length&&WAVE.strSame(a[a.length-1],".")&&(a=a.substring(0,a.length-1));return a}if(!WAVE.exists(a))throw"ChainSelector.ctor(init=null)";var p=this;WAVE.extend(p,WAVE.EventManager);
P++;var q;WAVE.has(a,"DIV")&&(q=WAVE.isString(a.DIV)?WAVE.id(a.DIV):a.DIV);var r=WAVE.strDefault(a.outputFormFieldName,null);WAVE.strDefault(a.description);var l=WAVE.has(a,"values")&&WAVE.exists(a.values)&&WAVE.isArray(a.values)?a.values:[],m=WAVE.strDefault(a.path,""),k=WAVE.strAsBool(a.readonly,!1),t=WAVE.strAsBool(a.disabled,!1),u=[],v=WAVE.get(a,"classes",{});v.divWrapCls=WAVE.strDefault(v.divWrapCls,d.CLS_CHAIN_SELECTOR);v.divInfoCls=WAVE.strDefault(v.divInfoCls,d.CLS_CS_DIV_INFO);v.divNameCls=
WAVE.strDefault(v.divNameCls,d.CLS_CS_DIV_NAME);v.divDescrCls=WAVE.strDefault(v.divDescrCls,d.CLS_CS_DIV_DESCR);v.divComboWrapCls=WAVE.strDefault(v.divComboWrapCls,d.CLS_CS_DIV_COMBO_WRAP);v.divArrowCls=WAVE.strDefault(v.divArrowCls,d.CLS_CS_DIV_ARROW);a="cs_"+P;var n={divInfoId:"divInfo_"+a,divNameId:"divName_"+a,divDescrId:"divDescr_"+a,divComboWrapId:"divComboWrap_"+a+"_",selectBodyId:"selectBodyId"+a+"_",divArrowId:"divArrow_"+a+"_",outputHiddenId:"hidden_"+a};this.navigate=function(a){return f(a)};
this.path=function(){return e()};this.value=function(){return h()};(function(){if(WAVE.exists(q)){WAVE.addClass(q,v.divWrapCls);var a=WAVE.strHTMLTemplate("<input id='@outerId@' type='hidden' name='@outerName@'/><div id='@divInfoId@' class='@divInfoCls@'><div id='@divNameId@' class='@divNameCls@'></div><div id='@divDescrId@' class='@divDescrCls@'></div></div>",{outerId:n.outputHiddenId,outerName:WAVE.strDefault(r,""),divInfoId:n.divInfoId,divInfoCls:v.divInfoCls,divNameId:n.divNameId,divNameCls:v.divNameCls,
divDescrId:n.divDescrId,divDescrCls:v.divDescrCls});q.innerHTML=a;f(m)}})();return p};var ba=0;d.Select=function(a,b){function c(a,b,g){a=document.createElement(a);a.id=b;WAVE.strEmpty(g)||(a.className=g);return a}function g(){var a={phase:d.EVT_PHASE_BEFORE,sender:w,abort:!1,refresh:!0};w.eventInvoke(d.EVT_SELECT_CLOSE,a);!0!==a.abort&&(null!==J&&(clearTimeout(J),J=null),!0===a.refresh&&(ta([K],""),A.value=""),W=!1,WAVE.addClass(U,d.CLS_SELECT_DROPDOWN_HIDDEN),WAVE.removeClass(U,d.CLS_SELECT_DROPDOWN_SHOWN),
WAVE.removeEventHandler(window,"click",h),a.result=!1,a.phase=d.EVT_PHASE_AFTER,delete a.abort,w.eventInvoke(d.EVT_SELECT_CLOSE,a))}function f(){var a={phase:d.EVT_PHASE_BEFORE,sender:w,abort:!1};w.eventInvoke(d.EVT_SELECT_OPEN,a);!0!==a.abort&&(W=!0,WAVE.addClass(U,d.CLS_SELECT_DROPDOWN_SHOWN),WAVE.removeClass(U,d.CLS_SELECT_DROPDOWN_HIDDEN),WAVE.addEventHandler(window,"click",h),a.result=!0,a.phase=d.EVT_PHASE_AFTER,delete a.abort,w.eventInvoke(d.EVT_SELECT_OPEN,a))}function e(a){if("undefined"===
typeof a||null===a)a=!W;!0===a?f():g()}function h(a){WAVE.isParentOf(Y,a.target)||g()}function p(a,b){return-1<a.value().toUpperCase().indexOf(b.toUpperCase())?!0:!1}function q(a,b){for(var c=0;c<a.length;c++){var g=a[c];if(null!==g){var d=g.children();if(0!==d.length||null!==g.value())0<d.length?q(d,b):g.visible(p(g,b))}}}function l(a){var b={phase:d.EVT_PHASE_BEFORE,sender:w,abort:!1};w.eventInvoke(d.EVT_SELECT_UNSELECT,b);if(!0!==b.abort){if(ca===d.SELECT_MODES.Single)V={},R=[];else{delete V[a.id()];
var c=R.indexOf(a.id());-1<c&&R.splice(c,1)}a.destroyView();O.value=w.value();b.result=O.value;b.phase=d.EVT_PHASE_AFTER;delete b.abort;w.eventInvoke(d.EVT_SELECT_UNSELECT,b)}}function m(a){var b={phase:d.EVT_PHASE_BEFORE,sender:w,abort:!1};w.eventInvoke(d.EVT_SELECT_SELECT,b);if(!0!==b.abort){if(ca===d.SELECT_MODES.Single&&0<R.length&&R[0]!==a.id()){var c=V[R[0]];c.isSelected(!1);c.destroyView();V={};R=[]}V[a.id()]=a;R.push(a.id());a.renderSelection(C,function(){a.isSelected(!1);l(a)});O.value=w.value();
b.result=O.value;b.phase=d.EVT_PHASE_AFTER;delete b.abort;w.eventInvoke(d.EVT_SELECT_SELECT,b)}}function k(a,b){if(b.phase!==d.EVT_PHASE_BEFORE){var c=b.sender.isSelected();ca===d.SELECT_MODES.Single?!c&&b.sender.isSelected(!0)&&(e(),m(b.sender)):c?b.sender.isSelected(!1)&&l(b.sender):b.sender.isSelected(!0)&&m(b.sender)}}function t(){K.eventUnbind(d.EVT_SELECT_CHOICE_CLICK,k);K.destroy();K=null}function u(a){var b="undefined"===typeof a||null===a;b&&null!==K?t():(R=[],V={},null!==K&&t(),b||(K=new x({data:a,
DIV:N,builder:G,disable:ia}),K.eventBind(d.EVT_SELECT_CHOICE_CLICK,k)))}function v(a,b){var c=a.children(),g=c.length;if(0===g){if(a.trySetValue(b))return m(a),!0}else{for(var d=!1,f=0;f<g;f++)var e=v(c[f],b),d=d&&e;return d}}if(!WAVE.exists(a))throw"Select.ctor(init=null)";if(WAVE.strEmpty(a.DIV))throw"Select.ctor(init.DIV=null)";var n=WAVE.isString(a.DIV)?WAVE.id(a.DIV):a.DIV;if(null===n)throw"Select.ctor(DIV=null)";var w=this,x=WAVE.isFunction(b)?b:d.Choice,G=WAVE.isFunction(a.choiceBuilder)?a.choiceBuilder:
null,y=null,z=WAVE.strDefault(a.formName),Y=null,E=null,C=null,F=null,A=null,U=null,O=null,P=null,N=null,W=!1,sa=WAVE.strAsBool(a.autocomlete,!0),J=null,ia=WAVE.strAsBool(a.disable),ca=d.SELECT_MODES.Multi===a.mode?d.SELECT_MODES.Multi:d.SELECT_MODES.Single,K=null,V={},R=[];WAVE.isFunction(a.match);var ta=WAVE.isFunction(a.filter)?a.filter:q,Na=WAVE.isFunction(a.updateData)?a.updateData:u,xa=[9,16,17,18,19,20,27,37,38,39,40],ha="select_"+ba++,ya=ha+"_container",da=ha+"_combobox",Fa=ha+"_display",
Ga=ha+"_autocomplete",Ha=ha+"_dropdown",Oa=ha+"_selection",Pa=ha+"_autoContainer",Qa=ha+"_choicesContainer";WAVE.extend(w,WAVE.EventManager);w.selected=function(){return V};w.mode=function(){return ca};w.value=function(a){if("undefined"===typeof a){a="";for(var b in V)a+=V[b].key()+";";return a.slice(0,-1)}b=a.toString();if(null!==K){K.resetSelection();a=0;for(var c=R.length;a<c;a++)V[R[a]].destroyView();R=[];V={};if(ca===d.SELECT_MODES.Single)v(K,b);else for(b=b.split(";"),a=0,c=b.length;a<c;a++)v(K,
b[a])}};w.data=function(a){if("undefined"===typeof a)return a;y=a;u(y)};w.updateData=function(a){Na(a)};w.filter=function(a){ta([K],"undefined"===typeof a?A.value:a)};w.hasChoice=function(){return null!==K};w.latchAllEvents=function(a){w.eventInvocationSuspendCount+=a;null!==K&&K.latchAllEvents(a)};(function(){var b=a.data;if("undefined"!==typeof b&&null!==b)if(WAVE.isString(b))if(b=WAVE.tryParseJSON(b),b.ok)y=b.obj;else throw"Select.ctor(init.data invalid JSON)";else y=a.data})();(function(){Y=c("div",
ya,d.CLS_SELECT_CONTAINER+" "+(ca===d.SELECT_MODES.Multi?d.CLS_SELECT_MODE_MULTI:d.CLS_SELECT_MODE_SINGLE));n.appendChild(Y);O=c("input",Oa);O.type="hidden";Y.appendChild(O);WAVE.strEmpty(z)||(O.name=z);E=c("div",da,d.CLS_SELECT_COMBOBOX);Y.appendChild(E);C=c("div",Fa,d.CLS_SELECT_DISPLAY);E.appendChild(C);F=document.createElement("div");F.className=d.CLS_SELECT_ARROW;E.appendChild(F);WAVE.addEventHandler(F,"click",function(){e()});U=c("div",Ha,d.CLS_SELECT_DROPDOWN+" "+d.CLS_SELECT_DROPDOWN_HIDDEN);
U.style.zIndex=5E5+r.length+1;Y.appendChild(U);P=c("div",Pa,d.CLS_SELECT_AUTO_CONTAINER);U.appendChild(P);N=c("div",Qa,d.CLS_SELECT_CHOICES_CONTAINER);U.appendChild(N);sa&&(A=c("input",Ga,d.CLS_SELECT_AUTOCOMPETE),A.placeholder="Start enter..",ca===d.SELECT_MODES.Single?P.appendChild(A):E.appendChild(A),WAVE.addEventHandler(A,"keyup",function(a){-1<xa.indexOf(a.keyCode)||(null!==J&&(clearTimeout(J),J=null),J=setTimeout(function(){ta([K],A.value);W||f()},800))}),WAVE.addEventHandler(A,"click",f));
u(y)})();return w};d.CLS_SELECT_CHOICE="wvChoice";d.CLS_SELECT_CHOICE_DISABLED="wvChoiceDisabled";d.CLS_SELECT_CHOICE_SELECTED="wvSelected";d.CLS_SELECT_CHOICE_PARENT="wvChoiceParent";d.CLS_SELECT_CHOICE_PARENT_LABELED="wvChoiceParentLabeled";d.CLS_SELECT_CHOICE_LABEL="wvChoiceLabel";d.CLS_SELECT_CHOICE_VALUE_BOX="wvChoiceValueBox";d.CLS_SELECT_CHOICE_UNSELECT="wvChoiseUnselect";d.EVT_SELECT_CHOICE_SELECTED="wv-choice-selected";d.EVT_SELECT_CHOICE_UNSELECTED="wv-choice-unselected";d.EVT_SELECT_CHOICE_CLICK=
"wv-choise-choice-click";var N=0;d.Choice=function(a){function b(){if(!G)return!1;var a={phase:d.EVT_PHASE_BEFORE,sender:u,abort:!1};u.eventInvoke(d.EVT_SELECT_CHOICE_UNSELECTED,a);if(!0===a.abort)return!1;G=!1;WAVE.removeClass(A,d.CLS_SELECT_CHOICE_SELECTED);a.result=!1;a.phase=d.EVT_PHASE_AFTER;delete a.abort;u.eventInvoke(d.EVT_SELECT_CHOICE_UNSELECTED,a);return!0}function c(a,g){var f;if(0<n.length){for(var e=0,h=n.length;e<h;e++)f=WAVE.strEmpty(g)?f&&n[e].isSelected(a):f||n[e].trySetValue(g);
return f}if(!0!==a&&WAVE.strEmpty(g))return b();G?f=!1:(f={phase:d.EVT_PHASE_BEFORE,sender:u,abort:!1},u.eventInvoke(d.EVT_SELECT_CHOICE_SELECTED,f),!0===f.abort?f=!1:((G="undefined"===typeof g?!0:Y===g)&&WAVE.addClass(A,d.CLS_SELECT_CHOICE_SELECTED),f.result=G,f.phase=d.EVT_PHASE_AFTER,delete f.abort,u.eventInvoke(d.EVT_SELECT_CHOICE_SELECTED,f),f=G));return f}function g(a,b){if(!0!==w){var c={phase:d.EVT_PHASE_BEFORE,sender:u,abort:!1};u.eventInvoke(d.EVT_SELECT_CHOICE_CLICK,c);!0!==c.abort&&(c.phase=
d.EVT_PHASE_AFTER,delete c.abort,u.eventInvoke(d.EVT_SELECT_CHOICE_CLICK,c))}}function f(a,b){u.eventInvoke(d.EVT_SELECT_CHOICE_SELECTED,b)}function e(a,b){u.eventInvoke(d.EVT_SELECT_CHOICE_UNSELECTED,b)}function h(a,b){u.eventInvoke(d.EVT_SELECT_CHOICE_CLICK,b)}function p(a){a.eventBind(d.EVT_SELECT_CHOICE_SELECTED,f);a.eventBind(d.EVT_SELECT_CHOICE_UNSELECTED,e);a.eventBind(d.EVT_SELECT_CHOICE_CLICK,h);n.push(a)}function q(a,b){var c=new d.Choice({data:a,DIV:b,builder:sa});p(c)}function r(a){na(a,
u)}function l(){A=document.createElement("div");A.id=J;v.appendChild(A);WAVE.addEventHandler(A,"click",r);A.className=w?d.CLS_SELECT_CHOICE_DISABLED:d.CLS_SELECT_CHOICE;null!==ba&&WAVE.addClass(A,ba)}function m(a,b){l();C=A.innerHTML=b;Y=a}function k(a,b){if("undefined"!==typeof a&&null!==a)if(WAVE.isString(a))m(a,a);else if(WAVE.isArray(a)){A=document.createElement("div");A.id=J;A.className=d.CLS_SELECT_CHOICE_PARENT;v.appendChild(A);for(var c=0;c<a.length;c++)q(a[c],A)}else if(WAVE.isObject(a)){var g=
Object.keys(a),f;if(1===g.length)c=g[0],g=a[c],WAVE.isString(g)||!WAVE.isMapOrArray(g)?m(c,g.toString()):(A=document.createElement("div"),A.id=J,A.className=d.CLS_SELECT_CHOICE_PARENT+" "+d.CLS_SELECT_CHOICE_PARENT_LABELED,v.appendChild(A),f=document.createElement("div"),f.className=d.CLS_SELECT_CHOICE_LABEL,f.innerHTML=c,A.appendChild(f),q(g,A));else for(c in A=document.createElement("div"),A.id=J,A.className=d.CLS_SELECT_CHOICE_PARENT+" "+d.CLS_SELECT_CHOICE_PARENT_LABELED,v.appendChild(A),a)f=
document.createElement("div"),f.className=d.CLS_SELECT_CHOICE_LABEL,f.innerHTML=c,A.appendChild(f),g=a[c],q(g,A)}else m(a.toString(),a.toString())}function t(){WAVE.removeEventHandler(O,"click",W);WAVE.removeElem(ia.unselect);WAVE.removeElem(ia.valueBox);W=null;y=!1}var u=this,v=a.DIV,n=[],w=WAVE.strAsBool(a.disable,!1),x=!0,G=!1,y=!1,z=a.data,Y=WAVE.strEmpty(a.key)?null:a.key,C=WAVE.strEmpty(a.value)?null:a.value,U=null,A=null,O=null,P=null,ba=WAVE.strDefault(a.cls),W=null,na=WAVE.isFunction(a.onclick)?
a.onclick:g,sa=a.builder,J="wv_choice_"+N++,ia={unselect:J+"_unselect",valueBox:J+"_value"};WAVE.extend(u,WAVE.EventManager);u.disable=function(a){if("undefined"===typeof a||null===a)return null===w&&(w=0<n.length),w;w=WAVE.strAsBool(a,!0)};u.isSelected=function(a){return"undefined"===typeof a||null===a?G:c(a)};u.trySetValue=function(a){return"undefined"===typeof a||null===a?!1:c(null,a)};u.resetSelection=function(){if(0===n.length)c(!1);else for(var a=0,b=n.length;a<b;a++)n[a].resetSelection()};
u.visible=function(a){if("undefined"===typeof a||null===a)return x;if("undefined"===typeof a||null===a)a=!x;!0===a?x||(x=!0,A.style.display=null===P?"block":P):x&&(x=!1,null===P&&(P=WAVE.styleOf(A,"display")),A.style.display="none")};u.disable=function(){};u.id=function(){return J};u.key=function(){return Y};u.value=function(){return C};u.children=function(){return n};u.elem=function(){return A};u.addChild=function(a){p(a)};u.renderSelection=function(a,b){if(G&&!0!==y&&"undefined"!==typeof a&&null!==
a){var c=WAVE.strHTMLTemplate("<div>@value@</div><div class='@clsUnselect@' id='@idUnselect@'>",{value:C,clsUnselect:d.CLS_SELECT_CHOICE_UNSELECT,idUnselect:ia.unselect});U=document.createElement("div");U.className=d.CLS_SELECT_CHOICE_VALUE_BOX;U.innerHTML=c;U.id=ia.valueBox;a.appendChild(U);O=WAVE.id(ia.unselect);W=function(){b(u)};y=!0;WAVE.addEventHandler(O,"click",W)}};u.destroyView=function(){t()};u.destroy=function(){t();WAVE.removeEventHandler(A,"click",r);WAVE.removeElem(J);u.eventUnbind(d.EVT_SELECT_CHOICE_SELECTED,
f);u.eventUnbind(d.EVT_SELECT_CHOICE_UNSELECTED,e);u.eventUnbind(d.EVT_SELECT_CHOICE_CLICK,h);for(var a=0;a<n.length;a++)n[a].destroy()};u.latchAllEvents=function(a){u.eventInvocationSuspendCount+=a;for(var b=0,c=n.length;b<c;b++)n[b].eventInvocationSuspendCount+=a};WAVE.isFunction(sa)?(l(),sa(u,z,A)):k(z,v);return u};return d}();
WAVE.RecordModel.GUI=function(){function n(a){var b=WAVE.genAutoincKey("__wv.rmgui");return"_"+a.recView().ID()+"_"+b}function k(a){var b=a.target;a=b.value;b=b.__fieldView.field();try{b.setGUIValue(a)}catch(f){WAVE.GUI.toast(WAVE.strHTMLTemplate("Wrong value for field '@about@'. Please re-enter or undo",{about:b.about()}),"error")}}function x(a){a=a.target;var b=a.value,f=a.__fieldView.field();f.readonly()?m(a.__fieldView):f.value(b,!0)}function z(a){a=a.target;var b=a.checked,f=a.__fieldView.field();
WAVE.id(a.__hiddenId).value=b?"true":"false";f.readonly()?m(a.__fieldView):f.value(b,!0)}function e(b){var g=b.field(),f=b.DIV(),d="chk"+n(b),e=g.validationError();WAVE.removeChildren(f);var h=a.CLS_ERROR,q=g.name(),r=WAVE.strAsBool(g.value())?"true":"false",l=g.about(),m=(g.required()?a.CLS_REQ:"")+" "+(g.isGUIModified()?a.CLS_MOD:""),k=g.isEnabled()?"":"disabled",u=g.readonly()?"readonly":"",w=g.required()?"required":"",g=WAVE.strAsBool(g.value())?"checked":"",x=z;WAVE.isString(f)&&(f=WAVE.id(f));
var y=WAVE.ce("div");if(e){var M=WAVE.ce("div");M.innerText=e;M.setAttribute("class",h);y.appendChild(M)}e=WAVE.ce("input");e.setAttribute("id","h_"+d);e.setAttribute("type","hidden");e.setAttribute("value",r);e.setAttribute("name",q);y.appendChild(e);q=WAVE.ce("label");q.innerText=l;q.setAttribute("for",d);q.setAttribute("class",m);y.appendChild(q);l=WAVE.ce("input");l.setAttribute("id",d);l.setAttribute("type","checkbox");l.disabled=k;l.readonly=u;l.required=w;l.checked=g;l.__fieldView=b;l.__hiddenId=
"h_"+d;l.addEventListener("change",x,!1);y.appendChild(l);WAVE.isObject(f)&&f.appendChild(y)}function y(a){a=a.target;var b=a.__fieldView.field(),f=b.value();b.readonly()?a.value!==f&&(a.value=f):b.value(a.value,!0)}function d(a,b,f){WAVE.isString(a)&&(a=WAVE.id(a));var d=WAVE.ce("div"),e=WAVE.ce("div");e.setAttribute("id",b);d.appendChild(e);b=WAVE.ce("div");b.setAttribute("id",f);d.appendChild(b);WAVE.isObject(a)&&a.appendChild(d);return d}function r(a,b){WAVE.removeChildren(a);var f=a;WAVE.isString(f)&&
(f=WAVE.id(f));var d=WAVE.ce("nfx"),e=WAVE.ce("div");e.innerText=b.error;e.setAttribute("class",b.ec);d.appendChild(e);e=WAVE.ce("label");e.innerText=b.about;e.setAttribute("class",b.cls);d.appendChild(e);WAVE.isObject(f)&&f.appendChild(d);return d}function b(b){var g=b.field(),f=b.DIV(),e=WAVE.get(b,"@#$CHAIN_SELECTOR_GEN_ID$#@",null);null===e&&(e=n(b),b["@#$CHAIN_SELECTOR_GEN_ID$#@"]=e);b="divCS_"+e;var h="labelCont_"+e,q=WAVE.id(h),e=WAVE.id(b),l=g.validationError();if(null===q||null===e)d(f,h,
b),q=WAVE.id(h),e=WAVE.id(b);r(q,{ec:a.CLS_ERROR,error:l,about:g.about(),cls:(g.required()?a.CLS_REQ:"")+" "+(g.isGUIModified()?a.CLS_MOD:"")});f=g.lookupDict();f=WAVE.exists(f)?f.values:[];b=g.isNull()?"":g.value();(new WAVE.GUI.ChainSelector({DIV:e,outputFormFieldName:g.name(),classes:{divArrowCls:a.CLS_COMBO_ARROW,divComboWrapCls:a.CLS_COMBO_WRAP},path:b,disable:g.isEnabled()?!1:!0,readonly:g.readonly(),values:f})).eventBind(WAVE.GUI.EVT_CHAIN_SELECTOR_UPDATED,function(a,b){g.value(b,!0)})}function f(b){var g=
b.field(),f=b.DIV(),e=WAVE.get(b,"@#$PS_EDITOR_GEN_ID$#@",null);null===e&&(e=n(b),b["@#$PS_EDITOR_GEN_ID$#@"]=e);var h="divps_"+e,q="labelCont_"+e,l=WAVE.id(q),e=WAVE.id(h),m=g.validationError();if(null===l||null===e)d(f,q,h),l=WAVE.id(q),e=WAVE.id(h);r(l,{ec:a.CLS_ERROR,error:m,about:g.about(),cls:(g.required()?a.CLS_REQ:"")+" "+(g.isGUIModified()?a.CLS_MOD:"")});f=g.isNull()?"":g.value();h=WAVE.get(b,"@#$PS_EDITOR$#@",null);null===h&&(h=new WAVE.GUI.PropSetEditor({DIV:e,outputFormFieldName:g.name(),
langs:WAVE.LOCALIZER.allLanguageISOs(),content:f,disable:g.isEnabled()?!1:!0,readonly:g.readonly(),title:g.about()}),b["@#$PS_EDITOR$#@"]=h,h.eventBind(WAVE.GUI.EVT_PS_EDITOR_UPDATED,function(a,b){g.value(b,!0)}))}function q(a,b){var f=a;WAVE.isString(f)&&(f=WAVE.id(f));var d=WAVE.ce("div"),e=WAVE.ce("div");e.innerText=b.error;e.setAttribute("class",b.ec);d.appendChild(e);e=WAVE.ce("div");e.setAttribute("id",b.id);e.setAttribute("class",b.cls);d.appendChild(e);e=WAVE.ce("input");e.setAttribute("id",
b.hId);e.setAttribute("type","hidden");e.setAttribute("name",b.name);e.setAttribute("value","");d.appendChild(e);WAVE.isObject(f)&&f.appendChild(d);return d}function h(b){if(!b.PUZZLE){var g=b.field(),f=b.DIV(),d=n(b),e="divPuzzle"+d,d="hiddenPuzzle"+d,h=g.validationError();q(f,{ec:a.CLS_ERROR,error:h,id:e,cls:a.CLS_PUZZLE,hId:d,name:g.name()});var f=g.value(),e=new WAVE.GUI.PuzzleKeypad({DIV:WAVE.id(e),Image:WAVE.strDefault(f.Image,""),Help:WAVE.strDefault(f.Help,""),Question:WAVE.strDefault(f.Question,
"")}),r=WAVE.id(d);r.value=JSON.stringify(g.value());e.eventBind(WAVE.GUI.EVT_PUZZLE_KEYPAD_CHANGE,function(a){g.value().Answer=a.value();r.value=JSON.stringify(g.value())});b.PUZZLE=e}}function l(a,b){var f=a;WAVE.isString(f)&&(f=WAVE.id(f));var d=WAVE.ce("div");d.innerText=b.error;d.setAttribute("class",b.ec);WAVE.isObject(f)&&f.appendChild(d);return d}function u(b,f){var d=b.record(),e=b.DIV();if(f){var d=d.allValidationErrors(),h;for(h in d){var q=d[h];null!==q&&l(e,{ec:a.CLS_ERROR,error:q})}}else h=
d.validationError(),null!==h&&l(e,{ec:a.CLS_ERROR,error:h})}function m(c){var g=a.getControlType(c);if(WAVE.strSame(g,WAVE.RecordModel.CTL_TP_CHECK))w(c,g),e(c);else if(WAVE.strSame(g,WAVE.RecordModel.CTL_TP_CHAIN_SELECTOR))w(c,g),b(c);else if(WAVE.strSame(g,WAVE.RecordModel.CTL_TP_CHECK))w(c,g),e(c);else if(WAVE.strSame(g,WAVE.RecordModel.CTL_TP_RADIO)){w(c,g);var d=c.field(),q=c.DIV(),r=d.lookupDict(),l=Object.keys(r),m=d.validationError(),G=n(c);WAVE.removeChildren(q);var z=d.about(),W=(d.required()?
a.CLS_REQ:"")+" "+(d.isGUIModified()?a.CLS_MOD:""),P=a.CLS_ERROR,ba=d.name(),N=d.isEnabled()?"":"disabled",D=d.readonly()?"readonly":"",I=d.required()?"required":"",M=d.value(),B=q;WAVE.isString(B)&&(B=WAVE.id(B));var H=WAVE.ce("fieldset"),ua=WAVE.ce("legend");ua.innerText=z;ua.setAttribute("class",W);H.appendChild(ua);if(m){var ga=WAVE.ce("div");ga.innerText=m;ga.setAttribute("class",P);H.appendChild(ga)}for(var Da in l){var Z=l[Da],S=r[Z],fa="rbt"+G+"_"+Da,Q=WAVE.ce("input");Q.setAttribute("id",
fa);Q.setAttribute("name",ba);Q.setAttribute("type","radio");Q.disabled=N;Q.readonly=D;Q.setAttribute("value",Z);Q.required=I;Q.checked=WAVE.strSame(Z,M)?"checked":"";Q.__fieldView=c;Q.addEventListener("change",x,!1);H.appendChild(Q);var Ma=WAVE.ce("label");Ma.innerText=S;Ma.setAttribute("for",fa);H.appendChild(Ma)}WAVE.isObject(B)&&B.appendChild(H)}else if(WAVE.strSame(g,WAVE.RecordModel.CTL_TP_NLS))w(c,g),f(c);else if(WAVE.strSame(g,WAVE.RecordModel.CTL_TP_COMBO)){w(c,g);var X=c.field(),oa=c.DIV(),
pa="cbo"+n(c),va="lbl"+pa,ka=X.validationError();WAVE.removeChildren(oa);var qa=X.about(),L=(X.required()?a.CLS_REQ:"")+" "+(X.isGUIModified()?a.CLS_MOD:""),aa=a.CLS_ERROR,la=X.name(),E=X.value(),C=X.isEnabled()?"":"disabled",F=X.readonly()?"readonly":"",A=WAVE.strEmpty(X.placeholder())?"":X.placeholder(),T=X.required()?"required":"",wa=a.CLS_COMBO_WRAP,$a=y,ra=X.lookupDict(),na=Object.keys(X.lookupDict()),sa=a.CLS_COMBO_ARROW,J=oa;WAVE.isString(J)&&(J=WAVE.id(J));var ia=WAVE.ce("div"),ca=WAVE.ce("label");
ca.innerText=qa;ca.setAttribute("for",pa);ca.setAttribute("class",L);ia.appendChild(ca);if(ka){var K=WAVE.ce("div");K.innerText=ka;K.setAttribute("class",aa);ia.appendChild(K)}var V=WAVE.ce("div");V.setAttribute("class",wa);var R=WAVE.ce("select");R.setAttribute("id",pa);R.setAttribute("name",la);R.disabled=C;R.readonly=F;R.setAttribute("value",E);R.setAttribute("placeholder",A);R.required=T;R.__fieldView=c;R.addEventListener("change",$a,!1);var ta=WAVE.ce("option");ta.setAttribute("value","");R.appendChild(ta);
for(var Na in na){var xa=na[Na],ha=WAVE.ce("option");ha.innerText=ra[xa];ha.setAttribute("value",xa);ha.selected=WAVE.strSame(xa,E)?"selected":"";R.appendChild(ha)}V.appendChild(R);var ya=WAVE.ce("div");ya.setAttribute("id",va);ya.setAttribute("class",sa);V.appendChild(ya);ia.appendChild(V);WAVE.isObject(J)&&J.appendChild(ia)}else if(WAVE.strSame(g,WAVE.RecordModel.CTL_TP_PUZZLE))w(c,g),h(c);else if(WAVE.strSame(g,WAVE.RecordModel.CTL_TP_TEXTAREA)||WAVE.strSame(g,WAVE.RecordModel.CTL_TP_SCRIPT)){w(c,
g);var da=c.field(),Fa=c.DIV(),Ga="tb"+n(c),Ha=da.validationError();WAVE.removeChildren(Fa);var Oa=da.about(),Pa=(da.required()?a.CLS_REQ:"")+" "+(da.isGUIModified()?a.CLS_MOD:""),Qa=a.CLS_ERROR,za=da.name(),db=da.isEnabled()?"":"disabled",bb=0>=da.size()?"":"maxlength="+da.size(),eb=da.readonly()?"readonly":"",Ua=da.isNull()?"":da.displayValue(),fb=WAVE.strEmpty(da.placeholder())?"":da.placeholder(),gb=da.required()?"required":"",Aa=Fa;WAVE.isString(Aa)&&(Aa=WAVE.id(Aa));var Ea=WAVE.ce("div"),Ia=
WAVE.ce("label");Ia.innerText=Oa;Ia.setAttribute("for",Ga);Ia.setAttribute("class",Pa);Ea.appendChild(Ia);if(null!==Ha){var Ra=WAVE.ce("div");Ra.innerText=Ha;Ra.setAttribute("class",Qa);Ea.appendChild(Ra)}var ja=WAVE.ce("textarea");ja.innerText=Ua;ja.setAttribute("id",Ga);ja.setAttribute("name",za);ja.disabled=db;ja.setAttribute("maxlength",bb);ja.readonly=eb;ja.setAttribute("value",Ua);ja.setAttribute("placeholder",fb);ja.required=gb;ja.__fieldView=c;ja.addEventListener("change",k,!1);Ea.appendChild(ja);
WAVE.isObject(Aa)&&Aa.appendChild(Ea)}else if(WAVE.strSame(g,WAVE.RecordModel.CTL_TP_HIDDEN)){w(c,g);var Va=c.DIV(),Ta=c.field();WAVE.removeChildren(Va);var ab=Ta.name(),cb=Ta.displayValue(),Ba=Va;WAVE.isString(Ba)&&(Ba=WAVE.id(Ba));var Ja=WAVE.ce("input");Ja.setAttribute("type","hidden");Ja.setAttribute("name",ab);Ja.setAttribute("value",cb);WAVE.isObject(Ba)&&Ba.appendChild(Ja)}else if(WAVE.strSame(g,WAVE.RecordModel.CTL_TP_ERROR_REC))u(c,!1);else if(WAVE.strSame(g,WAVE.RecordModel.CTL_TP_ERROR_SUMMARY))u(c,
!0);else{w(c,g);var ea=c.field(),Wa=c.DIV(),Xa="tb"+n(c),Ya=ea.validationError(),Za=ea.kind(),hb=ea.password()?"password":Za===WAVE.RecordModel.KIND_SCREENNAME?"text":Za;WAVE.removeChildren(Wa);var ib=ea.about(),jb=(ea.required()?a.CLS_REQ:"")+" "+(ea.isGUIModified()?a.CLS_MOD:""),kb=a.CLS_ERROR,lb=ea.name(),mb=ea.isEnabled()?"":"disabled";0>=ea.size()||ea.size();var nb=ea.readonly()?"readonly":"",ob=ea.isNull()?"":ea.displayValue(),pb=WAVE.strEmpty(ea.placeholder())?"":ea.placeholder(),qb=ea.required()?
"required":"",Ca=Wa;WAVE.isString(Ca)&&(Ca=WAVE.id(Ca));var Ka=WAVE.ce("div"),La=WAVE.ce("label");La.innerText=ib;La.setAttribute("for",Xa);La.setAttribute("class",jb);Ka.appendChild(La);if(Ya){var Sa=WAVE.ce("div");Sa.innerText=Ya;Sa.setAttribute("class",kb);Ka.appendChild(Sa)}var ma=WAVE.ce("input");ma.setAttribute("id",Xa);ma.setAttribute("type",hb);ma.setAttribute("name",lb);ma.disabled=mb;ma.readonly=nb;ma.setAttribute("value",ob);ma.setAttribute("placeholder",pb);ma.required=qb;ma.__fieldView=
c;ma.addEventListener("change",k,!1);Ka.appendChild(ma);WAVE.isObject(Ca)&&Ca.appendChild(Ka)}}function w(a,b){if(null===a.field())throw"The control type '"+b+"' requires the field binding, but was bound to record";}var a={CLS_ERROR:"wvError",CLS_REQ:"wvRequired",CLS_MOD:"wvModified",CLS_PUZZLE:"wvPuzzle",CLS_COMBO_ARROW:"wvComboArrow",CLS_COMBO_WRAP:"wvComboWrap",getControlType:function(a){return a.getOrInferControlType()},buildFieldViewAnew:function(a){m(a)},eventNotifyFieldView:function(a,b,f,
d){m(a)}};return a}();WAVE.Chart={};
WAVE.Chart.SVG=function(){function n(d){return Math.log(d)/Math.LN10}var k={EVT_SERIES_POINT_MOUSEOVER:"EVT_SERIES_POINT_MOUSEOVER",EVT_SERIES_POINT_MOUSEOUT:"EVT_SERIES_POINT_MOUSEOUT",EVT_SERIES_POINT_CLICK:"EVT_SERIES_POINT_CLICK",EVT_SERIES_POINT_TITLE_MOUSEOVER:"EVT_SERIES_POINT_TITLE_MOUSEOVER",EVT_SERIES_POINT_TITLE_MOUSEOUT:"EVT_SERIES_POINT_TITLE_MOUSEOUT",EVT_SERIES_POINT_TITLE_CLICK:"EVT_SERIES_POINT_TITLE_CLICK"},x=WAVE.Geometry;k.DataType={NUMBER:0,DATE:1};k.ChartType={POINT:1,LINE:2,
SPLINE:4,LINE_SQUARE:8,SPLINE_SQUARE:16,BAR:32};k.SquareFillType={TOP:1,BOTTOM:2};k.PointType={NONE:0,CIRCLE:1,RECT:2,TRI:3};k.RectSide={LEFT:0,TOP:1,RIGHT:2,BOTTOM:3};k.RectCorner={LEFTTOP:0,RIGHTTOP:1,LEFTBOTTOM:2,RIGHTBOTTOM:3};k.AxisMarkType={AUTO:0,EXACT_BY_POINTS:1,CUSTOM:2};var z=WAVE.arrayWalkable([1,2,5,10,20,30,60,120,300,600,900,1200,1800,3600,7200,10800,14400,21600,28800,43200,86400,172800,259200,604800,2592E3,5184E3,7776E3,15552E3,31536E3,63072E3,94608E3,15768E4,31536E4,63072E4,15768E5]);
k.dvInfo=function(d,b,f,e,h){var l=d instanceof Date;this.isDate=function(){return l};var k=d;this.d0=function(a){"undefined"!==typeof a&&(k=a);return k};var m=b;this.d1=function(a){"undefined"!==typeof a&&(m=a);return m};var w=f;this.v0=function(a){"undefined"!==typeof a&&(w=a);return w};var a=e;this.v1=function(b){"undefined"!==typeof b&&(a=b);return a};var c=h;this.isLinear=function(a){"undefined"!==typeof a&&(c=a);return c};if(h){var g;l?(g=(b.getTime()-d.getTime())/(e-f),this.d2v=function(a){return Math.floor(f+
(a.getTime()-d.getTime())/g)},this.v2d=function(a){return new Date(Math.ceil(d.getTime()+(a-f)*g))}):(g=(b-d)/(e-f),this.d2v=function(a){return f+(a-d)/g},this.v2d=function(a){return d+(a-f)*g})}else{var t,v;l?(h=n(d.getTime()),b=n(b.getTime()),t=(e-f)/(b-h),v=f-t*h,this.d2v=function(a){return Math.floor(1>=a.getTime()?0:t*n(a.getTime())+v)},this.v2d=function(a){return new Date(Math.ceil(Math.pow(10,(a-v)/t)))}):(h=n(0>=d?1:d),b=n(0>=b?1:b),t=(e-f)/(b-h),v=f-t*h,this.d2v=function(a){return Math.floor(1>=
a?0:t*n(a)+v)},this.v2d=function(a){return Math.ceil(Math.pow(10,(a-v)/t))})}};k.dvInfo.prototype.toString=function(){return"(d0="+this.d0()+",d1="+this.d1()+") (v0="+this.v0()+",v1="+this.v1()+") isLinear="+this.isLinear()};k.Axis=function(d,b){var f=this;WAVE.extend(f,WAVE.EventManager);b=b||{};this.chart=function(){return d};var e=b.dataType||k.DataType.NUMBER;this.dataType=function(a){"undefined"!==typeof a&&a!==e&&(e=a,f.fireChanged());return e};var h=b.min||null;this.min=function(a){"undefined"!==
typeof a&&a!==h&&(h=a,f.fireChanged());return h};var l=b.max||null;this.max=function(a){"undefined"!==typeof a&&a!==l&&(l=a,f.fireChanged());return l};var u=b.minMargin||0;this.minMargin=function(a){"undefined"!==typeof a&&$.isNumeric(a)&&a!==u&&(u=a,f.fireChanged());return u};var m=b.maxMargin||0;this.maxMargin=function(a){"undefined"!==typeof a&&$.isNumeric(a)&&a!==m&&(m=a,f.fireChanged());return m};var n=!1!==b.isLinear;this.isLinear=function(a){"undefined"!==typeof a&&a!==n&&(n=a,f.fireChanged());
return n};var a=b.markType||k.AxisMarkType.AUTO;this.markType=function(b){"undefined"!==typeof b&&b!==a&&(a=b,f.fireChanged());return a};var c=5;this.tickLength=function(a){"undefined"!==typeof a&&a!==c&&(c=a,f.fireChanged());return c};var g=b.tickTextMargin||3;this.tickTextMargin=function(a){"undefined"!==typeof a&&a!==g&&(g=a,f.fireChanged());return g};var t;this.dvInfo=function(a){"undefined"!==typeof a&&(t=a);return t};var v;this.ticks=function(a){"undefined"!==typeof a&&(v=a);return v};this.fireChanged=
function(){f.eventInvoke("EVT_CHANGED")}};k.Axis.prototype.toSeconds=function(d){return d.valueOf()/1E3};k.Axis.prototype.fromSeconds=function(d){return new Date(1E3*d)};k.Axis.prototype.getVTimeTicks=function(d,b,f,e,h,l){f=this.toSeconds(f);var k=this.toSeconds(e)-f,m=b-d;e=k/m;var k=this.calcTimeTickLength(m,k,h,l),n=k.dThreshhold,k=k.vTickLength,n=(Math.floor(f/n)*n-f)/e,a=[],c=l+h/2;for(h=m-(l+h/2);n<=b;)n>=c&&n<=h&&a.push({vTick:d+n,dTick:this.fromSeconds(f+n*e)}),n+=k;return a};k.Axis.prototype.calcTimeTickLength=
function(d,b,f,e){var h=b/d,l=b/Math.floor(d/(f+2*e));d=z.wFirst(function(b){return l<b});return{vTickLength:d/h,dThreshhold:d}};k.Axis.prototype.getVLog10Ticks=function(d,b,f,e,h,l){var k=b-d;e=Math.ceil(Math.log(e-f)/Math.LN10);b=k/e;var m=[],n=l+h/2;h=k-(l+h/2);l=0;for(var k=d,a=1;l<=e;l++,k+=b,a*=10)k>=n&&k<=h&&m.push({vTick:d+k,dTick:f+a});return m};k.Axis.prototype.getVTicks=function(d,b,f,e,h,l){var k=[],m=e-f,n=b-d;e=m/n;var m=this.calcTicksLength(n,m,h,l),a=m.dTickLength,m=m.vTickLength,
a=(Math.ceil(f/a)*a-f)/e,c=l+h/2;for(h=n-(l+h/2);a<=b;)a>=c&&a<=h&&k.push({vTick:d+a,dTick:f+a*e}),a+=m;return k};k.Axis.prototype.calcTicksLength=function(d,b,f,e){var h=b/d,l=WAVE.arrayWalkable([1,2,3,5,10]);d=b/(Math.floor(d/(f+e))-1);b=Math.pow(10,Math.floor(Math.log(d)/Math.LN10));var k=d/b,l=l.wFirst(function(b){return k<b})*b;return{vTickLength:l/h,dTickLength:l}};k.Axis.prototype.labelValToStr=function(d){return this.dataType()===k.DataType.NUMBER?WAVE.siNum(d,2):WAVE.toUSDateTimeString(d)};
k.Axis.prototype.calcLabelRc=function(d,b,f){this.dataType()===k.DataType.NUMBER?(b=this.labelValToStr(b),f=this.labelValToStr(f),f=f.length>=b.length?f:b):f=this.labelValToStr(b);f=WAVE.SVG.createText(f,0,0,{class:"wvAxisLabel wvXAxisLabel",visibility:"hidden"});d.appendChild(f);b=f.getBBox();d.removeChild(f);return b};k.XZone=function(d){var b=this;WAVE.extend(b,WAVE.EventManager);this.chart=function(){return d};var f=!0;this.enabled=function(d){"undefined"!==typeof d&&d!==f&&(f=d,b.eventInvoke("EVT_CHANGED"));
return f}};k.XZone.prototype.getHeight=function(d){var b=this.chart().seriesListWalkable().wGroup(function(b){return b.xAxis()},function(b){return b.dataSet()}),f=WAVE.arrayWalkable(b.wSelect(function(b){return{axis:b.k,height:b.k.getHeight(d,b.v)}}).wToArray()).wGroup(function(b){return b.axis.isBottom()},function(b){return b.height}).wGroupAggregate(function(b,d,f){return(d||0)+f}),b={top:0,bottom:0};if(!this.enabled())return b;for(f=f.getWalker();f.moveNext();){var e=f.current();!0===e.k?b.bottom=
e.v:b.top=e.v}return b};k.XZone.prototype.draw=function(d,b){for(var f in b){var e=b[f],e=WAVE.SVG.createRect(e.left(),e.top(),e.width(),e.height(),{class:"wvSvgBkgr wvXZoneBackground"});d.appendChild(e)}f=this.chart().seriesListWalkable().wGroup(function(b){return b.xAxis()},function(b){return b.dataSet()}).getWalker();for(var e=b.top.bottom(),h=b.bottom.top();f.moveNext();){var l=f.current(),k=l.k.getHeight(d,l.v),m;!0===l.k.isBottom()?(m=new x.Rectangle(new x.Point(b.bottom.left(),h),new x.Point(b.bottom.right(),
h+k)),h+=k):(m=new x.Rectangle(new x.Point(b.top.left(),e-k),new x.Point(b.top.right(),e)),e-=k);l.k.draw(d,m,l.v)}};k.XAxis=function(d,b){k.Axis.call(this,d,b);var f=this;b=b||{};var e=b.verticalMargin||3;this.verticalMargin=function(b){"undefined"!==typeof b&&b!==e&&(e=b,f.fireChanged());return e};var h=!1!==b.isBottom;this.isBottom=function(b){"undefined"!==typeof b&&b!==h&&(h=b,f.fireChanged());return h}};k.XAxis.prototype=Object.create(k.Axis.prototype);k.XAxis.prototype.constructor=k.XAxis;
k.XAxis.prototype.d2v=function(d){return this.dvInfo().d2v(d)};k.XAxis.prototype.v2d=function(d){return this.dvInfo().v2d(d)};k.XAxis.prototype.draw=function(d,b,f){var e=this.getMinMax(f);this.dvInfo(new k.dvInfo(e.min,e.max,b.left(),b.right(),this.isLinear()));e=this.isBottom()?WAVE.SVG.createLine(b.left(),b.top(),b.right(),b.top(),{class:"wvAxisLine"}):WAVE.SVG.createLine(b.left(),b.bottom(),b.right(),b.bottom(),{class:"wvAxisLine"});d.appendChild(e);this.markAxis(d,b,f)};k.XAxis.prototype.getHeight=
function(d,b){this.minMax=this.getMinMax(b);var f;!this.minMax.min&&0!==this.minMax.min||!this.minMax.max&&0!==this.minMax.max?f=0:(f=this.calcLabelRc(d,this.minMax.min,this.minMax.max),f=Math.ceil(f.height));return this.tickLength()+this.verticalMargin()+this.tickTextMargin()+f};k.XAxis.prototype.getMinMax=function(d){var b=this.min()||d.wSelect(function(b){return b.getMinX()}).wWhere(function(b){return null!==b}).wMin();null===b&&(b=this.dataType()===k.DataType.DATE?new Date:0);b=this.dataType()===
k.DataType.DATE?new Date(b.getTime()-1E3*this.minMargin()):b-this.minMargin();d=this.max()||d.wSelect(function(b){return b.getMaxX()}).wMax();null===d&&(d=this.dataType()===k.DataType.DATE?new Date:0);d=this.dataType()===k.DataType.DATE?new Date(d.getTime()+1E3*this.maxMargin()):d+this.maxMargin();return this.minMax={min:b,max:d}};k.XAxis.prototype.markAxis=function(d,b,f){var e,h=this.getMinMax(f);if((this.minMax.min||0===this.minMax.min)&&(this.minMax.max||0===this.minMax.max)){var l=this.calcLabelRc(d,
h.min,h.max),u=l.width,l=l.height;if(this.markType()===k.AxisMarkType.AUTO)e=this.dataType()===k.DataType.DATE?this.getVTimeTicks(b.left(),b.right(),h.min,h.max,u,5):this.getVTicks(b.left(),b.right(),h.min,h.max,u,5);else if(this.markType()===k.AxisMarkType.EXACT_BY_POINTS){f=f[0];e=[];for(var m in f)h=f[m],e.push({vTick:this.d2v(h.x),dTick:h.x})}this.ticks(e);for(var n in e)m=e[n],f=this.isBottom()?WAVE.SVG.createLine(m.vTick,b.top(),m.vTick,b.top()+this.tickLength(),{class:"wvAxisTickLine"}):WAVE.SVG.createLine(m.vTick,
b.bottom(),m.vTick,b.bottom()-this.tickLength(),{class:"wvAxisTickLine"}),d.appendChild(f),f=this.labelValToStr(m.dTick),f=this.isBottom()?WAVE.SVG.createText(f,m.vTick,b.top()+this.tickTextMargin()+l,{class:"wvAxisLabel wvXAxisLabel"}):WAVE.SVG.createText(f,m.vTick,b.bottom()-this.tickTextMargin()-this.tickLength(),{class:"wvAxisLabel wvXAxisLabel"}),d.appendChild(f),h=f.getBBox(),f.setAttribute("x",m.vTick-h.width/2)}};k.YZone=function(d){var b=this;WAVE.extend(b,WAVE.EventManager);this.chart=function(){return d};
var f=!0;this.enabled=function(d){"undefined"!==typeof d&&d!==f&&(f=d,b.eventInvoke("EVT_CHANGED"));return f};this.getWidth=function(d){var e=b.chart().seriesListWalkable().wGroup(function(b){return b.yAxis()},function(b){return b.dataSet()}),l=WAVE.arrayWalkable(e.wSelect(function(b){return{axis:b.k,width:b.k.getWidth(d,b.v)}}).wToArray()).wGroup(function(b){return b.axis.isLeft()},function(b){return b.width}).wGroupAggregate(function(b,d,a){return(d||0)+a}),e={left:0,right:0};if(!f)return e;for(l=
l.getWalker();l.moveNext();){var k=l.current();!0===k.k?e.left=k.v:e.right=k.v}return e};this.draw=function(d,f){for(var e in f){var k=f[e],k=WAVE.SVG.createRect(k.left(),k.top(),k.width(),k.height(),{class:"wvSvgBkgr wvYZoneBackground"});d.appendChild(k)}e=b.chart().seriesListWalkable().wGroup(function(a){return a.yAxis()},function(a){return a.dataSet()}).getWalker();for(var k=f.left.right(),m=f.right.left();e.moveNext();){var r=e.current(),a=r.k.getWidth(d,r.v),c;!0===r.k.isLeft()?(c=new x.Rectangle(new x.Point(k-
a,f.left.top()),new x.Point(k,f.left.bottom())),k-=a):(c=new x.Rectangle(new x.Point(m,f.left.top()),new x.Point(m+a,f.left.bottom())),m+=a);r.k.draw(d,c,r.v)}}};k.YAxis=function(d,b){k.Axis.call(this,d,b);var f=this;b=b||{};var e=b.horizontalMargin||3;this.horizontalMargin=function(b){"undefined"!==typeof b&&b!==e&&(e=b,f.fireChanged());return e};var h=b.minWidth||0;this.minWidth=function(b){"undefined"!==typeof b&&b!==h&&(h=b,f.fireChanged());return h};var l=!1!==b.isLeft;this.isLeft=function(b){"undefined"!==
typeof b&&b!==l&&(l=b,f.fireChanged());return l}};k.YAxis.prototype=Object.create(k.Axis.prototype);k.YAxis.prototype.constructor=k.YAxis;k.YAxis.prototype.d2v=function(d){return this.dvInfo().v0()+this.dvInfo().v1()-this.dvInfo().d2v(d)};k.YAxis.prototype.v2d=function(d){return this.dvInfo().v2d(this.dvInfo().v0()+this.dvInfo().v1()-d)};k.YAxis.prototype.markAxis=function(d,b,f){var e;if(this.markType()===k.AxisMarkType.AUTO){e=this.getMinMax(f);var h=this.calcLabelRc(d,e.min,e.max).height;f=.2*
h;e=this.dataType()===k.DataType.DATE?this.getVTimeTicks(b.top(),b.bottom(),e.min,e.max,h,f):this.isLinear()?this.getVTicks(b.top(),b.bottom(),e.min,e.max,h,f):this.getVLog10Ticks(b.top(),b.bottom(),e.min,e.max,h,f)}else if(this.markType()===k.AxisMarkType.EXACT_BY_POINTS)for(h in f=f[0],f){var l=f[h];e.push({vTick:this.d2v(l.y),dTick:l.y})}this.ticks(e);h=0;f=[];for(var u in e){var m=e[u],l=b.top()+b.bottom()-m.vTick,n;n=this.isLeft()?WAVE.SVG.createLine(b.right()-this.tickLength(),l,b.right(),l,
{class:"wvAxisTickLine"}):WAVE.SVG.createLine(b.left(),l,b.left()+this.tickLength(),l,{class:"wvAxisTickLine"});d.appendChild(n);m=this.labelValToStr(m.dTick);m=this.isLeft()?WAVE.SVG.createText(m,b.right()-this.tickTextMargin()-this.tickLength(),l,{class:"wvAxisLabel wvYAxisLabel"}):WAVE.SVG.createText(m,b.left()+this.tickLength()+this.tickTextMargin(),l,{class:"wvAxisLabel wvYAxisLabel"});d.appendChild(m);n=m.getBBox();m.setAttribute("y",l+n.height/3);f.push(m);n.width>h&&(h=n.width)}if(!this.isLeft())for(var a in f)d=
f[a],b=parseFloat(d.getAttribute("x")),b+=h,d.setAttribute("x",b)};k.YAxis.prototype.draw=function(d,b,f){var e=this.getMinMax(f);this.dvInfo(new k.dvInfo(e.min,e.max,b.top(),b.bottom(),this.isLinear()));e=this.isLeft()?WAVE.SVG.createLine(b.right(),b.top(),b.right(),b.bottom(),{class:"wvAxisLine"}):WAVE.SVG.createLine(b.left(),b.top(),b.left(),b.bottom(),{class:"wvAxisLine"});d.appendChild(e);this.markAxis(d,b,f)};k.YAxis.prototype.getWidth=function(d,b){this.minMax=this.getMinMax(b);var f=this.calcLabelRc(d,
this.minMax.min,this.minMax.max),f=this.tickLength()+this.horizontalMargin()+Math.ceil(f.width);return Math.max(f,this.minWidth())};k.YAxis.prototype.getMinMax=function(d){var b=this.min()||d.wSelect(function(b){return b.getMinY()}).wWhere(function(b){return null!==b}).wMin(),b=this.dataType()===k.DataType.DATE?new Date(b.getTime()-1E3*this.minMargin()):b-this.minMargin();d=this.max()||d.wSelect(function(b){return b.getMaxY()}).wMax();d=this.dataType()===k.DataType.DATE?new Date(d.getTime()+1E3*this.maxMargin()):
d+this.maxMargin();return this.minMax={min:b,max:d}};k.LZone=function(d,b){function f(){e.eventInvoke("EVT_CHANGED")}b=b||{};var e=this;WAVE.extend(e,WAVE.EventManager);this.chart=function(){return d};var h=!1!==b.enabled;this.enabled=function(a){"undefined"!==typeof a&&a!==h&&(h=a,f());return h};var l=b.legendMargin||10;this.legendMargin=function(a){"undefined"!==typeof a&&a!==l&&(l=a,f());return l};var n=b.seriesMargin||3;this.seriesMargin=function(a){"undefined"!==typeof a&&a!==n&&(n=a,f());return n};
var m=b.prefixLength||10;this.prefixLength=function(a){"undefined"!==typeof a&&a!==m&&(m=a,f());return m};var w=b.rowSpace||3;this.rowSpace=function(a){"undefined"!==typeof a&&a!==w&&(w=a,f());return w};var a=b.corner||k.RectCorner.RIGHTTOP;this.corner=function(b){"undefined"!==typeof b&&b!==a&&(a=b,f());return a}};k.LZone.prototype.getSize=function(d){var b=this.chart().seriesListWalkable().wSelect(function(b){return b.title()||""}).wMax(function(b,d){return b.length>d.length}),f=WAVE.SVG.createText(b,
0,0,{class:"wvLegendName",visibility:"hidden"});d.appendChild(f);b=f.getBBox();d.removeChild(f);d=this.rowSpace()+this.prefixLength()+this.rowSpace()+b.width+this.rowSpace();b=this.chart().seriesListWalkable().wCount()*(2*this.seriesMargin()+b.height);return{w:d,h:b}};k.LZone.prototype.drawLegendPrefix=function(d,b,f){var e=(b.top()+b.bottom())/2;b=WAVE.SVG.createPath({d:"M"+b.left()+","+e+" L"+(b.left()+this.prefixLength())+","+e,class:f.lineClass()});d.appendChild(b)};k.LZone.prototype.draw=function(d,
b){if(this.enabled()){var f=this,e=this.chart().seriesListWalkable(),h=WAVE.SVG.createRect(b.left(),b.top(),b.width(),b.height(),{class:"wvLZoneBackground"});d.appendChild(h);var l=b.top()+this.seriesMargin();e.wEach(function(e){var h=WAVE.SVG.createGroup({class:e.class()});d.appendChild(h);var k=WAVE.SVG.createText(e.title(),b.left()+f.rowSpace()+f.prefixLength()+f.rowSpace(),l,{class:"wvLegendName"});h.appendChild(k);var a=k.getBBox();k.setAttribute("y",l+3*a.height/4);k=new x.Rectangle(new x.Point(b.left()+
f.rowSpace(),l),new x.Point(b.left()+f.rowSpace()+f.prefixLength(),l+a.height));f.drawLegendPrefix(h,k,e);l+=a.height+2*f.seriesMargin()})}};var e=0;k.SZone=function(d,b){function f(){e.eventInvoke("EVT_CHANGED")}var e=this;WAVE.extend(e,WAVE.EventManager);b=b||{};this.chart=function(){return d};var h=b.chartType||k.ChartType.LINE;this.chartType=function(a){"undefined"!==typeof a&&a!==h&&(h=a,f());return h};var l=b.squareFillType||k.SquareFillType.BOTTOM;this.squareFillType=function(a){"undefined"!==
typeof a&&a!==l&&(l=a,f());return l};var n=b.pointType||k.PointType.CIRCLE;this.pointType=function(a){"undefined"!==typeof a&&a!==n&&(n=a,f());return n};var m=b.lineClass||"wvSeriesLine";this.lineClass=function(a){"undefined"!==typeof a&&a!==m&&(m=a,f());return m};var w=b.lineSquareClass||"wvSeriesLineArea";this.lineSquareClass=function(a){"undefined"!==typeof a&&a!==w&&(w=a,f());return w};var a=b.pointClass||"wvSeriesPoint";this.pointClass=function(b){"undefined"!==typeof b&&b!==a&&(a=b,f());return a};
var c=b.pointSize||5;this.pointSize=function(a){"undefined"!==typeof a&&a!==c&&(c=a,f());return c};var g=b.barClass||"wvSeriesRect";this.barClass=function(a){"undefined"!==typeof a&&a!==g&&(g=a,f());return g};var t=b.barWidth||10;this.barWidth=function(a){"undefined"!==typeof a&&a!==t&&(t=a,f());return t};var v=b.barGroupMargin||5;this.barGroupMargin=function(a){"undefined"!==typeof a&&a!==v&&(v=a,f());return v};var p=b.barMargin||3;this.barMargin=function(a){"undefined"!==typeof a&&a!==v&&(p=a,f());
return p};var x=b.showPointTooltip||!1;this.showPointTooltip=function(a){"undefined"!==typeof a&&a!==x&&(x=a);return x};var y=b.pointTooltipFormat||"Series: @series@, title: @title@, v: [@vx@, @vy@], d: [@dx@, @dy@]";this.pointTooltipFormat=function(a){"undefined"!==typeof a&&a!==y&&(y=a);return y};var G=b.showPointTitle||!1;this.showPointTitle=function(a){"undefined"!==typeof a&&a!==G&&(G=a,f());return G};var z=b.pointTitleFormat||"@title@";this.pointTitleFormat=function(a){"undefined"!==typeof a&&
a!==z&&(z=a,f());return z};var W=b.pointTitleClass||"wvChartPointTitle";this.pointTitleClass=function(a){"undefined"!==typeof a&&a!==W&&(W=a,f());return W};var P=b.pointTitleAngle||0;this.pointTitleAngle=function(a){"undefined"!==typeof a&&a!==P&&(P=a,f());return P};var ba=b.pointTitleMargin||5;this.pointTitleMargin=function(a){"undefined"!==typeof a&&a!==ba&&(ba=a,f());return ba};var N=!1!==b.showPointTitleLeg;this.showPointTitleLeg=function(a){"undefined"!==typeof a&&a!==N&&(N=a,f());return N};
this.showDefaultRuler=function(a){var b=0<D.length;return"undefined"!==typeof a&&a!==b?(a?e.attachToRulerScope(""):e.detachFromRulerScope(""),D.length&&f(),a):b};var D=[];this.rulerScopes=function(){return WAVE.arrayShallowCopy(D)};this.attachToRulerScope=function(a){-1===D.indexOf(a)&&(D.push(a),f())};this.detachFromRulerScope=function(a){a=D.indexOf(a);-1!==a&&(D.splice(a,1),f())};var I=!1!==b.rulerCheckXContains;this.rulerCheckXContains=function(a){"undefined"!==typeof a&&a!==I&&(I=a,f());return I};
var M=!1!==b.rulerCheckYContains;this.rulerCheckYContains=function(a){"undefined"!==typeof a&&a!==M&&(M=a,f());return M};var B=null;this.lastArea=function(){return B};var H=[],ua=WAVE.arrayWalkable(H),ga=[],Da=WAVE.arrayWalkable(ga),Z=[],S=WAVE.arrayWalkable(Z);this.addVTitle=function(a){H.push(a)};this.addVPoint=function(a){ga.push(a)};this.addVLine=function(a){Z.push(a)};this.getTitleRcPenalty=function(a,b){var c=a.square(),d=WAVE.Geometry.overlapAreaRect(b,a),c=c-d,d=ua.wWhere(function(b){return!(b.right()<
a.left()||b.left()>a.right()||b.bottom()<a.top()||b.top()>a.bottom())}).wSelect(function(b){return WAVE.Geometry.overlapAreaRect(a,b)}).wSum(),f=Da.wWhere(function(b){return!(b.right()<a.left()||b.left()>a.right()||b.bottom()<a.top()||b.top()>a.bottom())}).wSelect(function(b){return WAVE.Geometry.overlapAreaRect(a,b)}).wSum(),g=S.wWhere(function(b){return!(b.x2<a.left()||b.x1>a.right())}).wSelect(function(b){return WAVE.Geometry.intersectionLengthRectLineXY(a.left(),a.top(),a.right(),a.bottom(),b.x1,
b.y1,b.x2,b.y2)}).wSum();return c+d+f+2*g};this.draw=function(a,b){B=b;H.splice(0,H.length);ga.splice(0,ga.length);Z.splice(0,Z.length);var c=WAVE.SVG.createRect(b.left(),b.top(),b.width(),b.height(),{class:"wvSvgBkgr wvSZoneBackground"});a.appendChild(c);var c="clip"+WAVE.genAutoincKey("__wv.chart.svg"),d=WAVE.SVG.createRect(b.left(),b.top(),b.width(),b.height()),d=WAVE.SVG.createClipPath(c,[d]),d=WAVE.SVG.createDefs([d]);a.appendChild(d);var f=WAVE.SVG.createGroup({style:"clip-path: url(#"+c+")"});
a.appendChild(f);var c=e.chart().seriesListWalkable(),d=c.wSelect(function(a){return a.xAxis()}).wDistinct(),g=c.wSelect(function(a){return a.yAxis()}).wDistinct();d.wEach(function(a){a=a.ticks();for(var c in a){var d=a[c],d=WAVE.SVG.createLine(d.vTick,b.top(),d.vTick,b.bottom(),{class:"wvGridLine wvGridXLine"});f.appendChild(d)}});g.wEach(function(a){a=a.ticks();for(var c in a){var d=a[c],d=b.top()+b.bottom()-d.vTick,d=WAVE.SVG.createLine(b.left(),d,b.right(),d,{class:"wvGridLine wvGridYLine"});
f.appendChild(d)}});c.wGroup(function(a){return a.chartType()},function(a){return a}).wEach(function(c){switch(c.k){case k.ChartType.BAR:var d=e.barWidth(),g=e.barGroupMargin(),h=e.barMargin(),l=c.v.wCount(),m=c.v.wFirst();if(m.barBase()===k.RectSide.BOTTOM){var p=c.v.wMin(function(a,b){return a.dataSet().getMinX()<a.dataSet().getMinX()});if("undefined"===typeof p)break;var r=c.v.wMax(function(a,b){return a.dataSet().getMaxX()>a.dataSet().getMaxX()});if("undefined"===typeof r)break;for(var p=p.dataSet().getMinX(),
r=r.dataSet().getMaxX(),n=m.xAxis().dvInfo(),m=n.d2v(p),r=n.d2v(r),l=Math.floor((r-m+g)/(l*(d+h)-h+g)),g=(r-m+g)/l,r=0;r<l;r++){var u=m+g*r,t=u;c.v.wEach(function(a){var c=n.v2d(u),c=a.getVY(c),c="M"+t+","+c+" h"+d+" V"+b.bottom()+" h-"+d+" Z",c=WAVE.SVG.createPath({d:c,class:a.lineSquareClass()});a=WAVE.SVG.createGroup({class:a.class()});f.appendChild(a);a.appendChild(c);t+=d+h})}}break;default:c.v.wEach(function(c){var d=WAVE.SVG.createGroup({class:c.class()});f.appendChild(d);c.drawAllButTitle(a,
d,b)})}});c.wWhere(function(a){return a.chartType()&k.ChartType.POINT}).wEach(function(c){var d=WAVE.SVG.createGroup({class:c.class()});f.appendChild(d);c.drawPointTitles(a,d,b)})}};var y=function(d,b){function f(){q.invokeEvent("EVT_CHANGED")}var q=this;WAVE.extend(q,WAVE.EventManager);b=b||{};this.chart=function(){return d};var h="undefined"!==typeof b.id?b.id:(++e).toString();this.id=function(){return h};var l=b.title||"";this.title=function(a){"undefined"!==typeof a&&a!==l&&(l=a,f());return l};
var n=b.class||"";this.class=function(a){"undefined"!==typeof a&&a!==n&&(n=a,f());return n};var m=b.lineClass;this.lineClass=function(a){"undefined"!==typeof a&&a!==m&&(m=a,f());return m||q.chart().sZone().lineClass()};var w=b.lineSquareClass;this.lineSquareClass=function(a){"undefined"!==typeof a&&a!==w&&(w=a,f());return w||q.chart().sZone().lineSquareClass()};var a=b.barClass;this.barClass=function(b){"undefined"!==typeof b&&b!==a&&(a=b,f());return a||q.chart().sZone().barClass()};var c=b.chartType;
this.chartType=function(a){"undefined"!==typeof a&&a!==c&&(c=a,f());return c||q.chart().sZone().chartType()};var g=b.squareFillType;this.squareFillType=function(a){"undefined"!==typeof a&&a!==g&&(g=a,f());return g||q.chart().sZone().squareFillType()};var t=b.pointType;this.pointType=function(a){"undefined"!==typeof a&&a!==t&&(t=a,f());return t||q.chart().sZone().pointType()};var v=b.pointClass||"wvSeriesPoint";this.pointClass=function(a){"undefined"!==typeof a&&a!==v&&(v=a,f());return v||q.chart().sZone().pointClass()};
var p=b.pointSize;this.pointSize=function(a){"undefined"!==typeof a&&a!==p&&(p=a,f());return p||q.chart().sZone().pointSize()};var x=k.RectSide.BOTTOM;this.barBase=function(a){"undefined"!==typeof a&&a!==x&&(x=a,f());return x||q.chart().sZone().barBase()};var y=new k.DataSet;y.eventBind("EVT_CHANGED",function(){q.eventInvoke("EVT_CHANGED")});this.dataSet=function(){return y};var G=b.xAxis;this.xAxis=function(a){"undefined"!==typeof a&&a!==G&&(G&&G.eventUnbind("EVT_CHANGED",f),G=a,G.eventBind("EVT_CHANGED",
f),f());return G||q.chart().xAxis()};var z=b.yAxis;this.yAxis=function(a){"undefined"!==typeof a&&a!==z&&(z&&z.eventUnbind("EVT_CHANGED",f),z=a,z.eventBind("EVT_CHANGED",f),f());return z||q.chart().yAxis()};var W=b.showPointTooltip;this.showPointTooltip=function(a){"undefined"!==typeof a&&a!==W&&(W=a);return W||q.chart().sZone().showPointTooltip()};var P=b.pointTooltipFormat;this.pointTooltipFormat=function(a){"undefined"!==typeof a&&a!==P&&(P=a);return P||q.chart().sZone().pointTooltipFormat()};
var ba=b.showPointTitle;this.showPointTitle=function(a){"undefined"!==typeof a&&a!==ba&&(ba=a,f());return ba||q.chart().sZone().showPointTitle()};var N=b.pointTitleFormat;this.pointTitleFormat=function(a){"undefined"!==typeof a&&a!==N&&(N=a,f());return N||q.chart().sZone().pointTitleFormat()};var D=b.pointTitleClass;this.pointTitleClass=function(a){"undefined"!==typeof a&&a!==D&&(D=a,f());return D||d.sZone().pointTitleClass()};var I=b.pointTitleAngle;this.pointTitleAngle=function(a){"undefined"!==
typeof a&&a!==I&&(I=a,f());return I||d.sZone().pointTitleAngle()};var M=b.pointTitleMargin;this.pointTitleMargin=function(a){"undefined"!==typeof a&&a!==M&&(M=a,f());return M||d.sZone().pointTitleMargin()};var B=!1!==b.showPointTitleLeg;this.showPointTitleLeg=function(a){"undefined"!==typeof a&&a!==B&&(B=a,f());return!1===B?!1:B||d.sZone().showPointTitleLeg()}};y.prototype.getDY=function(d){var b=this.dataSet().getPointByX(d);if(null!==b)return b.y;b=this.dataSet().getNearestNeighbours(d);return null===
b?null:null===b.left?b.right.y:null===b.right?b.left.y:(d-b.left.x)/(b.right.x-b.left.x)*(b.right.y-b.left.y)+b.left.y};y.prototype.getVY=function(d){d=this.getDY(d);return this.yAxis().d2v(d)};y.prototype.foreachPoint=function(d){var b=this,f=this.xAxis(),e=this.yAxis();b.dataSet().forEach(function(h){var l=Math.round(f.d2v(h.x)),k=Math.round(e.d2v(h.y));isNaN(l)||isNaN(k)||d(l,k,h.x,h.y,h.title,b)})};y.prototype.drawAllButTitle=function(d,b,f,e){var h=this,l,n;if(this.chartType()&k.ChartType.LINE||
this.chartType()&k.ChartType.LINE_SQUARE){l="";n=null;var m,w;h.foreachPoint(function(a,b,c,d,f,g){null===n?(n=a,c="M"):(c="L",h.chart().sZone().addVLine({x1:m,y1:w,x2:a,y2:b}));l+=c+a+","+b+" ";m=a;w=b});""!==l&&this.chartType()&k.ChartType.LINE_SQUARE&&(l=this.squareFillType()===k.SquareFillType.BOTTOM?l+("V"+f.bottom()+" H"+n+" Z"):l+("V"+f.top()+" H"+n+" Z"));e=WAVE.SVG.createPath({d:l,class:this.chartType()&k.ChartType.LINE_SQUARE?this.lineSquareClass():this.lineClass()});b.appendChild(e)}if(this.chartType()&
k.ChartType.SPLINE||this.chartType()&k.ChartType.SPLINE_SQUARE){l="";var a="M",c=0,g=[];n=null;h.foreachPoint(function(b,d,f,e,h,k){null===n&&(n=b);"M"===a?(l="M"+b+","+d+" ",a="C"):"C"===a?(g.unshift({x:b,y:d}),c++,3===c&&(b=g.pop(),d=g.pop(),f=g.pop(),l+="C"+b.x+","+b.y+" "+d.x+","+d.y+" "+f.x+","+f.y+" ",c=0,a="S")):"S"===a&&(g.unshift({x:b,y:d}),c++,2===c&&(d=g.pop(),f=g.pop(),l+="S"+d.x+","+d.y+" "+f.x+","+f.y+" ",c=0))});if("C"===a)if(1===c)e=g.pop(),l+="L"+e.x+","+e.y;else{if(2===c){e=g.pop();
var t=g.pop();l+="Q"+e.x+","+e.y+" "+t.x+","+t.y}}else"S"===a&&1===c&&(e=g.pop(),l+="T"+e.x+","+e.y);""!==l&&this.chartType()&k.ChartType.SPLINE_SQUARE&&(l+="V"+f.bottom()+" H"+n+" Z");e=WAVE.SVG.createPath({d:l,class:this.chartType()&k.ChartType.SPLINE_SQUARE?this.lineSquareClass():this.lineClass()});b.appendChild(e)}this.chartType()&k.ChartType.POINT&&h.foreachPoint(function(a,c,g,e,l,k){h.drawPoint(d,b,f,a,c,g,e,l,k)})};y.prototype.drawPointTitles=function(d,b,f){var e=this;this.chartType()&k.ChartType.POINT&&
this.foreachPoint(function(h,l,k,m,n,a){e.drawPointTitle(d,b,f,h,l,k,m,n)})};y.prototype.drawPoint=function(d,b,f,e,h,l,n,m){var w;switch(this.pointType()){case k.PointType.CIRCLE:w=this.drawPointCircle(e,h,l,n);break;case k.PointType.RECT:w=this.drawPointRect(e,h,l,n);break;case k.PointType.TRI:w=this.drawPointTriangle(e,h,l,n)}var a=this;w&&(w.addEventListener("mouseover",function(b){a.chart().onSeriesMouseOver({originalEvt:b,vx:e,vy:h,dx:l,dy:n,title:m,series:a})}),w.addEventListener("mouseout",
function(b){a.chart().onSeriesMouseOut({originalEvt:b,vx:e,vy:h,dx:l,dy:n,title:m,series:a})}),w.addEventListener("click",function(b){a.chart().onSeriesClick({originalEvt:b,vx:e,vy:h,dx:l,dy:n,title:m,series:a})}),b.appendChild(w))};y.prototype.drawPointTitle=function(d,b,f,e,h,l,k,m){if(this.showPointTitle()&&m){var n=WAVE.strTemplate(this.pointTitleFormat(),{vx:e,vy:h,dx:l,dy:k,title:m,series:this.title()}),a=WAVE.SVG.createGroup({class:this.pointTitleClass(),transform:"rotate("+this.pointTitleAngle()+
","+e+","+h+")"}),n=WAVE.SVG.createText(n,e,h);a.appendChild(n);d.appendChild(a);var c=a.getBBox();d.removeChild(a);var g=c.x,t=c.y,v=c.width,p=c.height,g=g-2,t=t-2,v=v+4,p=p+4,c=e-g;d=h-t;for(var x=h-(t+p/2),y=e+this.pointTitleMargin(),g=WAVE.Geometry.toRectWH(g+(y-g),t+x,v,p),t=this.chart().sZone(),v=Number.MAX_VALUE,p=0;p<2*Math.PI;p+=Math.PI/4){x=WAVE.Geometry.rotateRectAroundCircle(e,h,15,g.width(),g.height(),p);y=t.getTitleRcPenalty(x,f);if(0===y){g=x;break}y<v&&(v=y,g=x)}t.addVTitle(g);f=WAVE.SVG.createRect(g.left(),
g.top(),g.width(),g.height(),{rx:4,ry:4});n.setAttribute("x",g.left()+c);n.setAttribute("y",g.top()+d);var G=this;a.addEventListener("mouseover",function(a){G.chart().onSeriesPointTitleMouseOver({originalEvt:a,vx:e,vy:h,dx:l,dy:k,title:m,series:G})});a.addEventListener("mouseout",function(a){G.chart().onSeriesPointTitleMouseOut({originalEvt:a,vx:e,vy:h,dx:l,dy:k,title:m,series:G})});a.addEventListener("click",function(a){G.chart().onSeriesPointTitleClick({originalEvt:a,vx:e,vy:h,dx:l,dy:k,title:m,
series:G})});a.insertBefore(f,n);this.showPointTitleLeg()&&(n=(new WAVE.Geometry.Point(e,h)).toPolarPoint(g.centerPoint()).theta(),n=WAVE.Geometry.findRayFromRectangleCenterSideIntersection(g,n),n=WAVE.SVG.createLine(n.x(),n.y(),e,h),a.insertBefore(n,f));b.appendChild(a)}};y.prototype.calcTitlePos=function(d,b,f,e){var h=null,k=null,n,m,w=f.width*f.height;n=d+5;m=b-5-f.height;var a=WAVE.Geometry.overlapAreaWH(e.left(),e.top(),e.width(),e.height(),n,m,f.width,f.height);a!==w?(n=d-5-f.width,m=b-5-f.height,
a=WAVE.Geometry.overlapAreaWH(e.left(),e.top(),e.width(),e.height(),n,m,f.width,f.height),a!==w?(n=d+5,m=b+5,a=WAVE.Geometry.overlapAreaWH(e.left(),e.top(),e.width(),e.height(),n,m,f.width,f.height),a!==w?(n=d-5-f.width,m=b+5,a=WAVE.Geometry.overlapAreaWH(e.left(),e.top(),e.width(),e.height(),n,m,f.width,f.height),a===w&&(h=n,k=m)):(h=n,k=m)):(h=n,k=m)):(h=n,k=m);return new WAVE.Geometry.Point(h,k)};y.prototype.drawPointCircle=function(d,b,f,e){f=this.pointSize();e=WAVE.SVG.createCircle(d,b,f,{class:this.pointClass()});
this.chart().sZone().addVPoint(WAVE.Geometry.toRectWH(d-f,b-f,2*f,2*f));return e};y.prototype.drawPointRect=function(d,b,f,e){f=this.pointSize();e=WAVE.SVG.createRect(d-f,b-f,2*f,2*f,{class:this.pointClass()});this.chart().sZone().addVPoint(WAVE.Geometry.toRectWH(d-f,b-f,2*f,2*f));return e};y.prototype.drawPointTriangle=function(d,b,e,k){e=this.pointSize();k=WAVE.SVG.createPath({d:"M"+(d-e)+","+(b+e)+" H"+(d+e)+" L"+d+","+(b-e)+" Z",class:this.pointClass()});this.chart().sZone().addVPoint(WAVE.Geometry.toRectWH(d-
e,b-e,2*e,2*e));return k};y.prototype.toString=function(){return"Series "+this.title()};k.DataSet=function(){var d=this;WAVE.extend(d,WAVE.EventManager);var b=[],e=WAVE.arrayWalkable(b);this.feedWalkable=function(e,f){if(!f||f>d.MAX_POINTS_QTY)f=d.MAX_POINTS_QTY;d.removeAllPoints();for(var k=e.getWalker(),n=0;k.moveNext()&&n++<f;){var m=k.current();b.push({x:m.x,y:m.y,t:m.t})}d.eventInvoke("EVT_CHANGED")};this.addPoint=function(e,f,k){b.push({x:e,y:f,title:k});d.eventInvoke("EVT_CHANGED")};this.forEach=
function(b){e.wEach(b)};this.removeAllPoints=function(){0<b.length&&(b.splice(0,b.length),d.eventInvoke("EVT_CHANGED"))};this.removePointIf=function(e){var f;do{f=!1;for(var k=0;k<b.length;k++)if(e(b[k])){b.splice(k,1);f=!0;break}}while(f);d.eventInvoke("EVT_CHANGED")};this.removePointByX=function(d){for(var e=0;e<b.length;e++)if(b[e].x===d){b.splice(e,1);break}};this.length=function(){return b.length};this.getPoint=function(d){return b[d]};this.getPointByX=function(d){for(var e=0;e<b.length;e++){var f=
b[e];if(f.x===d)return f}};this.getMinX=function(){return e.wSelect(function(b){return b.x}).wMin()};this.getMaxX=function(){return e.wSelect(function(b){return b.x}).wMax()};this.getMinY=function(){return e.wSelect(function(b){return b.y}).wMin()};this.getMaxY=function(){return e.wSelect(function(b){return b.y}).wMax()};this.getNearestNeighbours=function(d){if(0===b.length)return null;var h=b[0],k=b[b.length-1];if(d<h.x)return{left:null,right:h};if(d>k.x)return{left:k,right:null};h=e.wFirstIdx(function(b){return d<
b.x});return{left:b[h-1],right:b[h]}}};k.DataSet.prototype.MAX_POINTS_QTY=44100;var d=0;k.Chart=function(e){function b(){p&&0===v&&(h.draw(),p=!1)}function f(){p=!0;b()}function n(a){for(var b=0;b<a.childNodes.length;){var c=a.childNodes[b];"defs"!==c.nodeName?a.removeChild(c):b++}}var h=this;WAVE.extend(h,WAVE.EventManager);var l=++d;this.id=function(){return l};var u=e;this.svgEl=function(){return u};$(window).resize(function(){h.draw()});this.svgEl=function(a){"undefined"!==typeof a&&a!==u&&(u=
a,h.draw());return u};var m=new k.XZone(this);m.eventBind("EVT_CHANGED",f);this.xZone=function(){return m};var w=new k.YZone(this);w.eventBind("EVT_CHANGED",f);this.yZone=function(){return w};var a=new k.SZone(this);a.eventBind("EVT_CHANGED",f);this.sZone=function(){return a};var c=new k.LZone(this);c.eventBind("EVT_CHANGED",f);this.lZone=function(){return c};var g=new k.XAxis(h);g.eventBind("EVT_CHANGED",f);this.xAxis=function(a){"undefined"!==typeof a&&a!==g&&(g=a,h.draw());return g};var t=new k.YAxis(h);
t.eventBind("EVT_CHANGED",f);this.yAxis=function(a){"undefined"!==typeof a&&a!==t&&(t=a,h.draw());return t};var v=0,p=!0;this.beginUpdate=function(){v++};this.endUpdate=function(){0<v&&v--;b()};this.beginUpdate();var z=[],O=WAVE.arrayWalkable(z);this.seriesListWalkable=function(){return O};this.getSeries=function(a){return O.wFirst(function(b){return b.id()===a})};this.addSeries=function(a){a=new y(h,a);a.eventBind("EVT_CHANGED",f);z.push(a);f();return a};this.removeSeries=function(a){var b=O.wFirstIdx(function(b){return b===
a});-1!==b&&(z.splice(b,1),a.eventUnbind("EVT_CHANGED",f),f())};this.clearSeries=function(){if(0!==z.length){for(var a in z)z[a].eventUnbind("EVT_CHANGED",f);z.splice(0,z.length);f()}};this.draw=function(){var a=u.getBoundingClientRect(),b=a.width,c=a.height,d;try{d=h.splitArea(u,b,c)}catch(e){console.error(e.message);return}n(u,!0);b=WAVE.SVG.createRect(0,0,b,c,{class:"wvSvgBkgr"});u.appendChild(b);h.xZone().draw(u,d.xZone);h.yZone().draw(u,d.yZone);h.sZone().draw(u,d.sZone);h.lZone().draw(u,d.lZone);
var f=WAVE.Geometry.toRectWH(d.sZone.left()+a.left,d.sZone.top()+a.top,d.sZone.width(),d.sZone.height());d=h.sZone().rulerScopes();if(0<d.length)for(var g in d)WAVE.GUI.rulerSet({element:u,scope:d[g],elementCfg:{getTxt:function(b){var c=h.xAxis(),d=h.yAxis();h.sZone().lastArea();if(f.contains(b.clientPoint)){var e=b.clientPoint.x()-a.left,g=b.clientPoint.y()-a.top,e=c.v2d(e),g=d.v2d(g);b.divHint.style.visibility="visible";return c.labelValToStr(e)+"; "+d.labelValToStr(g)}b.divHint.style.visibility=
"hidden"},getMasterInfo:function(b){var c=h.xAxis(),d=h.yAxis();h.sZone();var e=b.clientPoint.x()-a.left,g=b.clientPoint.y()-a.top,c=c.v2d(e),d=d.v2d(g),d={dataPoint:new WAVE.Geometry.Point(c,d)};d.isInParentRc=f.contains(b.clientPoint);return d},getSlaveInfo:function(b){var c=h.xAxis(),d=h.yAxis(),e=h.sZone(),g=b.masterRes.dataPoint.x();b=b.masterRes.dataPoint.y();c=c.d2v(g)+a.left;d=d.d2v(b)+a.top;d={clientPoint:new WAVE.Geometry.Point(c,d)};d.isInParentRc=(!e.rulerCheckXContains()||d.clientPoint.x()>=
f.left()&&d.clientPoint.x()<=f.right())&&(!e.rulerCheckYContains()||d.clientPoint.y()>=f.top()&&d.clientPoint.y()<=f.bottom());return d},parentRc:f}});else WAVE.GUI.rulerUnset({element:u})};this.splitArea=function(a,b,c){var d=h.xZone().getHeight(a),e=h.yZone().getWidth(a),f=new x.Point(0,0),g=new x.Point(Math.round(b),Math.round(c));d.top&&f.y(f.y()+d.top);d.bottom&&g.y(g.y()-d.bottom);e.left&&f.x(f.x()+e.left);e.right&&g.x(g.x()-e.right);var d={top:new x.Rectangle(new x.Point(f.x(),0),new x.Point(g.x(),
f.y())),bottom:new x.Rectangle(new x.Point(f.x(),g.y()),new x.Point(g.x(),c))},e={left:new x.Rectangle(new x.Point(0,f.y()),new x.Point(f.x(),g.y())),right:new x.Rectangle(new x.Point(g.x(),f.y()),new x.Point(b,g.y()))},l=new x.Rectangle(f,g);0<f.x()&&(l.corner1().x(l.left()+1),d.top.corner1().x(l.left()),d.bottom.corner1().x(l.left()));0<f.y()&&(l.corner1().y(l.top()+1),e.left.corner1().y(l.top()),e.right.corner1().y(l.top()));g.x()<b&&(l.corner2().x(l.right()-1),d.top.corner2().x(l.right()),d.bottom.corner2().x(l.right()));
g.y()<c&&(l.corner2().y(l.bottom()-1),e.left.corner2().y(l.bottom()),e.right.corner2().y(l.bottom()));a=h.lZone().getSize(a);var m,n;switch(h.lZone().corner()){case k.RectCorner.LEFTTOP:m=l.left()+h.lZone().legendMargin();n=l.top()+h.lZone().legendMargin();break;case k.RectCorner.RIGHTTOP:m=l.right()-h.lZone().legendMargin()-a.w;n=l.top()+h.lZone().legendMargin();break;case k.RectCorner.LEFTBOTTOM:m=l.left()+h.lZone().legendMargin();n=l.bottom()-a.h-h.lZone().legendMargin();break;case k.RectCorner.RIGHTBOTTOM:m=
l.right()-h.lZone().legendMargin()-a.w,n=l.bottom()-a.h-h.lZone().legendMargin()}m=new x.Rectangle(new x.Point(m,n),new x.Point(m+a.w,n+a.h));return{xZone:d,yZone:e,sZone:l,lZone:m}};this.endUpdate()};k.Chart.prototype.onSeriesMouseOver=function(d){this.eventInvoke(k.EVT_SERIES_POINT_MOUSEOVER,d)};k.Chart.prototype.onSeriesMouseOut=function(d){this.eventInvoke(k.EVT_SERIES_POINT_MOUSEOUT,d)};k.Chart.prototype.onSeriesClick=function(d){this.eventInvoke(k.EVT_SERIES_POINT_CLICK,d)};k.Chart.prototype.onSeriesPointTitleMouseOver=
function(d){this.eventInvoke(k.EVT_SERIES_POINT_TITLE_MOUSEOVER,d)};k.Chart.prototype.onSeriesPointTitleMouseOut=function(d){this.eventInvoke(k.EVT_SERIES_POINT_TITLE_MOUSEOUT,d)};k.Chart.prototype.onSeriesPointTitleClick=function(d){this.eventInvoke(k.EVT_SERIES_POINT_TITLE_CLICK,d)};return k}();WAVE.Pay.Providers.Braintree=function(){var n={TYPE:"braintree",clientToken:null,initialize:function(k){if(WAVE.strEmpty(k.publicKey))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Braintree.initialize()","init.publicKey");n.clientToken=k.publicKey},tokenize:function(k,x,z){if(WAVE.strEmpty(n.clientToken))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Braintree.tokenize()","WAVE.Pay.Providers.Braintree.clientToken");if(WAVE.strEmpty(x.cardNumber)||WAVE.strEmpty(x.cardExpMonth)||
WAVE.strEmpty(x.cardExpYear))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Braintree.tokenize()","paymentData.cardNumber, paymentData.cardExpMonth, paymentData.cardExpYear");var e={number:x.cardNumber,expirationMonth:x.cardExpMonth,expirationYear:x.cardExpYear};WAVE.strEmpty(x.cardCVC)||(e.cvv=x.cardCVC);WAVE.strEmpty(x.cardHolder)||(e.cardholderName=x.cardHolder);WAVE.strEmpty(x.cardAddressZip)||(e.billingAddress={postalCode:x.cardAddressZip});var y=n.clientToken;n.clientToken=null;
(new braintree.api.Client({clientToken:y})).tokenizeCard(e,function(d,e){var b={requestContext:{facade:k,paymentData:x},OK:!0,httpStatus:null,providerType:n.TYPE,providerName:k.providerName(),errorCode:0,errorType:0,errorMessage:"",errorParams:null,rawError:null,tokenString:null,card:{}};if(WAVE.strEmpty(d))b.tokenString=e;else{b.OK=!1;var f;f=WAVE.strEmpty(d)?WAVE.Pay.CardErrors.OK:WAVE.Pay.CardErrors.GENERAL_ERROR;b.errorCode=f;f=WAVE.strEmpty(d)?WAVE.Pay.ErrorTypes.OK:WAVE.Pay.ErrorTypes.GENERAL_ERROR;
b.errorType=f;b.errorMessage=d;b.errorParams={};b.rawError=d}z(b)})}};return n}();WAVE.Pay.Providers.Stripe=function(){function n(e){switch(e){case "200":return z.HTTPStatus.STATUS200;case "400":return z.HTTPStatus.STATUS400;case "401":return z.HTTPStatus.STATUS401;case "402":return z.HTTPStatus.STATUS402;case "404":return z.HTTPStatus.STATUS404;case "429":return z.HTTPStatus.STATUS429;case "500":return z.HTTPStatus.STATUS50X;case "502":return z.HTTPStatus.STATUS50X;case "503":return z.HTTPStatus.STATUS50X;case "504":return z.HTTPStatus.STATUS50X}return e}function k(e){switch(e){case "api_connection_error":return WAVE.Pay.ErrorTypes.API_CONNECTION_ERROR;
case "api_error":return WAVE.Pay.ErrorTypes.API_ERROR;case "authentication_error":return WAVE.Pay.ErrorTypes.AUTHENTICATION_ERROR;case "card_error":return WAVE.Pay.ErrorTypes.CARD_ERROR;case "invalid_request_error":return WAVE.Pay.ErrorTypes.INVALID_REQUEST_ERROR;case "rate_limit_error":return WAVE.Pay.ErrorTypes.RATE_LIMIT_ERROR}return WAVE.Pay.ErrorTypes.OK}function x(e){switch(e){case "invalid_number":return WAVE.Pay.CardErrors.INVALID_NUMBER;case "invalid_expiry_month":return WAVE.Pay.CardErrors.INVALID_EXPIRY_MONTH;
case "invalid_expiry_year":return WAVE.Pay.CardErrors.INVALID_EXPIRY_YEAR;case "invalid_cvc":return WAVE.Pay.CardErrors.INVALID_CVC;case "incorrect_number":return WAVE.Pay.CardErrors.INCORRECT_NUMBER;case "expired_card":return WAVE.Pay.CardErrors.EXPIRED_CARD;case "incorrect_cvc":return WAVE.Pay.CardErrors.INCORRECT_CVC;case "incorrect_zip":return WAVE.Pay.CardErrors.INCORRECT_ZIP;case "card_declined":return WAVE.Pay.CardErrors.CARD_DECLINED;case "missing":return WAVE.Pay.CardErrors.MISSING;case "processing_error":return WAVE.Pay.CardErrors.PROCESSING_ERROR}return WAVE.Pay.CardErrors.OK}
var z={TYPE:"stripe",HTTPStatus:{STATUS200:"OK\tEverything worked as expected",STATUS400:"Bad Request\tThe request was unacceptable, often due to missing a required parameter",STATUS401:"Unauthorized\tNo valid API key provided",STATUS402:"Request Failed\tThe parameters were valid but the request failed",STATUS404:"Not Found\tThe requested resource doesn't exist",STATUS429:"Too Many Requests\tToo many requests hit the API too quickly",STATUS50X:"500, 502, 503, 504 - Server Errors\tSomething went wrong on Stripe's end. (These are rare.)"},
initialize:function(e){if(WAVE.strEmpty(e.publicKey))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Stripe.initialize()","init.publicKey");Stripe.setPublishableKey(e.publicKey)},tokenize:function(e,y,d){if(WAVE.strEmpty(y.cardNumber)||WAVE.strEmpty(y.cardExpMonth)||WAVE.strEmpty(y.cardExpYear))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Stripe.tokenize()","paymentData.cardNumber, paymentData.cardExpMonth, paymentData.cardExpYear");var r={number:y.cardNumber.replace(/\s+|-/g,
""),exp_month:2===y.cardExpMonth.length?"0"+y.cardExpMonth:y.cardExpMonth,exp_year:y.cardExpYear};WAVE.strEmpty(y.cardCVC)||(r.cvc=y.cardCVC);WAVE.strEmpty(y.cardHolder)||(r.name=y.cardHolder);WAVE.strEmpty(y.cardAddressLine1)||(r.address_line1=y.cardAddressLine1);WAVE.strEmpty(y.cardAddressLine2)||(r.address_line2=y.cardAddressLine2);WAVE.strEmpty(y.cardAddressCity)||(r.address_city=y.cardAddressCity);WAVE.strEmpty(y.cardAddressState)||(r.address_state=y.cardAddressState);WAVE.strEmpty(y.cardAddressZip)||
(r.address_zip=y.cardAddressZip);WAVE.strEmpty(y.cardAddressCountry)||(r.address_country=y.cardAddressCountry);Stripe.card.createToken(r,function(b,f){var q={requestContext:{facade:e,paymentData:y},OK:200<=b&&300>b,httpStatus:b,httpStatusDescr:n(b),providerType:z.TYPE,providerName:e.providerName(),errorCode:0,errorType:0,errorMessage:"",errorParams:null,rawError:null,tokenString:null,card:{}};if(WAVE.strEmpty(f.error)){q.tokenString=f.id;var h=f.card;q.card={providerID:h.id,addressCity:h.address_city,
addressCountry:h.address_country,addressLine1:h.address_line1,addressLine2:h.address_line2,addressState:h.address_state,addressZip:h.address_zip,brand:h.brand,CVCcheck:h.cvc_check,expirationMonth:h.exp_month,expirationYear:h.exp_year,fundingType:h.funding,last4:h.last4,holder:h.name}}else q.OK=!1,q.errorCode=x(f.error.code),q.errorType=k(f.error.type),q.errorMessage=f.error.message,q.errorParams={0:f.error.param},q.rawError=f.error;d(q)})}};return z}();
